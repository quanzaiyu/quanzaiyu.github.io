(window.webpackJsonp=window.webpackJsonp||[]).push([[619],{808:function(t,a,p){"use strict";p.r(a);var s={props:["slot-key"],mounted(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},e=p(0),n=Object(e.a)(s,function(){var t=this,a=t.$createElement,p=t._self._c||a;return p("ContentSlotsDistributor",{attrs:{"slot-key":t.slotKey}},[p("h1",{attrs:{id:"安装-php-并使-nginx-支持"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#安装-php-并使-nginx-支持","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装 PHP 并使 nginx 支持")]),t._v(" "),p("h2",{attrs:{id:"安装-php-及相关组件"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#安装-php-及相关组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装 php 及相关组件")]),t._v(" "),p("div",{staticClass:"language- extra-class"},[p("pre",{pre:!0,attrs:{class:"language-text"}},[p("code",[t._v("# yum -y install php php-cli php-fpm php-pear php-mysql php-mssql php-odbc php-imap php-common php-devel lighttpd-fastcgi php-gd php-ldapphp-xml php-xmlrpc php-mbstring php-mcrypt php-snmp php-soap php-tidy \n")])])]),p("h2",{attrs:{id:"开启服务"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#开启服务","aria-hidden":"true"}},[t._v("#")]),t._v(" 开启服务")]),t._v(" "),p("div",{staticClass:"language- extra-class"},[p("pre",{pre:!0,attrs:{class:"language-text"}},[p("code",[t._v("# service php-fpm start\n")])])]),p("p",[t._v("查看是否启动成功")]),t._v(" "),p("div",{staticClass:"language- extra-class"},[p("pre",{pre:!0,attrs:{class:"language-text"}},[p("code",[t._v("[root@localhost html]# ps -ef | grep php-fpm\nroot      20153      1  0 21:26 ?        00:00:00 php-fpm: master process (/etc/php-fpm.conf)\napache    20154  20153  0 21:26 ?        00:00:00 php-fpm: pool www\napache    20155  20153  0 21:26 ?        00:00:00 php-fpm: pool www\napache    20156  20153  0 21:26 ?        00:00:00 php-fpm: pool www\napache    20157  20153  0 21:26 ?        00:00:00 php-fpm: pool www\napache    20158  20153  0 21:26 ?        00:00:00 php-fpm: pool www\nroot      20924  20650  0 21:38 pts/1    00:00:00 grep --color=auto php-fpm\n\n[root@localhost html]# netstat -ntlp | grep 9000\ntcp        0      0 127.0.0.1:9000          0.0.0.0:*               LISTEN  \n")])])]),p("p",[t._v("php-fpm 默认监听 9000")]),t._v(" "),p("h2",{attrs:{id:"开机启动"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#开机启动","aria-hidden":"true"}},[t._v("#")]),t._v(" 开机启动")]),t._v(" "),p("div",{staticClass:"language- extra-class"},[p("pre",{pre:!0,attrs:{class:"language-text"}},[p("code",[t._v("# chkconfig --levels 235 php-fpm on\n")])])]),p("h2",{attrs:{id:"配置nginx支持php"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#配置nginx支持php","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置nginx支持php")]),t._v(" "),p("p",[t._v("首先最好备份 nginx.conf，以防出错")]),t._v(" "),p("div",{staticClass:"language- extra-class"},[p("pre",{pre:!0,attrs:{class:"language-text"}},[p("code",[t._v("# cp /etc/nginx/conf.d/default.conf /etc/nginx/conf.d/default.conf.bak\n")])])]),p("p",[t._v("编辑 "),p("code",[t._v("/etc/nginx/conf.d/default.conf")])]),t._v(" "),p("div",{staticClass:"language- extra-class"},[p("pre",{pre:!0,attrs:{class:"language-text"}},[p("code",[t._v("server {\n    listen       80;\n    server_name  localhost;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.php index.html index.htm; #增加index.php\n    }\n\n    #error_page  404              /404.html;\n\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n\n    location ~ \\.php$ {\n        root           /usr/share/nginx/html; #修改为nginx默认路径\n        fastcgi_pass   127.0.0.1:9000;\n        fastcgi_index  index.php;\n        fastcgi_param  SCRIPT_FILENAME  /usr/share/nginx/html$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n}\n")])])]),p("p",[t._v("配置php，编辑 "),p("code",[t._v("/etc/php.ini")]),t._v(" 文件，找到以下语句放开注释")]),t._v(" "),p("div",{staticClass:"language- extra-class"},[p("pre",{pre:!0,attrs:{class:"language-text"}},[p("code",[t._v("cgi.fix_pathinfo = 1\n")])])]),p("p",[t._v("重启 nginx，php-fpm")]),t._v(" "),p("div",{staticClass:"language- extra-class"},[p("pre",{pre:!0,attrs:{class:"language-text"}},[p("code",[t._v("systemctl restart nginx\nsystemctl restart php-fpm\n")])])]),p("p",[t._v("建立info.php文件")]),t._v(" "),p("div",{staticClass:"language- extra-class"},[p("pre",{pre:!0,attrs:{class:"language-text"}},[p("code",[t._v("# vim /usr/share/nginx/html/info.php \n<?php\n  phpinfo();\n?>\n")])])]),p("p",[t._v("此时，就可以在浏览器中访问 php 文件了。")]),t._v(" "),p("imgLink",{attrs:{src:"articles/014.jpg/small"}})],1)},[],!1,null,null,null);n.options.__file="php.md";a.default=n.exports}}]);