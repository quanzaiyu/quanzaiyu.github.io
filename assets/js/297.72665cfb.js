(window.webpackJsonp=window.webpackJsonp||[]).push([[297],{691:function(t,a,s){"use strict";s.r(a);var n={props:["slot-key"],mounted(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},p=s(0),e=Object(p.a)(n,function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.slotKey}},[s("h1",{attrs:{id:"配置-nginx-支持-php"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-nginx-支持-php","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置 Nginx 支持 php")]),t._v(" "),s("h2",{attrs:{id:"安装-php-及相关组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-php-及相关组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装 php 及相关组件")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ yum -y "),s("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" php php-cli php-fpm php-pear php-mysql php-mssql php-odbc php-imap php-common php-devel lighttpd-fastcgi php-gd php-ldapphp-xml php-xmlrpc php-mbstring php-mcrypt php-snmp php-soap php-tidy \n")])])]),s("h2",{attrs:{id:"开启服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启服务","aria-hidden":"true"}},[t._v("#")]),t._v(" 开启服务")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{attrs:{class:"token function"}},[t._v("service")]),t._v(" php-fpm start\nRedirecting to /bin/systemctl start php-fpm.service\n")])])]),s("p",[t._v("查看是否启动成功")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{attrs:{class:"token function"}},[t._v("ps")]),t._v(" -ef "),s("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("grep")]),t._v(" php-fpm\nroot      20153      1  0 21:26 ?        00:00:00 php-fpm: master process "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/etc/php-fpm.conf"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\napache    20154  20153  0 21:26 ?        00:00:00 php-fpm: pool www\napache    20155  20153  0 21:26 ?        00:00:00 php-fpm: pool www\napache    20156  20153  0 21:26 ?        00:00:00 php-fpm: pool www\napache    20157  20153  0 21:26 ?        00:00:00 php-fpm: pool www\napache    20158  20153  0 21:26 ?        00:00:00 php-fpm: pool www\nroot      20924  20650  0 21:38 pts/1    00:00:00 "),s("span",{attrs:{class:"token function"}},[t._v("grep")]),t._v(" --color"),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("auto php-fpm\n\n$ "),s("span",{attrs:{class:"token function"}},[t._v("netstat")]),t._v(" -ntlp "),s("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("grep")]),t._v(" 9000\ntcp        0      0 127.0.0.1:9000          0.0.0.0:*               LISTEN  \n")])])]),s("p",[t._v("php-fpm 默认监听 9000")]),t._v(" "),s("h2",{attrs:{id:"开机启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开机启动","aria-hidden":"true"}},[t._v("#")]),t._v(" 开机启动")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{attrs:{class:"token function"}},[t._v("chkconfig")]),t._v(" --levels 235 php-fpm on\n")])])]),s("h2",{attrs:{id:"配置nginx支持php"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置nginx支持php","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置nginx支持php")]),t._v(" "),s("p",[t._v("首先最好备份 nginx.conf，以防出错")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{attrs:{class:"token function"}},[t._v("cp")]),t._v(" /etc/nginx/conf.d/default.conf /etc/nginx/conf.d/default.conf.bak\n")])])]),s("p",[t._v("编辑 "),s("code",[t._v("/etc/nginx/conf.d/default.conf")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("server "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  listen       80"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  server_name  localhost"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  location / "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    root   /usr/share/nginx/html"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    index  index.php index.html index.htm"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("#增加index.php")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{attrs:{class:"token comment"}},[t._v("#error_page  404              /404.html;")]),t._v("\n\n  error_page   500 502 503 504  /50x.html"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  location "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" /50x.html "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    root   /usr/share/nginx/html"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  location ~ \\.php$ "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    root           /usr/share/nginx/html"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("#修改为nginx默认路径")]),t._v("\n    fastcgi_pass   127.0.0.1:9000"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    fastcgi_index  index.php"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    fastcgi_param  SCRIPT_FILENAME  /usr/share/nginx/html"),s("span",{attrs:{class:"token variable"}},[t._v("$fastcgi_script_name")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    include        fastcgi_params"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("配置php，编辑 "),s("code",[t._v("/etc/php.ini")]),t._v(" 文件，找到以下语句放开注释")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ vim /etc/php.ini\ncgi.fix_pathinfo "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" 1\n")])])]),s("p",[t._v("重启 nginx，php-fpm")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("systemctl restart nginx\nsystemctl restart php-fpm\n")])])]),s("p",[t._v("建立info.php文件")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ vim /usr/share/nginx/html/info.php \n"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("?php\n  phpinfo"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n?"),s("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("此时，就可以在浏览器中访问 php 文件了。")]),t._v(" "),s("imgLink",{attrs:{src:"articles/014.jpg/small"}})],1)},[],!1,null,null,null);e.options.__file="PHP.md";a.default=e.exports}}]);