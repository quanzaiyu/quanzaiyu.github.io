(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{422:function(t,v,a){"use strict";a.r(v);var _=a(0),s=Object(_.a)({},function(){var t=this,v=t.$createElement,a=t._self._c||v;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"挂载与卸载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载与卸载","aria-hidden":"true"}},[t._v("#")]),t._v(" 挂载与卸载")]),t._v(" "),a("p",[t._v("挂载概念简述：")]),t._v(" "),a("p",[t._v("根文件系统之外的其他文件要想能够被访问，都必须通过“关联”至根文件系统上的某个目录来实现，此关联操作即为“挂载”，此目录即为“挂载点”,解除此关联关系的过程称之为“卸载”")]),t._v(" "),a("ol",[a("li",[t._v("挂载：根文件系统外通过关联至根文件系统上的某个目录来实现访问")]),t._v(" "),a("li",[t._v("挂载点：mount_point，用于作为另一个文件系统的访问入口；")])]),t._v(" "),a("h2",{attrs:{id:"挂载-mount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载-mount","aria-hidden":"true"}},[t._v("#")]),t._v(" 挂载 mount")]),t._v(" "),a("p",[t._v("命令使用格式：mount [-o options] device mount_point")]),t._v(" "),a("h3",{attrs:{id:"device"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#device","aria-hidden":"true"}},[t._v("#")]),t._v(" device")]),t._v(" "),a("p",[t._v("device：指明要挂载的设备；")]),t._v(" "),a("ol",[a("li",[t._v("设备文件：例如/dev/sda5")]),t._v(" "),a("li",[t._v("卷标：-L 'LABEL', 例如 -L 'MYDATA'")]),t._v(" "),a("li",[t._v("UUID, -U 'UUID'：例如 -U '0c50523c-43f1-45e7-85c0-a126711d406e'")]),t._v(" "),a("li",[t._v("伪文件系统名称：proc, sysfs, devtmpfs, configfs")])]),t._v(" "),a("h3",{attrs:{id:"mount-point"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mount-point","aria-hidden":"true"}},[t._v("#")]),t._v(" mount_point")]),t._v(" "),a("p",[t._v("挂载需注意以下几点")]),t._v(" "),a("ol",[a("li",[t._v("挂载点目录事先存在；")]),t._v(" "),a("li",[t._v("应该使用未被或不会被其它进程使用到的目录；")]),t._v(" "),a("li",[t._v("挂载点下原有的文件将会被隐藏；")])]),t._v(" "),a("h3",{attrs:{id:"常用命令选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用命令选项","aria-hidden":"true"}},[t._v("#")]),t._v(" 常用命令选项")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("-t vsftype")]),t._v("：指定要挂载的设备上的文件系统类型；")]),t._v(" "),a("li",[a("code",[t._v("-r")]),t._v(": readonly，只读挂载；")]),t._v(" "),a("li",[a("code",[t._v("-w")]),t._v(": read and write, 读写挂载；")]),t._v(" "),a("li",[a("code",[t._v("-n")]),t._v(": 不更新/etc/mtab；")]),t._v(" "),a("li",[a("code",[t._v("-a")]),t._v("：自动挂载所有支持自动挂载的设备；(定义在了/etc/fstab文件中，且挂载选项中有“自动挂载”功能)")]),t._v(" "),a("li",[a("code",[t._v("-L 'LABEL'")]),t._v(": 以卷标指定挂载设备；")]),t._v(" "),a("li",[a("code",[t._v("-U 'UUID'")]),t._v(": 以UUID指定要挂载的设备；")]),t._v(" "),a("li",[a("code",[t._v("-B")]),t._v(", "),a("code",[t._v("--bind")]),t._v(": 绑定目录到另一个目录上；")])]),t._v(" "),a("h3",{attrs:{id:"查看所有挂载的设备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看所有挂载的设备","aria-hidden":"true"}},[t._v("#")]),t._v(" 查看所有挂载的设备")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /proc/mounts\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("df")]),t._v(" -h  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 显示已经挂载的分区列表")]),t._v("\n")])])]),a("h3",{attrs:{id:"o-options：-挂载文件系统的选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#o-options：-挂载文件系统的选项","aria-hidden":"true"}},[t._v("#")]),t._v(" -o options：(挂载文件系统的选项)")]),t._v(" "),a("ul",[a("li",[t._v("async：异步模式；")]),t._v(" "),a("li",[t._v("sync：同步模式；")]),t._v(" "),a("li",[t._v("atime/noatime：包含目录和文件；")]),t._v(" "),a("li",[t._v("diratime/nodiratime：目录的访问时间戳")]),t._v(" "),a("li",[t._v("auto/noauto：是否支持自动挂载")]),t._v(" "),a("li",[t._v("exec/noexec：是否支持将文件系统上应用程序运行为进程")]),t._v(" "),a("li",[t._v("dev/nodev：是否支持在此文件系统上使用设备文件；")]),t._v(" "),a("li",[t._v("suid/nosuid：是否支持在此文件系统上使用特殊权限")]),t._v(" "),a("li",[t._v("remount：重新挂载")]),t._v(" "),a("li",[t._v("ro：只读")]),t._v(" "),a("li",[t._v("rw:读写")]),t._v(" "),a("li",[t._v("user/nouser：是否允许普通用户挂载此设备")]),t._v(" "),a("li",[t._v("acl：启用此文件系统上的acl功能")])]),t._v(" "),a("p",[t._v("注意：上述选项可多个同时使用，彼此使用逗号分隔；")]),t._v(" "),a("p",[t._v("默认挂载选项：defaults：rw, suid, dev, exec, auto, nouser, and async")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" -o loop file.iso /mnt/cdrom "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载一个文件或ISO镜像文件")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" -t vfat /dev/hda5 /mnt/hda5 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载一个Windows FAT32文件系统")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" -t smbfs -o username"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("user,password"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("pass //WinClient/share /mnt/share "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 挂载一个windows网络共享磁盘空间")]),t._v("\n")])])]),a("h2",{attrs:{id:"卸载-umount"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载-umount","aria-hidden":"true"}},[t._v("#")]),t._v(" 卸载 umount")]),t._v(" "),a("p",[t._v("命令使用格式：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("umount")]),t._v(" DEVICE\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("umount")]),t._v(" MOUNT_POINT\n")])])]),a("h2",{attrs:{id:"交互演示"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#交互演示","aria-hidden":"true"}},[t._v("#")]),t._v(" 交互演示")]),t._v(" "),a("h3",{attrs:{id:"设备驱动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设备驱动","aria-hidden":"true"}},[t._v("#")]),t._v(" 设备驱动")]),t._v(" "),a("p",[t._v("设备驱动位于 "),a("code",[t._v("/dev")]),t._v(" 下，通过 "),a("code",[t._v("ls")]),t._v(" 命令查看系统中所有设备。")]),t._v(" "),a("h3",{attrs:{id:"挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#挂载","aria-hidden":"true"}},[t._v("#")]),t._v(" 挂载")]),t._v(" "),a("p",[t._v("比如，在 "),a("code",[t._v("/dev")]),t._v(" 下有一个设备叫 "),a("code",[t._v("cdrom")]),t._v("，通常为光驱设备，要将此设备挂载到系统当中，只需使用 "),a("code",[t._v("mount /dev/cdrom /mnt/cdrom")]),t._v(" 即可，此时，该设备已挂载至 "),a("code",[t._v("/mnt/cdrom")]),t._v(" 下。")]),t._v(" "),a("imgLink",{attrs:{src:"articles/011.jpg/small"}}),t._v(" "),a("h2",{attrs:{id:"etc-fstab和-etc-mtab的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-fstab和-etc-mtab的区别","aria-hidden":"true"}},[t._v("#")]),t._v(" /etc/fstab和/etc/mtab的区别")]),t._v(" "),a("h3",{attrs:{id:"etc-fstab文件的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-fstab文件的作用","aria-hidden":"true"}},[t._v("#")]),t._v(" /etc/fstab文件的作用:")]),t._v(" "),a("p",[t._v("记录了计算机上硬盘分区的相关信息，启动 Linux 的时候，检查分区的 fsck 命令，和挂载分区的 mount 命令，都需要 fstab 中的信息，来正确的检查和挂载硬盘。")]),t._v(" "),a("h3",{attrs:{id:"etc-mtab文件的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-mtab文件的作用","aria-hidden":"true"}},[t._v("#")]),t._v(" /etc/mtab文件的作用:")]),t._v(" "),a("p",[t._v("记载的是现在系统已经装载的文件系统，包括操作系统建立的虚拟文件等；而/etc/fstab是系统准备装载的。 每当 mount 挂载分区、umount 卸载分区，都会动态更新 mtab，mtab 总是保持着当前系统中已挂载的分区信息，fdisk、df 这类程序，必须要读取 mtab 文件，才能获得当前系统中的分区挂载情况。当然我们自己还可以通过读取/proc/mount也可以来获取当前挂载信息")]),t._v(" "),a("h3",{attrs:{id:"开机自动挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开机自动挂载","aria-hidden":"true"}},[t._v("#")]),t._v(" 开机自动挂载")]),t._v(" "),a("p",[t._v("如果我们想实现开机自动挂载某设备，只要修改 "),a("code",[t._v("/etc/fstab")]),t._v(" 文件即可。")]),t._v(" "),a("p",[t._v("文件挂载的配置文件："),a("code",[t._v("/etc/fstab")])]),t._v(" "),a("p",[t._v("每行定义一个要挂载的文件系统；")]),t._v(" "),a("p",[t._v("格式例如")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("要挂载的设备或伪文件系统")]),t._v(" "),a("th",[t._v("挂载点")]),t._v(" "),a("th",[t._v("文件系统类型")]),t._v(" "),a("th",[t._v("挂载选项")]),t._v(" "),a("th",[t._v("转储频率")]),t._v(" "),a("th",[t._v("自检次序")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("UUID=6efb8a23-bae1-427c-ab10-3caca95250b1")]),t._v(" "),a("td",[t._v("/boot")]),t._v(" "),a("td",[t._v("xfs")]),t._v(" "),a("td",[t._v("defaults")]),t._v(" "),a("td",[t._v("0")]),t._v(" "),a("td",[t._v("0")])]),t._v(" "),a("tr",[a("td",[t._v("/dev/mapper/cl-root")]),t._v(" "),a("td",[t._v("/")]),t._v(" "),a("td",[t._v("xfs")]),t._v(" "),a("td",[t._v("defaults")]),t._v(" "),a("td",[t._v("0")]),t._v(" "),a("td",[t._v("0")])]),t._v(" "),a("tr",[a("td",[t._v("UUID=01758f71-af40-4a56-8763-bd2272746772")]),t._v(" "),a("td",[t._v("/boot")]),t._v(" "),a("td",[t._v("xfs")]),t._v(" "),a("td",[t._v("defaults")]),t._v(" "),a("td",[t._v("0")]),t._v(" "),a("td",[t._v("0")])]),t._v(" "),a("tr",[a("td",[t._v("/dev/mapper/cl-swap")]),t._v(" "),a("td",[t._v("swap")]),t._v(" "),a("td",[t._v("swap")]),t._v(" "),a("td",[t._v("defaults")]),t._v(" "),a("td",[t._v("0")]),t._v(" "),a("td",[t._v("0")])]),t._v(" "),a("tr",[a("td",[t._v("/dev/cdrom")]),t._v(" "),a("td",[t._v("/mnt/cdrom")]),t._v(" "),a("td",[t._v("auto")]),t._v(" "),a("td",[t._v("defaults")]),t._v(" "),a("td",[t._v("0")]),t._v(" "),a("td",[t._v("0")])])])]),t._v(" "),a("p",[a("strong",[t._v("要挂载的设备或伪文件系统")]),t._v('：设备文件、LABEL(LABEL="")、UUID(UUID="")、伪文件系统名称(proc, sysfs)')]),t._v(" "),a("p",[a("strong",[t._v("挂载点")]),t._v("：指定的文件夹")]),t._v(" "),a("p",[a("strong",[t._v("挂载选项")]),t._v(": 可指定多项，用英文逗号分隔，如 auto, ro\nauto 开机自动挂载\ndefault 按照大多数永久文件系统的缺省值设置挂载定义\nnoauto 开机不自动挂载\nnouser 只有超级用户可以挂载\nro 按只读权限挂载\nrw 按可读可写权限挂载\nuser 任何用户都可以挂载")]),t._v(" "),a("p",[a("strong",[t._v("转储频率")]),t._v("：\n0：不做备份\n1：每天转储\n2：每隔一天转储")]),t._v(" "),a("p",[a("strong",[t._v("自检次序")]),t._v("：\n0：不自检\n1：首先自检；一般只有rootfs才用1；")])],1)},[],!1,null,null,null);s.options.__file="Mount.md";v.default=s.exports}}]);