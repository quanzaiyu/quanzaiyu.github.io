(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{419:function(s,t,a){"use strict";a.r(t);var n={props:["slot-key"]},r=a(0),e=Object(r.a)(n,function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.slotKey}},[a("h1",{attrs:{id:"canvas-坐标变换2-矩阵变换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#canvas-坐标变换2-矩阵变换","aria-hidden":"true"}},[s._v("#")]),s._v(" Canvas 坐标变换2: 矩阵变换")]),s._v(" "),a("p",[s._v("在了解矩阵变换之前，需要知道什么是矩阵。在大学线性代数中我们可以得到答案，详细请参考 "),a("router-link",{attrs:{to:s.$ensureExt("./Matrix")}},[s._v("矩阵基础知识")])],1),s._v(" "),a("p",[a("code",[s._v("scale()")]),s._v("、"),a("code",[s._v("rotate()")]),s._v(" 和 "),a("code",[s._v("translate()")]),s._v(" 这三个方法提供了一种简便的手段，用于操作绘图环境对象的"),a("code",[s._v("变换矩阵")]),s._v("（Transformation Matrix）。默认情况下，这个变换矩阵就是"),a("code",[s._v("单位矩阵")]),s._v("（Identity Matrix），它并不会影响所要绘制的物体。当调用了scale()、rotate()或translate()方法之后，变换矩阵就会被修改，从而也会影响到所有后续的绘图操作。")]),s._v(" "),a("h2",{attrs:{id:"transform-和-settransform"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#transform-和-settransform","aria-hidden":"true"}},[s._v("#")]),s._v(" transform 和 setTransform")]),s._v(" "),a("p",[s._v("在Canvas中，可以使用"),a("code",[s._v("transforms")]),s._v("或"),a("code",[s._v("setTransform")]),s._v("对Canvas坐标系进行矩阵变换。")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("transform：在当前的变换矩阵之上叠加运用另外的变换效果")])]),s._v(" "),a("li",[a("p",[s._v("setTransform：将当前的变换矩阵设置为默认的单位矩阵，然后在单位矩阵之上运用用户指定的变换效果")])])]),s._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("多次调用transform()方法所造成的变换效果是累积的，而每次只要调用setTransform()方法，它就会将上一次的变换矩阵彻底清除。")])]),s._v(" "),a("p",[s._v("使用transform()和setTransform()有两个好处：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("可以实现scale()、rotate()和translate()方法所达到的效果，比如错切效果")])]),s._v(" "),a("li",[a("p",[s._v("只需调用一次transform()或setTransform()方法，就可以做出结合了缩放、旋转、平移及错切等诸多操作的效果")])])]),s._v(" "),a("p",[s._v("使用transform()和setTransform()方法的主要缺点：")]),s._v(" "),a("ul",[a("li",[s._v("这两个方法不像scale()、rotate()和translate()方法那样直观。")])]),s._v(" "),a("h2",{attrs:{id:"transforms"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#transforms","aria-hidden":"true"}},[s._v("#")]),s._v(" transforms")]),s._v(" "),a("p",[s._v("transforms 直接对变形矩阵作修改。")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token function"}},[s._v("transform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("m11"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" m12"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" m21"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" m22"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dx"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dy"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这个方法必须将当前的变形矩阵乘上下面的矩阵：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("m11 m21 dx\nm12 m22 dy\n0   0   1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("这个方法必须重置当前的变形矩阵为单位矩阵，然后以相同的参数调用 transform 方法。如果任意一个参数是无限大，那么变形矩阵也必须被标记为无限大，否则会抛出异常。")]),s._v(" "),a("p",[a("code",[s._v("a (m11)")]),s._v(" Horizontal scaling.")]),s._v(" "),a("p",[a("code",[s._v("b (m12)")]),s._v(" Horizontal skewing.")]),s._v(" "),a("p",[a("code",[s._v("c (m21)")]),s._v(" Vertical skewing.")]),s._v(" "),a("p",[a("code",[s._v("d (m22)")]),s._v(" Vertical scaling.")]),s._v(" "),a("p",[a("code",[s._v("e (dx)")]),s._v(" Horizontal moving.")]),s._v(" "),a("p",[a("code",[s._v("f (dy)")]),s._v(" Vertical moving.")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("fillRect")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("100")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("100")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"理解-canvas-中的-transform、settransform"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#理解-canvas-中的-transform、settransform","aria-hidden":"true"}},[s._v("#")]),s._v(" 理解 Canvas 中的 transform、setTransform")]),s._v(" "),a("ul",[a("li",[s._v("transform() 是 Canvas 2D API 使用矩阵多次叠加当前变换的方法，矩阵由方法的参数进行描述。可以实现缩放、旋转、移动和倾斜等效果。")]),s._v(" "),a("li",[s._v("setTransform() 是 Canvas 2D API 使用单位矩阵重新设置（覆盖）当前的变换并调用变换的方法，此变换由方法的变量进行描述。")])]),s._v(" "),a("p",[s._v("这两个方法都接受六个参数：")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" d"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" f"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("setTransform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" b"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" c"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" d"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" e"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" f"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("其中这六个参数可以使用一个变换矩阵来描述：")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/018.png/small"}}),s._v(" "),a("p",[s._v("其具体代表的是：")]),s._v(" "),a("ul",[a("li",[s._v("a: 表示水平缩放scaleX")]),s._v(" "),a("li",[s._v("b: 表示水平倾斜skewX")]),s._v(" "),a("li",[s._v("c: 表示垂直倾斜skewY")]),s._v(" "),a("li",[s._v("d: 表示垂直缩放scaleY")]),s._v(" "),a("li",[s._v("e: 表示水平移动translateX")]),s._v(" "),a("li",[s._v("f: 表示垂直移动translateY")])]),s._v(" "),a("h2",{attrs:{id:"使用transform实现平移、缩放、旋转"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用transform实现平移、缩放、旋转","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用transform实现平移、缩放、旋转")]),s._v(" "),a("h3",{attrs:{id:"平移"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#平移","aria-hidden":"true"}},[s._v("#")]),s._v(" 平移")]),s._v(" "),a("p",[s._v("了解矩阵运算的原理之后，就可以很容易的实现坐标的平移。")]),s._v(" "),a("p",[s._v("比如要从一个点 (x0, y0) 移动到 (x, y) ， 可以算出位移量:")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/019.png/small"}}),s._v(" "),a("p",[s._v("在坐标轴上表示为:")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/020.png/small"}}),s._v(" "),a("p",[s._v("反之，知道位移量可以算出目标点坐标:")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/021.png/small"}}),s._v(" "),a("p",[s._v("按照矩阵的运算，可以知道:")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/022.png/small"}}),s._v(" "),a("p",[s._v("所以，可以写为:")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dx"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dy"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这跟使用 "),a("code",[s._v("translate")]),s._v(" 是等效的")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("translate")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dx"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dy"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("setTransform()")]),s._v(" 的使用原理也一样。")]),s._v(" "),a("h3",{attrs:{id:"缩放"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缩放","aria-hidden":"true"}},[s._v("#")]),s._v(" 缩放")]),s._v(" "),a("p",[s._v("比如要将一个点 (x, y) 放大 (k1, k2) 倍，变为 (x', y') ， 使用公式可知:")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/023.png/small"}}),s._v(" "),a("p",[s._v("使用矩阵表示为:")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/024.png/small"}}),s._v(" "),a("p",[s._v("所以，可以写为:")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("k1"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" k2"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这跟使用 "),a("code",[s._v("scale")]),s._v(" 是等效的")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("scale")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("k1"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" k2"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("setTransform()")]),s._v(" 的使用原理也一样。")]),s._v(" "),a("h3",{attrs:{id:"旋转"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#旋转","aria-hidden":"true"}},[s._v("#")]),s._v(" 旋转")]),s._v(" "),a("p",[s._v("假定有一个点P(x0,y0)相对坐标原点顺时针旋转θ到达点P(x,y)，同时假定P点离坐标原点的距离为r，如下图所示：")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/025.png/small"}}),s._v(" "),a("p",[s._v("先看看两角和差的公式:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sin(α + θ) = sin(α)*cos(θ) + cos(α)*sin(θ) \ncos(α + θ) = cos(α)*cos(θ) - sin(α)*sin(θ)\n\nsin(α - θ) = sin(α)*cos(θ) - cos(α)*sin(θ) \ncos(α - θ) = cos(α)*cos(θ) + sin(α)*sin(θ)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("根据两角和差的公式，可以推导出")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("x = r * cos(α + θ) = r*cos(α)*cos(θ) - r*sin(α)*sin(θ) \ny = r * sin(α + θ) = r*sin(α)*cos(θ) + r*cos(α)*sin(θ) \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("用矩阵表示为")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/026.png/small"}}),s._v(" "),a("p",[s._v("如果是旋转90度，由于 cos(90)=0,sin(90)=1，所以矩阵应该写成:")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/027.png/small"}}),s._v(" "),a("p",[s._v("即")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token operator"}},[s._v("-")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("就是旋转90度")]),s._v(" "),a("p",[s._v("如果就这样旋转是看不到任何图像的，因为旋转之后坐标点全部移到画布之外，因此通常加一个偏移实现")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token operator"}},[s._v("-")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dx"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" dy"),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"斜切"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#斜切","aria-hidden":"true"}},[s._v("#")]),s._v(" 斜切")]),s._v(" "),a("p",[s._v("先用一组图说明什么是斜切")]),s._v(" "),a("p",[s._v("各点的y坐标保持不变，但其x坐标则按比例发生了平移。这种情况将发生水平斜切：")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/028.png/small"}}),s._v(" "),a("p",[s._v("各点的x坐标保持不变，但其y坐标则按比例发生了平移。这种情况将发生垂直斜切：")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/029.png/small"}}),s._v(" "),a("p",[s._v("与旋转变换相比，旋转变换是旋转坐标系中的点，而斜切内里是转坐标轴，坐标轴旋转之后，要保持各点的坐标值不变，所有各点的位置就变了:")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/030.png/small"}}),s._v(" "),a("p",[s._v("变换后，点在新坐标系中的位置不变，在原坐标系中的位置是：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("f(x) = x * tan(α)\nf(y) = y * tan(α)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("imgLink",{attrs:{src:"date/20180913/031.png/small"}}),s._v(" "),a("p",[s._v("回到Canvas当中来，假定有一个点P0(x0,y0)经过斜切变换后得到P(x,y)，对于水平斜切，它们之关的关系是：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("x = x0 + k*y0\ny = y0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("用矩阵表示就是：")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/032.png/small"}}),s._v(" "),a("p",[s._v("同理，对于垂直斜切，有：")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/033.png/small"}}),s._v(" "),a("p",[s._v("同时进行水平、垂直斜切，那么矩阵就变成：")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/034.png/small"}}),s._v(" "),a("p",[s._v("用 "),a("code",[s._v("transform")]),s._v(" 表示为")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[s._v("// 水平斜切")]),s._v("\nctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" k"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("setTransform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" k"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),a("span",{attrs:{class:"token comment"}},[s._v("// 垂直斜切 ")]),s._v("\nctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" k"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("setTransform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" k"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),a("span",{attrs:{class:"token comment"}},[s._v("// 水平和垂直方向斜切 ")]),s._v("\nctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("transform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" k1"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" k2"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \nctx"),a("span",{attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{attrs:{class:"token function"}},[s._v("setTransform")]),a("span",{attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" k1"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" k2"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("0")]),a("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("可以看出，其实旋转只是斜切的一种特殊形式。")]),s._v(" "),a("h3",{attrs:{id:"对称变换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对称变换","aria-hidden":"true"}},[s._v("#")]),s._v(" 对称变换")]),s._v(" "),a("p",[s._v("比如，某点P0(x0,y0)结过对称变换后得到P(x,y)。如果对称轴是 "),a("code",[s._v("x")]),s._v(" 轴，那么：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("x = x0\ny = -y0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("用矩阵表示为：")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/035.png/small"}}),s._v(" "),a("p",[s._v("如果对称轴是 "),a("code",[s._v("y")]),s._v(" 轴,那么：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("x = -x0\ny = y0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("用矩阵表示为：")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/036.png/small"}}),s._v(" "),a("p",[s._v("如果对称轴是 "),a("code",[s._v("y = x")])]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/037.png/small"}}),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/038.png/small"}}),s._v(" "),a("p",[s._v("解得:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("x = x0\ny = y0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("用矩阵表示为:")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/039.png/small"}}),s._v(" "),a("p",[s._v("同理，如果关于 "),a("code",[s._v("y = -x")]),s._v(" 对称，则")]),s._v(" "),a("imgLink",{attrs:{src:"date/20180913/040.png/small"}}),s._v(" "),a("p",[s._v("如果是关于 "),a("code",[s._v("y = kx")]),s._v(" 或者 "),a("code",[s._v("y = kx + b")]),s._v(" 对称请参考 "),a("a",{attrs:{href:"https://www.w3cplus.com/canvas/custom-of-coordinate-transformation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Canvas学习：自定义的坐标变换"),a("OutboundLink")],1),s._v("，自行演算，本文不多做讨论。")])],1)},[],!1,null,null,null);e.options.__file="Transform2.md";t.default=e.exports}}]);