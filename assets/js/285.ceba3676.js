(window.webpackJsonp=window.webpackJsonp||[]).push([[285],{687:function(t,n,s){"use strict";s.r(n);var a={props:["slot-key"],mounted(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},e=s(0),o=Object(e.a)(a,function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.slotKey}},[s("h1",{attrs:{id:"nginx-虚拟站点配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-虚拟站点配置","aria-hidden":"true"}},[t._v("#")]),t._v(" Nginx 虚拟站点配置")]),t._v(" "),s("h2",{attrs:{id:"基于域名的虚拟主机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于域名的虚拟主机","aria-hidden":"true"}},[t._v("#")]),t._v(" 基于域名的虚拟主机")]),t._v(" "),s("p",[t._v("假设我们在本地有2个项目，分别在 "),s("code",[t._v("/etc/hosts")]),t._v(" 里映射到本地的 127.0.0.1 上：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("127.0.0.1 test1.xiaoyulive.top\n127.0.0.1 test2.xiaoyulive.top\n")])])]),s("p",[t._v("这2个项目分别对应于以下的2个文件夹，我们用域名对应文件夹名字，这样子好记：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("/usr/nginx/test1.xiaoyulive.top\n/usr/nginx/test2.xiaoyulive.top\n")])])]),s("p",[t._v("每个目录下都有一个index.php文件，简单的输入:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("# /usr/nginx/test1.xiaoyulive.top")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("?php\n"),s("span",{attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{attrs:{class:"token comment"}},[t._v("# /usr/nginx/test2.xiaoyulive.top")]),t._v("\n"),s("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("?php\n"),s("span",{attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'world'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("下面我们就来搭建这2个域名的虚拟主机，很显然，我们要新建2个conf文件来完成。")]),t._v(" "),s("p",[t._v("为了看起来简洁好看，我们使用 include 在 "),s("code",[t._v("nginx.conf")]),t._v(" 中包含外面的2个conf文件，这样就清晰了很多。不会使得这个 "),s("code",[t._v("nginx.conf")]),t._v(" 内容太多：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("main\nevents "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nhttp "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n  include /etc/nginx/test1.xiaoyulive.top"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  include /etc/nginx/test2.xiaoyulive.top"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("# 或者用 *.conf  包含某个文件夹下的所有 conf 文件")]),t._v("\n  "),s("span",{attrs:{class:"token comment"}},[t._v("# include /etc/nginx/vhost/*.conf")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("然后撰写两个conf文件：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("# /etc/nginx/test1.xiaoyulive.top")]),t._v("\nserver "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen 80"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name test1.xiaoyulive.top"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    root /usr/nginx/test1.xiaoyulive.top"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    index index.php index.html index.htm"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    access_log /usr/local/var/log/nginx/test1.xiaoyulive.top.log main"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    error_log /usr/local/var/log/nginx/test1.xiaoyulive.top.log error"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    location ~ \\.php$ "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        fastcgi_pass   127.0.0.1:9000"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n        fastcgi_index  index.php"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        include        fastcgi.conf"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token comment"}},[t._v("# /etc/nginx/test2.xiaoyulive.top")]),t._v("\nserver "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen 80"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name test2.xiaoyulive.top"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    root /usr/nginx/test2.xiaoyulive.top"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    index index.php index.html index.htm"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    access_log /usr/local/var/log/nginx/test2.xiaoyulive.top.log main"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    error_log /usr/local/var/log/nginx/test2.xiaoyulive.top.log error"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    location ~ \\.php$ "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        fastcgi_pass   127.0.0.1:9000"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n        fastcgi_index  index.php"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        include        fastcgi.conf"),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("这样2个很精简的虚拟域名就搭建好了。重启下nginx，然后打开浏览器访问一下这2个域名，就能看到对应的域名内容了。")]),t._v(" "),s("h2",{attrs:{id:"基于端口的虚拟主机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于端口的虚拟主机","aria-hidden":"true"}},[t._v("#")]),t._v(" 基于端口的虚拟主机")])])},[],!1,null,null,null);o.options.__file="Virtual_Host.md";n.default=o.exports}}]);