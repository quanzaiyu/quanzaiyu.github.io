(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{857:function(t,s,n){"use strict";n.r(s);var a=n(1),v=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"配置文件"}},[t._v("配置文件")]),t._v(" "),n("p",[n("strong",[t._v("配置文件路径")])]),t._v(" "),n("p",[t._v("在 ThinkPHP5.0 中，配置文件位于 "),n("code",[t._v("application/config.php")]),t._v(" 中。\n在 ThinkPHP5.1 中，配置文件位于 "),n("code",[t._v("config")]),t._v(" 目录下。")]),t._v(" "),n("p",[n("strong",[t._v("配置格式")])]),t._v(" "),n("p",[t._v("除了 .php 的配置文件外，ThinkPHP 还支持以下配置格式:")]),t._v(" "),n("p",[t._v(".xml、.json、.yaml、.ini")]),t._v(" "),n("p",[n("strong",[t._v("配置文件")])]),t._v(" "),n("p",[t._v("在 ThinkPHP5.1 中，配置文件作用如下 :")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("配置文件名")]),t._v(" "),n("th",[t._v("描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("app.php")]),t._v(" "),n("td",[t._v("应用配置")])]),t._v(" "),n("tr",[n("td",[t._v("cache.php")]),t._v(" "),n("td",[t._v("缓存配置")])]),t._v(" "),n("tr",[n("td",[t._v("cookie.php")]),t._v(" "),n("td",[t._v("Cookie配置")])]),t._v(" "),n("tr",[n("td",[t._v("database.php")]),t._v(" "),n("td",[t._v("数据库配置")])]),t._v(" "),n("tr",[n("td",[t._v("log.php")]),t._v(" "),n("td",[t._v("日志配置")])]),t._v(" "),n("tr",[n("td",[t._v("session.php")]),t._v(" "),n("td",[t._v("Session配置")])]),t._v(" "),n("tr",[n("td",[t._v("template.php")]),t._v(" "),n("td",[t._v("模板引擎配置")])]),t._v(" "),n("tr",[n("td",[t._v("trace.php")]),t._v(" "),n("td",[t._v("页面Trace配置")])]),t._v(" "),n("tr",[n("td",[t._v("paginate.php")]),t._v(" "),n("td",[t._v("分页配置")])])])]),t._v(" "),n("h2",{attrs:{id:"扩展配置"}},[t._v("扩展配置")]),t._v(" "),n("p",[t._v("扩展配置位于 "),n("code",[t._v("application/extra")]),t._v(" 目录中，系统会默认加载里面的配置文件。")]),t._v(" "),n("p",[t._v("比如创建一个文件 "),n("code",[t._v("application/extra/myconfig.php")])]),t._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'site_name'")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'小昱个人网站'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'site_author'")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'qzy'")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("在控制器的方法中获取，将文件名作为一级键值，跟上此文件下的配置名:")]),t._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("config")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'myconfig.site_name'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h2",{attrs:{id:"配置文件的优先级"}},[t._v("配置文件的优先级")]),t._v(" "),n("p",[t._v("ThinkPHP 默认会自动加载配置文件，但配置文件有加载优先级。")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("惯例配置 < 应用配置 < 扩展配置 < 场景配置 < 模块配置 < 动态配置\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[n("strong",[t._v("惯例配置")])]),t._v(" "),n("p",[t._v("位于 "),n("code",[t._v("thinkphp/convention.php")])]),t._v(" "),n("p",[n("strong",[t._v("应用配置")])]),t._v(" "),n("p",[t._v("位于 "),n("code",[t._v("application/config.php")])]),t._v(" "),n("p",[n("strong",[t._v("扩展配置")])]),t._v(" "),n("p",[t._v("位于 "),n("code",[t._v("application/extra")]),t._v(" 目录下")]),t._v(" "),n("p",[n("strong",[t._v("场景配置")])]),t._v(" "),n("p",[t._v("首先在 "),n("code",[t._v("application/config.php")]),t._v(" 中的 "),n("code",[t._v("app_status")]),t._v(" 选项中指定场景，比如 :")]),t._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[t._v("app_status "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),n("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'dev'")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("则只需在 "),n("code",[t._v("application")]),t._v(" 目录下新建一个同名的场景配置文件，即 "),n("code",[t._v("dev.php")]),t._v(" 即可。")]),t._v(" "),n("p",[n("strong",[t._v("模块配置")])]),t._v(" "),n("p",[t._v("比如在 "),n("code",[t._v("application/index")]),t._v(" 模块下，新增一个 "),n("code",[t._v("config.php")]),t._v(" 的配置文件，完整路径为 "),n("code",[t._v("application/index/config.php")]),t._v("。")]),t._v(" "),n("p",[n("strong",[t._v("动态配置")])]),t._v(" "),n("p",[t._v("可以在控制器或模型中，通过 "),n("code",[t._v("\\think\\Config::set()")]),t._v(" 进行配置。")]),t._v(" "),n("h2",{attrs:{id:"配置作用域"}},[t._v("配置作用域")]),t._v(" "),n("p",[t._v("相当于给配置加一个命名空间，用于配置的隔离。")]),t._v(" "),n("p",[t._v("加载配置")]),t._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[t._v("Config"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token function"}},[t._v("load")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'配置文件的绝对路径'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'配置项名称'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'作用域的名称'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("如")]),t._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[t._v("Config"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token function"}},[t._v("load")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token constant"}},[t._v("APP_PATH")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'my_config.php'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'test'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'user'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("其中 "),n("code",[t._v("APP_PATH")]),t._v(" 定位会到 "),n("code",[t._v("application")]),t._v(" 目录下。")]),t._v(" "),n("p",[t._v("再使用")]),t._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[t._v("Config"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{attrs:{class:"token function"}},[t._v("get")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("''")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'作用域名称'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("加载此作用域下的所有配置。此时，所有的配置将加载到指定的配置项名称下，这里是 test。")]),t._v(" "),n("h2",{attrs:{id:"优化配置文件"}},[t._v("优化配置文件")]),t._v(" "),n("p",[t._v("在 ThinkPHP5.0 中，配置文件没被拆分，可以通过在入口文件中使用 CONF_PATH 中指定配置文件存放的目录。")]),t._v(" "),n("p",[t._v("在 "),n("code",[t._v("public/index.php")]),t._v(" 中定义 :")]),t._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("define")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'CONF_PATH'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("__DIR__")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token single-quoted-string string"}},[t._v("'/../config'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("此时，我们需要在项目根目录下建立 "),n("code",[t._v("config")]),t._v(" 文件夹，来管理配置文件。")]),t._v(" "),n("blockquote",[n("p",[t._v("默认情况下，配置文件目录与应用程序目录相同，即 "),n("code",[t._v("application")]),t._v(" 下。")])]),t._v(" "),n("p",[t._v("在 ThinkPHP5.1 中，不需要任何更改，"),n("code",[t._v("config")]),t._v(" 目录已经分离。")])])}],!1,null,null,null);s.default=v.exports}}]);