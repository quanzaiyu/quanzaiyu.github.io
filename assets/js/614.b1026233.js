(window.webpackJsonp=window.webpackJsonp||[]).push([[614],{305:function(s,a,t){"use strict";t.r(a);var e={props:["slot-key"]},n=t(0),r=Object(n.a)(e,function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.slotKey}},[t("h1",{attrs:{id:"七牛云命令行工具-qshell"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#七牛云命令行工具-qshell","aria-hidden":"true"}},[s._v("#")]),s._v(" 七牛云命令行工具 qshell")]),s._v(" "),t("p",[s._v("七牛云官方介绍页："),t("a",{attrs:{href:"https://developer.qiniu.com/kodo/tools/1302/qshell",target:"_blank",rel:"noopener noreferrer"}},[s._v("qshell"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("下载后，配置环境变量，本人使用 MacOS，将 "),t("code",[s._v("qshell_darwin_x64")]),s._v(" 文件拷贝到 "),t("code",[s._v("~/tools")]),s._v(" 下，命名为 "),t("code",[s._v("qshell")]),s._v("，完整路径为 "),t("code",[s._v("~/tools/qshell")]),s._v("。")]),s._v(" "),t("p",[s._v("编辑 "),t("code",[s._v("~/.bash_profile")]),s._v("，加入：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("PATH"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token variable"}},[s._v("$PATH")]),s._v(":~/tools\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用命令 "),t("code",[s._v("source ~/.bash_profile")]),s._v(" 使配置生效。")]),s._v(" "),t("p",[s._v("在终端输入 "),t("code",[s._v("qshell -h")]),s._v(" 可以看到已经配置成功。")]),s._v(" "),t("h2",{attrs:{id:"注册"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注册","aria-hidden":"true"}},[s._v("#")]),s._v(" 注册")]),s._v(" "),t("p",[s._v("通过以下命令，配置 accessKey 和 secretKey")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("qshell account ak sk\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("ak 和 sk 可以在 "),t("code",[s._v("个人中心 -> 密钥管理")]),s._v(" 中看到。")]),s._v(" "),t("imgLink",{attrs:{src:"new/WX20180821-154801.png/small"}}),s._v(" "),t("h2",{attrs:{id:"上传"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上传","aria-hidden":"true"}},[s._v("#")]),s._v(" 上传")]),s._v(" "),t("p",[s._v("通过 "),t("code",[s._v("qupload")]),s._v(" 命令可以进行本地目录的上传操作，具体操作如下：")]),s._v(" "),t("p",[s._v("第一步，新建一个json，比如名叫 "),t("code",[s._v("~/qupload.json")]),s._v("，用于配置上传的一些参数：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"src_dir"')]),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"~/Desktop/qshell-bucket"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"bucket"')]),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"xiaoyu"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"access_key"')]),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"xxx"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"secret_key"')]),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"xxx"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"up_host"')]),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"http://upload-z2.qiniup.com"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"key_prefix"')]),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('""')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"rescan_local"')]),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("true")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"check_exists"')]),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("true")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"check_size"')]),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("true")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"overwrite"')]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token boolean"}},[s._v("true")]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"skip_fixed_strings"')]),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('".svn,.git"')]),t("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{attrs:{class:"token property"}},[s._v('"skip_suffixes"')]),t("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('".DS_Store,.exe"')]),s._v("\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("一些常见配置项如下：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("src_dir")]),s._v(" 本地同步路径，为全路径格式，工具将同步该目录下面所有的文件；在Windows系统下面使用的时候，注意src_dir的设置遵循D:\\Quanzaiyu\\backup这种方式。也就是路径里面的\\要有两个（\\）")]),s._v(" "),t("li",[t("code",[s._v("bucket")]),s._v(" 同步数据的目标空间名称，可以为公开空间或私有空间")]),s._v(" "),t("li",[t("code",[s._v("up_host")]),s._v(" 上传域名，可选设置，可参见"),t("a",{attrs:{href:"https://developer.qiniu.com/kodo/manual/1671/region-endpoint",target:"_blank",rel:"noopener noreferrer"}},[s._v("存储区域"),t("OutboundLink")],1),s._v("进行配置")]),s._v(" "),t("li",[t("code",[s._v("rescan_local")]),s._v(" 默认情况下，本地新增的文件不会被同步，需要手动设置为true才会去检测新增文件")]),s._v(" "),t("li",[t("code",[s._v("check_size")]),s._v(" 在check_exists设置为true的情况下，如果check_hash为false，那么你可以设置check_size为true做简单的大小检查，以查看本地文件和空间文件大小是否一致，默认不检查")]),s._v(" "),t("li",[t("code",[s._v("check_exists")]),s._v(" 每个文件上传之前是否检查空间中是否存在同名文件，默认为false，不检查")]),s._v(" "),t("li",[t("code",[s._v("check_hash")]),s._v(" 在check_exists设置为true的情况下生效，是否检查本地文件hash和空间文件hash一致，默认不检查，节约同步时间")]),s._v(" "),t("li",[t("code",[s._v("overwrite")]),s._v(" 是否覆盖空间中已有的同名文件，默认不覆盖")]),s._v(" "),t("li",[t("code",[s._v("key_prefix")]),s._v(" 在保存文件在七牛空间时，使用的文件名的前缀，默认为空字符串")]),s._v(" "),t("li",[t("code",[s._v("ignore_dir")]),s._v(" 保存文件在七牛空间时，使用的文件名是否忽略本地路径，默认为false")]),s._v(" "),t("li",[t("code",[s._v("file_type")]),s._v(" 文件存储类型，默认为0(标准存储） 1为低频存储")]),s._v(" "),t("li",[t("code",[s._v("delete_on_success")]),s._v(" 上传成功的文件，同时删除本地文件，以达到节约磁盘的目的，默认为false")]),s._v(" "),t("li",[t("code",[s._v("skip_file_prefixes")]),s._v(" 跳过所有文件名（不带相对路径）以该前缀列表里面字符串为前缀的文件")]),s._v(" "),t("li",[t("code",[s._v("skip_path_prefixes")]),s._v(" 跳过所有文件路径（相对路径）以该前缀列表里面字符串为前缀的文件")]),s._v(" "),t("li",[t("code",[s._v("skip_fixed_strings")]),s._v(" 跳过所有文件路径（相对路径）中包含该字符串列表中字符串的文件")]),s._v(" "),t("li",[t("code",[s._v("skip_suffixes")]),s._v(" 跳过所有以该后缀列表里面字符串为后缀的文件或者目录")])]),s._v(" "),t("p",[s._v("第二步，使用命令进行同步")]),s._v(" "),t("p",[s._v("创建好配置文件之后，就可以使用以下命令对目录下的文件进行同步了：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("qshell qupload 100 ~/qupload.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("格式如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("qshell qupload "),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("ThreadCount"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("LocalUploadConfig"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("其中，第一个参数 ThreadCount 代表同时上传的最大协程数量，第二参数 LocalUploadConfig 为配置文件路径。")]),s._v(" "),t("p",[s._v("上传成功后，控制台输出：")]),s._v(" "),t("div",{staticClass:"language-plain line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("See upload log at path /Users/DYT/.qshell/qupload/f7d9e1d6937cd86389b82d6cd617686a/f7d9e1d6937cd86389b82d6cd617686a.log\n✨  Done in 0.39s.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("可以看到，上传成功，并输出日志文件。")]),s._v(" "),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://developer.qiniu.com/kodo/kb/3858/video-of-how-to-use-qrs-tools",target:"_blank",rel:"noopener noreferrer"}},[s._v("视频教程--命令行工具使用"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/qiniu/qshell/blob/master/docs/qupload.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("qupload 介绍 - GitHub"),t("OutboundLink")],1)])],1)},[],!1,null,null,null);r.options.__file="Qshell.md";a.default=r.exports}}]);