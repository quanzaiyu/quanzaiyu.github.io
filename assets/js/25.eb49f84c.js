(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{354:function(e,s,t){"use strict";t.r(s);var n=t(1),r=Object(n.a)({},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),t("p",[e._v("比如：")]),e._v(" "),e._m(4),e._m(5),e._v(" "),e._m(6),t("p",[e._v("通常，一个仓库会包含同一个软件不同版本的镜像，而标签就常用于对应该软件的各个版本。我们可以通过 <仓库名/镜像名>:<标签> 的格式来指定具体是这个软件哪个版本的镜像。如果不给出标签，将以 latest 作为默认标签。")]),e._v(" "),t("p",[e._v("tag可以不指定，默认使用 latest，代表最新版")]),e._v(" "),t("p",[e._v("比如：")]),e._v(" "),e._m(7),e._m(8),e._v(" "),e._m(9),t("p",[e._v("列表包含了 仓库名、标签、镜像 ID、创建时间 以及 所占用的空间。")]),e._v(" "),e._m(10),t("p",[e._v("列出部分镜像：比如只需要列出 ubuntu 相关的镜像，使用以下命令即可：")]),e._v(" "),e._m(11),e._m(12),e._v(" "),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),t("p",[e._v("一般来说，虚悬镜像已经失去了存在的价值，是可以随意删除的，可以用下面的命令删除。")]),e._v(" "),e._m(16),e._m(17),e._v(" "),t("p",[e._v("为了加速镜像构建、重复利用资源，Docker 会利用 中间层镜像。所以在使用一段时间后，可能会看到一些依赖的中间层镜像。默认的 docker image ls 列表中只会显示顶层镜像，如果希望显示包括中间层镜像在内的所有镜像的话，需要加 -a 参数。")]),e._v(" "),e._m(18),t("p",[e._v("这样会看到很多无标签的镜像，与之前的虚悬镜像不同，这些无标签的镜像很多都是中间层镜像，是其它镜像所依赖的镜像。这些无标签镜像不应该删除，否则会导致上层镜像因为依赖丢失而出错。实际上，这些镜像也没必要删除，因为之前说过，相同的层只会存一遍，而这些镜像是别的镜像的依赖，因此并不会因为它们被列出来而多存了一份，无论如何你也会需要它们。只要删除那些依赖它们的镜像后，这些依赖的中间层镜像也会被连带删除。")]),e._v(" "),e._m(19),e._v(" "),e._m(20),t("p",[e._v("与ls命令配合批量删除镜像：")]),e._v(" "),e._m(21),e._m(22),e._v(" "),t("p",[e._v("可以通过以下命令来便捷的查看镜像、容器、数据卷所占用的空间:")]),e._v(" "),e._m(23),e._m(24),e._v(" "),e._m(25),e._v(" "),t("p",[e._v("查看Docker是否运行：")]),e._v(" "),e._m(26),e._m(27),e._v(" "),e._m(28),e._v(" "),t("p",[e._v("创建容器使用 docker run 命令，如果直接执行此命令可以执行镜像里面的命令，但是每次运行都会重新创建一个容器，通常我们会使用以下两种方式创建容器：")]),e._v(" "),e._m(29),e._v(" "),t("p",[e._v("交互式容器会创建交互会话跟用户进行交互，在运行结束后会退出容器。")]),e._v(" "),e._m(30),t("p",[e._v("比如：")]),e._v(" "),e._m(31),e._m(32),e._v(" "),e._m(33),e._v(" "),e._m(34),e._v(" "),t("p",[e._v("守护式容器能够长期运行，没有交互式会话，适合运行应用程序和服务。")]),e._v(" "),t("p",[e._v("创建守护式容器的方式：")]),e._v(" "),e._m(35),e._v(" "),e._m(36),e._v(" "),t("p",[e._v("比如：")]),e._v(" "),e._m(37),e._m(38),e._v(" "),e._m(39),e._v(" "),e._m(40),e._v(" "),t("p",[e._v("可以将一个容器简单理解为一个虚拟机，要进入一个运行中的容器，也就是连接容器，需要使用以下命令：")]),e._v(" "),e._m(41),e._m(42),e._v(" "),t("p",[e._v("使用以下命令在容器外执行容器内部命令：")]),e._v(" "),e._m(43),t("p",[e._v("比如")]),e._v(" "),e._m(44),t("p",[e._v("其中 server1 就是我们使用 centos 镜像创建的容器。")]),e._v(" "),t("p",[e._v("又比如改变一个webserver的起始页面：")]),e._v(" "),e._m(45),e._m(46),e._v(" "),e._m(47),e._v(" "),e._m(48),e._v(" "),e._m(49),t("p",[e._v("比如：")]),e._v(" "),e._m(50),t("p",[e._v("其中 server1 容器是通过 centos 镜像创建的，本命令的作用是将 server1 中的 /etc/hosts 文件复制到宿主机当前路径。")]),e._v(" "),e._m(51),e._v(" "),e._m(52),t("p",[e._v("比如以下命令：")]),e._v(" "),e._m(53),t("imgLink",{attrs:{src:"date/20181012/002.png"}}),e._v(" "),e._m(54),e._v(" "),e._m(55),t("p",[e._v("可以看到文件的变更情况，其中：")]),e._v(" "),e._m(56),e._v(" "),e._m(57),e._v(" "),e._m(58),e._v(" "),e._m(59),e._m(60),e._v(" "),e._m(61),e._m(62),e._v(" "),e._m(63),e._m(64),e._v(" "),t("p",[e._v("使用 logs 命令可以查看容器运行日志")]),e._v(" "),e._m(65),e._m(66),e._v(" "),t("p",[e._v("直接使用，打印出当前时间点之前的日志，比如运行一个每隔一秒输出一段话的脚本：")]),e._v(" "),e._m(67),t("p",[e._v("以下日志会不断更新：")]),e._v(" "),e._m(68),e._m(69),e._v(" "),e._m(70),e._v(" "),e._m(71)],1)},[function(){var e=this.$createElement,s=this._self._c||e;return s("h1",{attrs:{id:"docker-基本命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-基本命令","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker 基本命令")])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"镜像操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#镜像操作","aria-hidden":"true"}},[this._v("#")]),this._v(" 镜像操作")])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",[s("li",[this._v("搜索镜像")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker search [关键词]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker search centos\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("下载镜像")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker pull [image:tag]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker pull centos\n\n# or\n\n$ docker pull centos:latest\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br"),s("span",{staticClass:"line-number"},[this._v("5")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("列出所有镜像")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker images\n\n# or\n\n$ docker image ls\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br"),s("span",{staticClass:"line-number"},[this._v("5")]),s("br")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ docker images\nREPOSITORY           TAG                 IMAGE ID            CREATED             SIZE\nredis                latest              5f515359c7f8        5 days ago          183 MB\nnginx                latest              05a60462f8ba        5 days ago          181 MB\nubuntu               16.04               f753707788c5        4 weeks ago         127 MB\nubuntu               latest              f753707788c5        4 weeks ago         127 MB\n<none>               <none>              00285df0df87        5 days ago          342 MB\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker image ls ubuntu\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[s("strong",[this._v("虚悬镜像")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("上面的镜像列表中，还可以看到一个特殊的镜像，这个镜像既没有仓库名，也没有标签，均为 "),s("code",[this._v("<none>")]),this._v("。")])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("这个镜像原本是有镜像名和标签的，原来为 mongo:3.2，随着官方镜像维护，发布了新版本后，重新 docker pull mongo:3.2 时，mongo:3.2 这个镜像名被转移到了新下载的镜像身上，而旧的镜像上的这个名称则被取消，从而成为了 "),s("code",[this._v("<none>")]),this._v("。除了 docker pull 可能导致这种情况，docker build 也同样可以导致这种现象。由于新旧镜像同名，旧镜像名称被取消，从而出现仓库名、标签均为 "),s("code",[this._v("<none>")]),this._v(" 的镜像。这类无标签镜像也被称为 虚悬镜像(dangling image) ，可以用下面的命令专门显示这类镜像：")])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker image ls -f dangling=true\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\n<none>              <none>              00285df0df87        5 days ago          342 MB\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker image prune\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[s("strong",[this._v("中间层镜像")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker image ls -a\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("删除镜像")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker rmi [image1] [image2]...\n\n# or\n\n$ $ docker image rm [option] [image1] [image2]...\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br"),s("span",{staticClass:"line-number"},[this._v("5")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker image rm $(docker image ls -q redis)\n$ docker image rm $(docker image ls -q -f before=mongo:3.2)\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"6"}},[s("li",[this._v("镜像体积")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ docker system df\n\nTYPE                TOTAL               ACTIVE              SIZE                RECLAIMABLE\nImages              24                  0                   1.992GB             1.992GB (100%)\nContainers          1                   0                   62.82MB             62.82MB (100%)\nLocal Volumes       9                   0                   652.2MB             652.2MB (100%)\nBuild Cache                                                 0B                  0B\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"5"}},[s("li",[this._v("其他")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("要查看某个命令的帮助文档，跟上 "),s("code",[this._v("--help")]),this._v(" 即可。比如 "),s("code",[this._v("docker search --help")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ ps -ef | grep docker\n# or\n$ ps aux | grep docker\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"容器操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#容器操作","aria-hidden":"true"}},[this._v("#")]),this._v(" 容器操作")])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",[s("li",[this._v("创建容器")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[s("strong",[this._v("交互式容器")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker run -it --name [容器名] [镜像名] [命令]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("[root@node1 ~]# docker run -i -t --name server1 centos /bin/bash\n[root@e7009c6ce357 /]#\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ul",[s("li",[this._v("-i：--interactive=true|false 可进入交互式操作")]),this._v(" "),s("li",[this._v("-t：--tty=true|false 指定使用哪个终端进行交互")]),this._v(" "),s("li",[this._v("--name：指定容器名称")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("使用 -it 参数创建容器后会进入容器进行交互式操作，使用 "),s("code",[this._v("exit")]),this._v(" 命令退出容器。")])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[s("strong",[this._v("守护式容器")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",[s("li",[s("p",[this._v("在运行交互式容器的时候，使用 "),s("code",[this._v("Ctrl + P + Q")])])]),this._v(" "),s("li",[s("p",[this._v("使用 "),s("code",[this._v("docker start [container]")])])]),this._v(" "),s("li",[s("p",[this._v("容器的启停")])])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ul",[t("li",[t("strong",[e._v("启动容器")]),e._v(" docker start [容器名]")]),e._v(" "),t("li",[t("strong",[e._v("重启容器")]),e._v(" docker restart [容器名]")]),e._v(" "),t("li",[t("strong",[e._v("停止容器")]),e._v(" docker stop [容器名]")]),e._v(" "),t("li",[t("strong",[e._v("杀死容器")]),e._v(" docker kill [容器名]")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker start server1\n$ docker restart server1\n$ docker stop server1\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("列出容器")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ul",[s("li",[s("strong",[this._v("列出所有容器")]),this._v("：docker ps -a")]),this._v(" "),s("li",[s("strong",[this._v("列出正在运行的容器")]),this._v("：docker ps")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("连接容器")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker attach [容器名 or 容器id]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"5"}},[s("li",[this._v("容器外执行容器内部命令")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker exec [容器名] [容器内部命令]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('$ docker exec server1 echo "Hello world"\n')])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker run --name webserver -d -p 80:80 nginx\n$ docker exec -it webserver bash\nroot@3729b97e8226:/# echo '<h1>Hello, Docker!</h1>' > /usr/share/nginx/html/index.html\nroot@3729b97e8226:/# exit\nexit\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br"),s("span",{staticClass:"line-number"},[this._v("5")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"6"}},[s("li",[this._v("删除容器")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ul",[s("li",[s("strong",[this._v("删除一个容器")]),this._v("：docker rm [容器名]")]),this._v(" "),s("li",[s("strong",[this._v("强制删除一个正在运行的容器")]),this._v("：docker rm -f [容器名]")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"7"}},[s("li",[this._v("复制容器内文件到本地")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker cp [container:path] [loaclPath]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker cp server1:/etc/hosts ./\n\n# 当然，也可从宿主机拷贝文件到容器\n\n$ docker cp ./hosts server1:/opt\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br"),s("span",{staticClass:"line-number"},[this._v("5")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"8"}},[s("li",[this._v("提交对容器的修改")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker commit [options] [container] [image:tag]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker commit --author 'master' --message 'add files' server1 centos:latest\n$ docker commit -a 'master' -m 'add files' server1 centos:1.2\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ol",{attrs:{start:"9"}},[s("li",[this._v("查看容器文件的变动")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker diff [container]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ul",[s("li",[this._v("A 添加的文件")]),this._v(" "),s("li",[this._v("C 修改的文件")]),this._v(" "),s("li",[this._v("D 删除的文件")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("h2",{attrs:{id:"docker-的其他操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-的其他操作","aria-hidden":"true"}},[this._v("#")]),this._v(" Docker 的其他操作")])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[s("strong",[this._v("查看历史镜像")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker history [image:tag]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[s("strong",[this._v("查看镜像或容器详细信息")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker inspect [image:tag or container]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[s("strong",[this._v("为镜像打标记")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker tag [image:tag] [仓库地址]/[image:tag]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[s("strong",[this._v("日志")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("$ docker logs -f -t --tail [container]\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("ul",[s("li",[this._v("-f: --follows=true|false 默认false，一直跟踪log的变化并返回结果")]),this._v(" "),s("li",[this._v("-t: --timestamps=true|false 在返回的日志中添加时间戳")]),this._v(" "),s("li",[this._v('--tail="all" 默认all，返回结尾处多少数量的日志')])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[root@node1 ~]# docker run --name server1 -d ubuntu /bin/sh -c "while true; do echo Hello world; sleep 1;done"\ne1306e60672a152de4a38d2541279124c98347a13c2e612c386694c442db0708\n[root@node1 ~]# docker logs server1\nHello world\nHello world\nHello world\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("[root@node1 ~]# docker logs server2 --tail 10 -tf\n2018-10-14T16:35:38.188534000Z Hello world\n2018-10-14T16:35:39.189464000Z Hello world\n2018-10-14T16:35:40.191417000Z Hello world\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[s("strong",[this._v("查看容器内进程")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("p",[this._v("使用 "),s("code",[this._v("docker top [container]")]),this._v(" 命令查看容器内进程：")])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("[root@node1 ~]# docker top server2\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\nroot                4932                4917                0                   00:28               ?                   00:00:00            /bin/sh -c while true; do echo Hello world; sleep 1;done\nroot                5708                4932                0                   00:38               ?                   00:00:00            sleep 1\n")])]),this._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[this._v("1")]),s("br"),s("span",{staticClass:"line-number"},[this._v("2")]),s("br"),s("span",{staticClass:"line-number"},[this._v("3")]),s("br"),s("span",{staticClass:"line-number"},[this._v("4")]),s("br")])])}],!1,null,null,null);r.options.__file="Command.md";s.default=r.exports}}]);