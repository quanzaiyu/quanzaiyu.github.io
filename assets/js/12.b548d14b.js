(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{396:function(n,t,e){"use strict";e.r(t);var c=e(1),r=Object(c.a)({},function(){var n=this.$createElement;return(this._self._c||n)("div",{staticClass:"content"},[this._v("<?php\n    function curl_get_contents($url, $timeout = 8)\n    {\n        $curlHandle = curl_init();\n        curl_setopt($curlHandle, CURLOPT_URL, $url);\n        curl_setopt($curlHandle, CURLOPT_RETURNTRANSFER, 1);\n        curl_setopt($curlHandle, CURLOPT_TIMEOUT, $timeout);\n        $result = curl_exec($curlHandle);\n        curl_close($curlHandle);\n        return $result;\n    }\n\nfunction getToken () {\n    $appid = 'wx740ab1951eafc1b6';\n    $appsecret = '39c6d550ee2ed5a7215382cbe2277e6d';\n    return curl_get_contents('https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid='.$appid.'&secret='.$appsecret);\n  }\n\nfunction getTicket ($token) {\n    return curl_get_contents('https://api.weixin.qq.com/cgi-bin/ticket/getticket?access_token='.$token.'&type=jsapi');\n  }\n\nfunction genNonceStr ($length = 16) {\n    $chars = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n    $str = \"\";\n    for ($i = 0; $i < $length; $i++) {\n      $str .= substr($chars, mt_rand(0, strlen($chars) - 1), 1);\n    }\n    return $str;\n  }\n\nfunction test ()\n  {\n    // 获取 access_token\n    $access_token = json_decode(getToken(), true)['access_token'];\n    // 获取 ticket\n    $ticket = json_decode(getTicket($access_token), true)['ticket'];\n    // 生成签名\n    $nonstr = genNonceStr();\n    $url = isset($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : '';\n    $time = time();\n    $query = [\n      'jsapi_ticket' => $ticket,\n      'noncestr' => $nonstr,\n      'timestamp' => $time,\n      'url' => $url\n    ];\n    $signStr = \"jsapi_ticket=$ticket&noncestr=$nonstr×tamp=$time&url=$url\";\n\n    $signature = sha1($signStr);\n    $appid = 'wx740ab1951eafc1b6';\n    return json_encode([\n      'code' => 1,\n      'data' => [\n\t'query' => $query,\n\t'signStr' => $signStr,\n        'appId' => $appid,\n        'timestamp' => $time,\n        'nonceStr' => $nonstr,\n        'signature' => $signature,\n        'url' => $url\n      ]\n    ]);\n  }\n\n\necho test();\n\n\n- [×被替换成x 的解决办法](https://www.cnblogs.com/wobeinianqing/p/7067547.html)\n- [微信JS-SDK说明文档](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421141115)\n- [获取access_token](https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421140183)\n\n")])},[],!1,null,null,null);r.options.__file="wx.md";t.default=r.exports}}]);