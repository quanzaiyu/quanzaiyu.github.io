(window.webpackJsonp=window.webpackJsonp||[]).push([[712],{894:function(s,t,a){"use strict";a.r(t);var e={props:["slot-key"],mounted(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},n=a(0),r=Object(n.a)(e,function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.slotKey}},[a("h1",{attrs:{id:"七牛云命令行工具-qshell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七牛云命令行工具-qshell","aria-hidden":"true"}},[s._v("#")]),s._v(" 七牛云命令行工具 qshell")]),s._v(" "),a("p",[s._v("七牛云官方介绍页："),a("a",{attrs:{href:"https://developer.qiniu.com/kodo/tools/1302/qshell",target:"_blank",rel:"noopener noreferrer"}},[s._v("qshell"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("p",[s._v("下载后，配置环境变量，本人使用 MacOS，将 "),a("code",[s._v("qshell_darwin_x64")]),s._v(" 文件拷贝到 "),a("code",[s._v("~/tools")]),s._v(" 下，命名为 "),a("code",[s._v("qshell")]),s._v("，完整路径为 "),a("code",[s._v("~/tools/qshell")]),s._v("。")]),s._v(" "),a("p",[s._v("编辑 "),a("code",[s._v("~/.bash_profile")]),s._v("，加入：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PATH"),a("span",{attrs:{class:"token operator"}},[s._v("=")]),a("span",{attrs:{class:"token variable"}},[s._v("$PATH")]),s._v(":~/tools\n")])])]),a("p",[s._v("使用命令 "),a("code",[s._v("source ~/.bash_profile")]),s._v(" 使配置生效。")]),s._v(" "),a("p",[s._v("在终端输入 "),a("code",[s._v("qshell -h")]),s._v(" 可以看到已经配置成功。")]),s._v(" "),a("h2",{attrs:{id:"注册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册","aria-hidden":"true"}},[s._v("#")]),s._v(" 注册")]),s._v(" "),a("p",[s._v("通过以下命令，配置 accessKey 和 secretKey")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("qshell account ak sk\n")])])]),a("p",[s._v("ak 和 sk 可以在 "),a("code",[s._v("个人中心 -> 密钥管理")]),s._v(" 中看到。")]),s._v(" "),a("imgLink",{attrs:{src:"new/WX20180821-154801.png/small"}}),s._v(" "),a("h2",{attrs:{id:"上传"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上传","aria-hidden":"true"}},[s._v("#")]),s._v(" 上传")]),s._v(" "),a("p",[s._v("通过 "),a("code",[s._v("qupload")]),s._v(" 命令可以进行本地目录的上传操作，具体操作如下：")]),s._v(" "),a("p",[s._v("第一步，新建一个json，比如名叫 "),a("code",[s._v("~/qupload.json")]),s._v("，用于配置上传的一些参数：")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"src_dir"')]),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"~/Desktop/qshell-bucket"')]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"bucket"')]),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"xiaoyu"')]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"access_key"')]),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"xxx"')]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"secret_key"')]),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"xxx"')]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"up_host"')]),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"http://upload-z2.qiniup.com"')]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"key_prefix"')]),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('""')]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"rescan_local"')]),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("true")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"check_exists"')]),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("true")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"check_size"')]),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("true")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"overwrite"')]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token boolean"}},[s._v("true")]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"skip_fixed_strings"')]),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('".svn,.git"')]),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{attrs:{class:"token property"}},[s._v('"skip_suffixes"')]),a("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('".DS_Store,.exe"')]),s._v("\n"),a("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("一些常见配置项如下：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("src_dir")]),s._v(" 本地同步路径，为全路径格式，工具将同步该目录下面所有的文件；在Windows系统下面使用的时候，注意src_dir的设置遵循D:\\Quanzaiyu\\backup这种方式。也就是路径里面的\\要有两个（\\）")]),s._v(" "),a("li",[a("code",[s._v("bucket")]),s._v(" 同步数据的目标空间名称，可以为公开空间或私有空间")]),s._v(" "),a("li",[a("code",[s._v("up_host")]),s._v(" 上传域名，可选设置，可参见"),a("a",{attrs:{href:"https://developer.qiniu.com/kodo/manual/1671/region-endpoint",target:"_blank",rel:"noopener noreferrer"}},[s._v("存储区域"),a("OutboundLink")],1),s._v("进行配置")]),s._v(" "),a("li",[a("code",[s._v("rescan_local")]),s._v(" 默认情况下，本地新增的文件不会被同步，需要手动设置为true才会去检测新增文件")]),s._v(" "),a("li",[a("code",[s._v("check_size")]),s._v(" 在check_exists设置为true的情况下，如果check_hash为false，那么你可以设置check_size为true做简单的大小检查，以查看本地文件和空间文件大小是否一致，默认不检查")]),s._v(" "),a("li",[a("code",[s._v("check_exists")]),s._v(" 每个文件上传之前是否检查空间中是否存在同名文件，默认为false，不检查")]),s._v(" "),a("li",[a("code",[s._v("check_hash")]),s._v(" 在check_exists设置为true的情况下生效，是否检查本地文件hash和空间文件hash一致，默认不检查，节约同步时间")]),s._v(" "),a("li",[a("code",[s._v("overwrite")]),s._v(" 是否覆盖空间中已有的同名文件，默认不覆盖")]),s._v(" "),a("li",[a("code",[s._v("key_prefix")]),s._v(" 在保存文件在七牛空间时，使用的文件名的前缀，默认为空字符串")]),s._v(" "),a("li",[a("code",[s._v("ignore_dir")]),s._v(" 保存文件在七牛空间时，使用的文件名是否忽略本地路径，默认为false")]),s._v(" "),a("li",[a("code",[s._v("file_type")]),s._v(" 文件存储类型，默认为0(标准存储） 1为低频存储")]),s._v(" "),a("li",[a("code",[s._v("delete_on_success")]),s._v(" 上传成功的文件，同时删除本地文件，以达到节约磁盘的目的，默认为false")]),s._v(" "),a("li",[a("code",[s._v("skip_file_prefixes")]),s._v(" 跳过所有文件名（不带相对路径）以该前缀列表里面字符串为前缀的文件")]),s._v(" "),a("li",[a("code",[s._v("skip_path_prefixes")]),s._v(" 跳过所有文件路径（相对路径）以该前缀列表里面字符串为前缀的文件")]),s._v(" "),a("li",[a("code",[s._v("skip_fixed_strings")]),s._v(" 跳过所有文件路径（相对路径）中包含该字符串列表中字符串的文件")]),s._v(" "),a("li",[a("code",[s._v("skip_suffixes")]),s._v(" 跳过所有以该后缀列表里面字符串为后缀的文件或者目录")])]),s._v(" "),a("p",[s._v("第二步，使用命令进行同步")]),s._v(" "),a("p",[s._v("创建好配置文件之后，就可以使用以下命令对目录下的文件进行同步了：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("qshell qupload 100 ~/qupload.json\n")])])]),a("p",[s._v("格式如下：")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("qshell qupload "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("ThreadCount"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{attrs:{class:"token operator"}},[s._v("<")]),s._v("LocalUploadConfig"),a("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v("其中，第一个参数 ThreadCount 代表同时上传的最大协程数量，第二参数 LocalUploadConfig 为配置文件路径。")]),s._v(" "),a("p",[s._v("上传成功后，控制台输出：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("See upload log at path /Users/DYT/.qshell/qupload/f7d9e1d6937cd86389b82d6cd617686a/f7d9e1d6937cd86389b82d6cd617686a.log\n✨  Done in 0.39s.\n")])])]),a("p",[s._v("可以看到，上传成功，并输出日志文件。")]),s._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://developer.qiniu.com/kodo/kb/3858/video-of-how-to-use-qrs-tools",target:"_blank",rel:"noopener noreferrer"}},[s._v("视频教程--命令行工具使用"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/qiniu/qshell/blob/master/docs/qupload.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("qupload 介绍 - GitHub"),a("OutboundLink")],1)])],1)},[],!1,null,null,null);r.options.__file="Qshell.md";t.default=r.exports}}]);