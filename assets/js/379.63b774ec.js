(window.webpackJsonp=window.webpackJsonp||[]).push([[379],{236:function(t,s,a){"use strict";a.r(s);var n={props:["slot-key"]},v=a(0),_=Object(v.a)(n,function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.slotKey}},[a("h1",{attrs:{id:"uni-app-音频"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uni-app-音频","aria-hidden":"true"}},[t._v("#")]),t._v(" uni-app 音频")]),t._v(" "),a("h2",{attrs:{id:"音频组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#音频组件","aria-hidden":"true"}},[t._v("#")]),t._v(" 音频组件")]),t._v(" "),a("p",[t._v("uni-app 内置音频组件 audio，使用方式如下：")]),t._v(" "),a("div",{staticClass:"language-pug line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-pug"}},[a("code",[a("span",{attrs:{class:"token markup"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lang")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pug"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[t._v(".content")]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[t._v("audio#audio"),a("span",{attrs:{class:"token attributes"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("controls\n    "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token string"}},[t._v("'/static/music.jpg'")])]),t._v("\n    "),a("span",{attrs:{class:"token attr-name"}},[t._v("poster")]),a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token string"}},[t._v("'致爱丽丝'")])]),t._v("\n    "),a("span",{attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token string"}},[t._v("'暂无'")])]),t._v("\n    "),a("span",{attrs:{class:"token attr-name"}},[t._v("author")]),a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token string"}},[t._v("'/static/music.mp3'")])]),t._v("\n    @"),a("span",{attrs:{class:"token attr-name"}},[t._v("play")]),a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token string"}},[t._v('"play"')])]),t._v("\n    @"),a("span",{attrs:{class:"token attr-name"}},[t._v("pause")]),a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token string"}},[t._v('"pause"')])]),t._v("\n    @"),a("span",{attrs:{class:"token attr-name"}},[t._v("ended")]),a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token string"}},[t._v('"ended"')])]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")])])]),t._v("\n"),a("span",{attrs:{class:"token markup"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("audio 组件的属性有：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("src")]),t._v("\t要播放音频的资源地址，本地路径或网络路径")]),t._v(" "),a("li",[a("strong",[t._v("loop")]),t._v("\t默认为false，是否循环播放")]),t._v(" "),a("li",[a("strong",[t._v("controls")]),t._v("\t默认为false，是否显示默认控件")]),t._v(" "),a("li",[a("strong",[t._v("poster")]),t._v("\t默认控件上的音频封面的图片资源地址，如果 controls 属性值为 false 则设置 poster 无效")]),t._v(" "),a("li",[a("strong",[t._v("name")]),t._v("\t未知音频\t默认控件上的音频名字，如果 controls 属性值为 false 则设置 name 无效")]),t._v(" "),a("li",[a("strong",[t._v("author")]),t._v("\t未知作者\t默认控件上的作者名字，如果 controls 属性值为 false 则设置 author 无效")])]),t._v(" "),a("p",[t._v("audio 组件的事件有：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("error")]),t._v("\t当发生错误时触发 error 事件，detail = {errMsg: MediaError.code}")]),t._v(" "),a("li",[a("strong",[t._v("play")]),t._v("\t当开始/继续播放时触发play事件")]),t._v(" "),a("li",[a("strong",[t._v("pause")]),t._v("\t当暂停播放时触发 pause 事件")]),t._v(" "),a("li",[a("strong",[t._v("timeupdate")]),t._v("\t当播放进度改变时触发 timeupdate 事件，detail = {currentTime, duration}")]),t._v(" "),a("li",[a("strong",[t._v("ended")]),t._v("\t当播放到末尾时触发 ended 事件")])]),t._v(" "),a("h2",{attrs:{id:"音频组件上下文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#音频组件上下文","aria-hidden":"true"}},[t._v("#")]),t._v(" 音频组件上下文")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("uni.createInnerAudioContext()")]),t._v(" 创建并返回内部 audio 上下文 innerAudioContext 对象。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" innerAudioContext "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" uni"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createInnerAudioContext")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ninnerAudioContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("autoplay "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ninnerAudioContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'https://img-cdn-qiniu.dcloud.net.cn/uniapp/audio/music.mp3'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ninnerAudioContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("onPlay")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'开始播放'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ninnerAudioContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("onError")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errMsg"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errCode"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[a("strong",[t._v("innerAudioContext 对象的属性列表")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("只读")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("src")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("音频的数据链接，用于直接播放。")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("startTime")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("开始播放的位置（单位：s），默认 0")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("autoplay")]),t._v(" "),a("td",[t._v("Boolean")]),t._v(" "),a("td",[t._v("是否自动开始播放，默认 false")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("loop")]),t._v(" "),a("td",[t._v("Boolean")]),t._v(" "),a("td",[t._v("是否循环播放，默认 false")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("obeyMuteSwitch")]),t._v(" "),a("td",[t._v("Boolean")]),t._v(" "),a("td",[t._v("是否遵循系统静音开关，当此参数为 false 时，即使用户打开了静音开关，也能继续发出声音，默认值 true")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("duration")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("当前音频的长度（单位：s），只有在当前有合法的 src 时返回")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("currentTime")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("当前音频的播放位置（单位：s），只有在当前有合法的 src 时返回，时间不取整，保留小数点后 6 位")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("paused")]),t._v(" "),a("td",[t._v("Boolean")]),t._v(" "),a("td",[t._v("当前是是否暂停或停止状态，true 表示暂停或停止，false 表示正在播放")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("buffered")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("音频缓冲的时间点，仅保证当前播放时间点到此时间点内容已缓冲。")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("volume")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("音量。范围 0~1。")]),t._v(" "),a("td",[t._v("否")])])])]),t._v(" "),a("p",[a("strong",[t._v("innerAudioContext 对象的方法列表")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("方法")]),t._v(" "),a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("play")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("播放")])]),t._v(" "),a("tr",[a("td",[t._v("pause")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("暂停")])]),t._v(" "),a("tr",[a("td",[t._v("stop")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("停止")])]),t._v(" "),a("tr",[a("td",[t._v("seek")]),t._v(" "),a("td",[t._v("position")]),t._v(" "),a("td",[t._v("跳转到指定位置，单位 s")])]),t._v(" "),a("tr",[a("td",[t._v("destroy")]),t._v(" "),a("td",[t._v("position")]),t._v(" "),a("td",[t._v("销毁当前实例")])])])]),t._v(" "),a("p",[a("strong",[t._v("innerAudioContext 对象的事件列表")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("方法")]),t._v(" "),a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("onCanplay")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("音频进入可以播放状态，但不保证后面可以流畅播放")])]),t._v(" "),a("tr",[a("td",[t._v("onPlay")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("音频播放事件")])]),t._v(" "),a("tr",[a("td",[t._v("onPause")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("音频暂停事件")])]),t._v(" "),a("tr",[a("td",[t._v("onStop")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("音频停止事件")])]),t._v(" "),a("tr",[a("td",[t._v("onEnded")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("音频自然播放结束事件")])]),t._v(" "),a("tr",[a("td",[t._v("onTimeUpdate")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("音频播放进度更新事件")])]),t._v(" "),a("tr",[a("td",[t._v("onError")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("音频播放错误事件")])]),t._v(" "),a("tr",[a("td",[t._v("onWaiting")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("音频加载中事件，当音频因为数据不足，需要停下来加载时会触发")])]),t._v(" "),a("tr",[a("td",[t._v("onSeeking")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("音频进行 seek 操作事件")])]),t._v(" "),a("tr",[a("td",[t._v("onSeeked")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("音频完成 seek 操作事件")])]),t._v(" "),a("tr",[a("td",[t._v("offCanplay")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("取消监听 onCanplay 事件")])]),t._v(" "),a("tr",[a("td",[t._v("offPlay")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("取消监听 onPlay 事件")])]),t._v(" "),a("tr",[a("td",[t._v("offPause")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("取消监听 onPause 事件")])]),t._v(" "),a("tr",[a("td",[t._v("offStop")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("取消监听 onStop 事件")])]),t._v(" "),a("tr",[a("td",[t._v("offEnded")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("取消监听 onEnded 事件")])]),t._v(" "),a("tr",[a("td",[t._v("offTimeUpdate")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("取消监听 onTimeUpdate 事件")])]),t._v(" "),a("tr",[a("td",[t._v("offError")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("取消监听 onError 事件")])]),t._v(" "),a("tr",[a("td",[t._v("offWaiting")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("取消监听 onWaiting 事件")])]),t._v(" "),a("tr",[a("td",[t._v("offSeeking")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("取消监听 onSeeking 事件")])]),t._v(" "),a("tr",[a("td",[t._v("offSeeked")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("取消监听 onSeeked 事件")])])])]),t._v(" "),a("h2",{attrs:{id:"背景音乐上下文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景音乐上下文","aria-hidden":"true"}},[t._v("#")]),t._v(" 背景音乐上下文")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("uni.getBackgroundAudioManager()")]),t._v(" 获取全局唯一的背景音频管理器 backgroundAudioManager。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bgAudioMannager "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" uni"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getBackgroundAudioManager")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbgAudioMannager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'致爱丽丝'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbgAudioMannager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("singer "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'暂无'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbgAudioMannager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("coverImgUrl "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'https://img-cdn-qiniu.dcloud.net.cn/uniapp/audio/music.jpg'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbgAudioMannager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'https://img-cdn-qiniu.dcloud.net.cn/uniapp/audio/music.mp3'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[a("strong",[t._v("backgroundAudioManager 对象的属性列表")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")]),t._v(" "),a("th",[t._v("只读")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("duration")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("当前音频的长度（单位：s），只有在当前有合法的 src 时返回")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("currentTime")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("当前音频的播放位置（单位：s），只有在当前有合法的 src 时返回")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("paused")]),t._v(" "),a("td",[t._v("Boolean")]),t._v(" "),a("td",[t._v("当前是是否暂停或停止状态，true 表示暂停或停止，false 表示正在播放")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("src")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("音频的数据源，默认为空字符串，**当设置了新的 src 时，会自动开始播放，**目前支持的格式有 m4a, aac, mp3, wav")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("startTime")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("音频开始播放的位置（单位：s）")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("buffered")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("音频缓冲的时间点，仅保证当前播放时间点到此时间点内容已缓冲。")]),t._v(" "),a("td",[t._v("是")])]),t._v(" "),a("tr",[a("td",[t._v("title")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("音频标题，用于做原生音频播放器音频标题。原生音频播放器中的分享功能，分享出去的卡片标题，也将使用该值。")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("epname")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("专辑名，原生音频播放器中的分享功能，分享出去的卡片简介，也将使用该值。")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("singer")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("歌手名，原生音频播放器中的分享功能，分享出去的卡片简介，也将使用该值。")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("coverImgUrl")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("封面图url，用于做原生音频播放器背景图。原生音频播放器中的分享功能，分享出去的卡片配图及背景也将使用该图。")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("webUrl")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("页面链接，原生音频播放器中的分享功能，分享出去的卡片简介，也将使用该值。")]),t._v(" "),a("td",[t._v("否")])]),t._v(" "),a("tr",[a("td",[t._v("protocol")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("音频协议。默认值为 'http'，设置 'hls' 可以支持播放 HLS 协议的直播音频")]),t._v(" "),a("td",[t._v("否")])])])]),t._v(" "),a("p",[a("strong",[t._v("backgroundAudioManager 对象的方法列表")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("方法")]),t._v(" "),a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("play")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("播放")])]),t._v(" "),a("tr",[a("td",[t._v("pause")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("暂停")])]),t._v(" "),a("tr",[a("td",[t._v("stop")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("停止")])]),t._v(" "),a("tr",[a("td",[t._v("seek")]),t._v(" "),a("td",[t._v("position")]),t._v(" "),a("td",[t._v("跳转到指定位置，单位 s")])])])]),t._v(" "),a("p",[a("strong",[t._v("backgroundAudioManager 对象的事件列表")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("方法")]),t._v(" "),a("th",[t._v("参数")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("onCanplay")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("背景音频进入可以播放状态，但不保证后面可以流畅播放")])]),t._v(" "),a("tr",[a("td",[t._v("onPlay")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("背景音频播放事件")])]),t._v(" "),a("tr",[a("td",[t._v("onPause")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("背景音频暂停事件")])]),t._v(" "),a("tr",[a("td",[t._v("onStop")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("背景音频停止事件")])]),t._v(" "),a("tr",[a("td",[t._v("onEnded")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("背景音频自然播放结束事件")])]),t._v(" "),a("tr",[a("td",[t._v("onTimeUpdate")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("背景音频播放进度更新事件")])]),t._v(" "),a("tr",[a("td",[t._v("onPrev")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("用户在系统音乐播放面板点击上一曲事件（iOS only）")])]),t._v(" "),a("tr",[a("td",[t._v("onNext")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("用户在系统音乐播放面板点击下一曲事件（iOS only）")])]),t._v(" "),a("tr",[a("td",[t._v("onError")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("背景音频播放错误事件")])]),t._v(" "),a("tr",[a("td",[t._v("onWaiting")]),t._v(" "),a("td",[t._v("callback")]),t._v(" "),a("td",[t._v("音频加载中事件，当音频因为数据不足，需要停下来加载时会触发")])])])]),t._v(" "),a("h2",{attrs:{id:"录音"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#录音","aria-hidden":"true"}},[t._v("#")]),t._v(" 录音")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("uni.getRecorderManager()")]),t._v(" 获取全局唯一的录音管理器 recorderManager。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" recorderManager "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" uni"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getRecorderManager")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"recordermanager-实例方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#recordermanager-实例方法","aria-hidden":"true"}},[t._v("#")]),t._v(" recorderManager 实例方法")]),t._v(" "),a("ul",[a("li",[t._v("start(options)\t开始录音")]),t._v(" "),a("li",[t._v("pause\t暂停录音")]),t._v(" "),a("li",[t._v("resume\t继续录音")]),t._v(" "),a("li",[t._v("stop\t停止录音")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("recorderManager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("start")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  format"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'mp3'")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 开始录音")]),t._v("\nrecorderManager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("pause")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 暂停录音")]),t._v("\nrecorderManager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("resume")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 继续录音")]),t._v("\nrecorderManager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("stop")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 停止录音")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"start-options-参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-options-参数说明","aria-hidden":"true"}},[t._v("#")]),t._v(" start(options) 参数说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("必填")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("duration")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("指定录音的时长，单位 ms ，如果传入了合法的 duration ，在到达指定的 duration 后会自动停止录音，最大值 600000（10 分钟）,默认值 60000（1 分钟）")])]),t._v(" "),a("tr",[a("td",[t._v("sampleRate")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("采样率，有效值 8000/16000/44100")])]),t._v(" "),a("tr",[a("td",[t._v("numberOfChannels")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("录音通道数，有效值 1/2")])]),t._v(" "),a("tr",[a("td",[t._v("encodeBitRate")]),t._v(" "),a("td",[t._v("Number")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("编码码率，有效值见下表格")])]),t._v(" "),a("tr",[a("td",[t._v("format")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("音频格式，有效值 aac/mp3")])]),t._v(" "),a("tr",[a("td",[t._v("frameSize")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("否")]),t._v(" "),a("td",[t._v("指定帧大小，单位 KB。传入 frameSize 后，每录制指定帧大小的内容后，会回调录制的文件内容，不指定则不会回调。暂仅支持 mp3 格式。")])])])]),t._v(" "),a("p",[t._v("其中，采样率和码率有一定要求，具体有效值如下：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("采样率")]),t._v(" "),a("th",[t._v("编码码率")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("8000")]),t._v(" "),a("td",[t._v("16000 ~ 48000")])]),t._v(" "),a("tr",[a("td",[t._v("11025")]),t._v(" "),a("td",[t._v("16000 ~ 48000")])]),t._v(" "),a("tr",[a("td",[t._v("12000")]),t._v(" "),a("td",[t._v("24000 ~ 64000")])]),t._v(" "),a("tr",[a("td",[t._v("16000")]),t._v(" "),a("td",[t._v("24000 ~ 96000")])]),t._v(" "),a("tr",[a("td",[t._v("22050")]),t._v(" "),a("td",[t._v("32000 ~ 128000")])]),t._v(" "),a("tr",[a("td",[t._v("24000")]),t._v(" "),a("td",[t._v("32000 ~ 128000")])]),t._v(" "),a("tr",[a("td",[t._v("32000")]),t._v(" "),a("td",[t._v("48000 ~ 192000")])]),t._v(" "),a("tr",[a("td",[t._v("44100")]),t._v(" "),a("td",[t._v("64000 ~ 320000")])]),t._v(" "),a("tr",[a("td",[t._v("48000")]),t._v(" "),a("td",[t._v("64000 ~ 320000")])])])]),t._v(" "),a("h3",{attrs:{id:"recordermanager-事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#recordermanager-事件","aria-hidden":"true"}},[t._v("#")]),t._v(" recorderManager 事件")]),t._v(" "),a("ul",[a("li",[t._v("onStart\t录音开始事件")]),t._v(" "),a("li",[t._v("onPause\t录音暂停事件")]),t._v(" "),a("li",[t._v("onStop\t录音停止事件，会回调文件地址")]),t._v(" "),a("li",[t._v("onFrameRecorded\t已录制完指定帧大小的文件，会回调录音分片结果数据。如果设置了 frameSize ，则会回调此事件")]),t._v(" "),a("li",[t._v("onError\t录音错误事件, 会回调错误信息")])]),t._v(" "),a("p",[t._v("一个完整的录音示例：")]),t._v(" "),a("div",{staticClass:"language-vue line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vue"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("lang")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pug"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('\n.content\n\tbutton(type="primary" @tap="fun") record\n\tbutton(type="primary" @tap="play") play\n'),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}},[t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" recorderManager "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" uni"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getRecorderManager")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" innerAudioContext "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" uni"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createInnerAudioContext")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ninnerAudioContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("autoplay "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("data")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      start"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      voicePath"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("''")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("onLoad")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    recorderManager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("onStart")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \tconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'开始录音'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    recorderManager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("onStop")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'录音结束'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voicePath "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tempFilePath"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 返回录音文件的临时地址")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    recorderManager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("onFrameRecorded")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \tconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'onFrameRecorded'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \tconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// res 对象包括：")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// frameBuffer\tArrayBuffer\t录音分片结果数据")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// isLastFrame\tBoolean\t当前帧是否正常录音结束前的最后一帧")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    recorderManager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("onError")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \tconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'onError'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \tconsole"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errMsg"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 错误信息")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// 比如没有录音设备：operateRecorder:fail DevicesNotFoundError")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  methods"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("fun")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("start"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        recorderManager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("stop")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("start "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        recorderManager"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("start")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("start "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("play")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'播放录音'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voicePath"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voicePath"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        innerAudioContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("voicePath"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        innerAudioContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("play")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")]),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br"),a("span",{staticClass:"line-number"},[t._v("50")]),a("br"),a("span",{staticClass:"line-number"},[t._v("51")]),a("br"),a("span",{staticClass:"line-number"},[t._v("52")]),a("br"),a("span",{staticClass:"line-number"},[t._v("53")]),a("br"),a("span",{staticClass:"line-number"},[t._v("54")]),a("br"),a("span",{staticClass:"line-number"},[t._v("55")]),a("br"),a("span",{staticClass:"line-number"},[t._v("56")]),a("br"),a("span",{staticClass:"line-number"},[t._v("57")]),a("br"),a("span",{staticClass:"line-number"},[t._v("58")]),a("br"),a("span",{staticClass:"line-number"},[t._v("59")]),a("br")])]),a("imgLink",{attrs:{src:"date/20181018/004.png"}}),t._v(" "),a("imgLink",{attrs:{src:"date/20181018/005.png"}}),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("开发者工具上的录音文件与移动端格式不同，暂时只可在工具上进行播放调试，无法直接播放或者在客户端上播放")])])],1)},[],!1,null,null,null);_.options.__file="Audio.md";s.default=_.exports}}]);