(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{468:function(e,a,t){"use strict";t.r(a);var s={props:["slot-key"],mounted(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},r=t(0),l=Object(r.a)(s,function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.slotKey}},[t("h1",{attrs:{id:"docker-其他命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-其他命令","aria-hidden":"true"}},[e._v("#")]),e._v(" Docker 其他命令")]),e._v(" "),t("p",[e._v("要查看某个命令的帮助文档，跟上 "),t("code",[e._v("--help")]),e._v(" 即可。比如 "),t("code",[e._v("docker search --help")])]),e._v(" "),t("p",[e._v("查看Docker是否运行：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ ps -ef | grep docker\n# or\n$ ps aux | grep docker\n")])])]),t("h2",{attrs:{id:"查看镜像或容器详细信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看镜像或容器详细信息","aria-hidden":"true"}},[e._v("#")]),e._v(" 查看镜像或容器详细信息")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ docker inspect [image:tag or container]\n")])])]),t("p",[e._v("可以使用管道过滤出有用的信息，如：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('$ docker inspect server1 | grep IPAddress\n    "SecondaryIPAddresses": null,\n    "IPAddress": "172.17.0.2",\n            "IPAddress": "172.17.0.2",\n')])])]),t("h2",{attrs:{id:"查看容器内进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器内进程","aria-hidden":"true"}},[e._v("#")]),e._v(" 查看容器内进程")]),e._v(" "),t("p",[e._v("使用 "),t("code",[e._v("docker top [container]")]),e._v(" 命令查看容器内进程：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("[root@node1 ~]# docker top server2\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\nroot                4932                4917                0                   00:28               ?                   00:00:00            /bin/sh -c while true; do echo Hello world; sleep 1;done\nroot                5708                4932                0                   00:38               ?                   00:00:00            sleep 1\n")])])]),t("h2",{attrs:{id:"查看容器与宿主机端口映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器与宿主机端口映射","aria-hidden":"true"}},[e._v("#")]),e._v(" 查看容器与宿主机端口映射")]),e._v(" "),t("p",[e._v("使用 "),t("code",[e._v("docker port [container]")]),e._v(" 命令可以查看容器与宿主机的端口映射：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("[root@node1 ~]# docker port nginx_server\n80/tcp -> 0.0.0.0:8080\n")])])]),t("h2",{attrs:{id:"查看容器文件的变动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器文件的变动","aria-hidden":"true"}},[e._v("#")]),e._v(" 查看容器文件的变动")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ docker diff [container]\n")])])]),t("p",[e._v("可以看到文件的变更情况，其中：")]),e._v(" "),t("ul",[t("li",[e._v("A 添加的文件")]),e._v(" "),t("li",[e._v("C 修改的文件")]),e._v(" "),t("li",[e._v("D 删除的文件")])]),e._v(" "),t("h2",{attrs:{id:"查看历史镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看历史镜像","aria-hidden":"true"}},[e._v("#")]),e._v(" 查看历史镜像")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ docker history [image:tag]\n")])])]),t("h2",{attrs:{id:"为镜像打标记"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为镜像打标记","aria-hidden":"true"}},[e._v("#")]),e._v(" 为镜像打标记")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ docker tag [image:tag] [仓库地址]/[image:tag]\n")])])]),t("h2",{attrs:{id:"日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#日志","aria-hidden":"true"}},[e._v("#")]),e._v(" 日志")]),e._v(" "),t("p",[e._v("使用 logs 命令可以查看容器运行日志")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ docker logs -f -t --tail [container]\n")])])]),t("ul",[t("li",[e._v("-f: --follows=true|false 默认false，一直跟踪log的变化并返回结果")]),e._v(" "),t("li",[e._v("-t: --timestamps=true|false 在返回的日志中添加时间戳")]),e._v(" "),t("li",[e._v('--tail="all" 默认all，返回结尾处多少数量的日志')])]),e._v(" "),t("p",[e._v("直接使用，打印出当前时间点之前的日志，比如运行一个每隔一秒输出一段话的脚本：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('[root@node1 ~]# docker run --name server1 -d ubuntu /bin/sh -c "while true; do echo Hello world; sleep 1;done"\ne1306e60672a152de4a38d2541279124c98347a13c2e612c386694c442db0708\n[root@node1 ~]# docker logs server1\nHello world\nHello world\nHello world\n')])])]),t("p",[e._v("以下日志会不断更新：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("[root@node1 ~]# docker logs server2 --tail 10 -tf\n2018-10-14T16:35:38.188534000Z Hello world\n2018-10-14T16:35:39.189464000Z Hello world\n2018-10-14T16:35:40.191417000Z Hello world\n")])])])])},[],!1,null,null,null);l.options.__file="Command.md";a.default=l.exports}}]);