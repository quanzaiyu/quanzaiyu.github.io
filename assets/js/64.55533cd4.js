(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{405:function(s,a,t){"use strict";t.r(a);var e={props:["slot-key"],mounted(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},r=t(0),n=Object(r.a)(e,function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.slotKey}},[t("h1",{attrs:{id:"添加ftp用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加ftp用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 添加FTP用户")]),s._v(" "),t("h2",{attrs:{id:"创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建用户")]),s._v(" "),t("p",[s._v("设置FTP用户的账号，例如账号为 "),t("code",[s._v("ftpuser")]),s._v(" ，用户目录为 "),t("code",[s._v("/home/ftpuser")]),s._v("，且设置不允许通过ssh登录。")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -d /home/ftpuser -s /sbin/nologin ftpuser\n")])])]),t("p",[s._v("如果创建用户的时候没有声明不能通过 ssh 访问，可以随后设置")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("usermod")]),s._v(" -s /sbin/nologin ftpuser\n")])])]),t("p",[s._v("设置账号对应的密码")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("passwd")]),s._v(" ftpuser\n")])])]),t("p",[s._v("或")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"password"')]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("passwd")]),s._v(" ftpuser --stdin\n")])])]),t("p",[s._v("这样一个用户建完，可以用这个登录，记得用普通登录不要用匿名了。登录后默认的路径为 "),t("code",[s._v("/home/ftpuser")]),s._v(" 。")]),s._v(" "),t("h2",{attrs:{id:"为用户分配主目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为用户分配主目录","aria-hidden":"true"}},[s._v("#")]),s._v(" 为用户分配主目录")]),s._v(" "),t("p",[s._v("为用户 ftpuser 创建主目录并约定：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("/home/ftpuser")]),s._v("\t为主目录, 该目录不可上传文件")]),s._v(" "),t("li",[t("code",[s._v("/home/ftpuser/pub")]),s._v("\t文件只能上传到该目录下")])]),s._v(" "),t("p",[s._v("在 /data 中创建相关的目录")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /home/ftpuser/pub\n")])])]),t("p",[s._v("创建登录欢迎文件")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),t("span",{attrs:{class:"token string"}},[s._v('"Welcome to use FTP service."')]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" /home/ftpuser/welcome.txt\n")])])]),t("p",[s._v("设置访问权限")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("chmod")]),s._v(" 555 /home/ftpuser\n$ "),t("span",{attrs:{class:"token function"}},[s._v("chmod")]),s._v(" 777 -R /home/ftpuser/pub\n")])])]),t("p",[s._v("设置为用户的主目录：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("usermod")]),s._v(" -d /home/ftpuser ftpuser\n")])])]),t("h2",{attrs:{id:"其他相关配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他相关配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 其他相关配置")]),s._v(" "),t("h3",{attrs:{id:"禁止匿名登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#禁止匿名登录","aria-hidden":"true"}},[s._v("#")]),s._v(" 禁止匿名登录")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("anonymous_enable"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("NO\n")])])]),t("h3",{attrs:{id:"禁止切换根目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#禁止切换根目录","aria-hidden":"true"}},[s._v("#")]),s._v(" 禁止切换根目录")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("chroot_local_user"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("YES\n")])])]),t("h3",{attrs:{id:"可写模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#可写模式","aria-hidden":"true"}},[s._v("#")]),s._v(" 可写模式")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/vsftpd/vsftpd.conf "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("grep")]),s._v(" write_enable\nwrite_enable"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("YES\n"),t("span",{attrs:{class:"token comment"}},[s._v("#anon_mkdir_write_enable=YES")]),s._v("\n")])])]),t("h3",{attrs:{id:"开启监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启监听","aria-hidden":"true"}},[s._v("#")]),s._v(" 开启监听")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("listen"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("YES\nlisten_port"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("21\nlisten_ipv6"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("NO\n")])])]),t("p",[s._v("禁止 "),t("code",[s._v("ftpusers")]),s._v(" 中的用户访问")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("userlist_enable"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("NO\n")])])])])},[],!1,null,null,null);n.options.__file="user.md";a.default=n.exports}}]);