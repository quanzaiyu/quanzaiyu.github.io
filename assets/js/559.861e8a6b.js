(window.webpackJsonp=window.webpackJsonp||[]).push([[559],{760:function(t,s,a){"use strict";a.r(s);var n={props:["slot-key"],mounted(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},e=a(0),r=Object(e.a)(n,function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.slotKey}},[a("h1",{attrs:{id:"如何发布自己开发的-npm-包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何发布自己开发的-npm-包","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何发布自己开发的 NPM 包")]),t._v(" "),a("p",[t._v("前一段时间开发了一些基于Vue的插件，感觉还挺好用的，就发布到npm，希望大家都能使用。")]),t._v(" "),a("p",[t._v("下面说一下发布npm 的流程:")]),t._v(" "),a("h2",{attrs:{id:"注册一个npm账号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册一个npm账号","aria-hidden":"true"}},[t._v("#")]),t._v(" 注册一个npm账号")]),t._v(" "),a("p",[t._v("进入网址: https://www.npmjs.com 注册一个npm账号。")]),t._v(" "),a("p",[t._v("本人的npm地址为: "),a("a",{attrs:{href:"https://www.npmjs.com/~quanzaiyu",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.npmjs.com/~quanzaiyu"),a("OutboundLink")],1)]),t._v(" "),a("imgLink",{attrs:{src:"articles/npm/001.png/small"}}),t._v(" "),a("p",[t._v("注册后如果需要进行头像设置，需要到 https://en.gravatar.com 注册一个账号(使用的是WordPress账号)，添加头像。")]),t._v(" "),a("imgLink",{attrs:{src:"articles/npm/002.png/small"}}),t._v(" "),a("h2",{attrs:{id:"开发一个npm包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发一个npm包","aria-hidden":"true"}},[t._v("#")]),t._v(" 开发一个npm包")]),t._v(" "),a("h3",{attrs:{id:"初始化仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初始化仓库","aria-hidden":"true"}},[t._v("#")]),t._v(" 初始化仓库")]),t._v(" "),a("p",[t._v("每一个npm包都需要一个"),a("code",[t._v("package.json")]),t._v("文件，进行常规配置。")]),t._v(" "),a("p",[t._v("首先进入需要发布npm的目录，输入")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" init\n")])])]),a("p",[t._v("进行包初始化，自动生成一个"),a("code",[t._v("package.json")]),t._v("文件，填写一些简单的选项，包括: 包名、版本号、主入口文件、描述、作者、脚本 等。")]),t._v(" "),a("p",[t._v("最终文件大致如下:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"name"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"qzy-npm-test"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"version"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"1.0.0"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"description"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"一个npm测试包"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"main"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"index.js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"test"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"author"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"quanzaiyu"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"license"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"ISC"')]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"主入口文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主入口文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 主入口文件")]),t._v(" "),a("p",[t._v("可以看到，在"),a("code",[t._v("package.json")]),t._v("中指定主入口文件为"),a("code",[t._v("index.js")]),t._v("，那么，就得在项目下创建一个名为"),a("code",[t._v("index.js")]),t._v("的文件。比如:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("hello")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"hello "')]),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" name"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nexports"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hello "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" hello"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("可以看到，此文件导出了一个名叫"),a("code",[t._v("hello")]),t._v("的函数。")]),t._v(" "),a("h3",{attrs:{id:"测试此包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试此包","aria-hidden":"true"}},[t._v("#")]),t._v(" 测试此包")]),t._v(" "),a("p",[t._v("将整个文件夹丢到"),a("code",[t._v("node_modules")]),t._v("目录下，在"),a("code",[t._v("node_modules")]),t._v("同级目录下使用"),a("code",[t._v("npm init")]),t._v(" 创建 "),a("code",[t._v("package.json")]),t._v("，内容大体如下:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"name"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"projects"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"version"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"1.0.0"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"description"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"main"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"index.js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"qzy-npm-test"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"^1.0.1"')]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"devDependencies"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"test"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"author"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"license"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"ISC"')]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("再在同级目录下创建一个"),a("code",[t._v("test.js")]),t._v("，内容如下:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" h "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'qzy-npm-test'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nh"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("hello")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'Jarrick'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("执行"),a("code",[t._v("node test")]),t._v("，控制台输出"),a("code",[t._v("hello Jarrick")]),t._v("。说明此包测试成功。")]),t._v(" "),a("p",[t._v("创建的目录结构如下:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("projects/ # 测试项目目录\n\tnode_modules/ # 包目录\n\t\tqzy-npm-test/ # 插件目录\n\t\t\tindex.js # 插件入口文件\n\t\t\tpackage.json # 插件配置文件\n\ttest.js # 测试文件\n\tpackage.json # 测试配置文件\n")])])]),a("h2",{attrs:{id:"发布一个npm包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布一个npm包","aria-hidden":"true"}},[t._v("#")]),t._v(" 发布一个npm包")]),t._v(" "),a("p",[t._v("以下操作都在 "),a("code",[t._v("projects/node_modules/qzy-npm-test/")]),t._v(" 目录下进行。")]),t._v(" "),a("h3",{attrs:{id:"添加npm用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加npm用户","aria-hidden":"true"}},[t._v("#")]),t._v(" 添加npm用户")]),t._v(" "),a("p",[t._v("使用之前注册的npm账号进行登录")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" adduser\nusername: xxx\npassword: xxx\nemail: xxx\n")])])]),a("h3",{attrs:{id:"发布npm包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布npm包","aria-hidden":"true"}},[t._v("#")]),t._v(" 发布npm包")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" publish\n")])])]),a("p",[t._v("发布后可在自己的npm主页看到")]),t._v(" "),a("h3",{attrs:{id:"更新npm包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新npm包","aria-hidden":"true"}},[t._v("#")]),t._v(" 更新npm包")]),t._v(" "),a("p",[t._v("如果之后修改过此包，需要修改"),a("code",[t._v("package.json")]),t._v("中的版本号字段"),a("code",[t._v("version")]),t._v("，使其大于当前版本，然后"),a("code",[t._v("npm publish")]),t._v("即可。")]),t._v(" "),a("p",[t._v("如果未更改版本号，会报错:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm ERR! publish Failed PUT 403\nnpm ERR! code E403\nnpm ERR! You cannot publish over the previously published version 1.0.0. : qzy-npm-test\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     C:\\Users\\quanzaiyu\\AppData\\Roaming\\npm-cache\\_logs\\2017-09-12T07_59_18_829Z-debug.log\n")])])]),a("p",[t._v("修改版本号后则成功:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" publish\n+ qzy-npm-test@1.0.1\n")])])]),a("h3",{attrs:{id:"删除npm包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除npm包","aria-hidden":"true"}},[t._v("#")]),t._v(" 删除npm包")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" unpublish\n$ "),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" unpublish --force\n")])])]),a("h2",{attrs:{id:"安装使用npm包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装使用npm包","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装使用npm包")]),t._v(" "),a("p",[t._v("安装使用方法很简单，跟以前安装npm包同样的使用即可。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" i "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("packageName"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("比如安装刚才发布的包:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" i qzy-npm-test --save\n")])])]),a("p",[t._v("使用刚才发布的包:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'qzy-npm-test'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\na"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("hello")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'qzy'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("执行"),a("code",[t._v("node index")]),t._v("即可看见输出了"),a("code",[t._v("hello qzy")])]),t._v(" "),a("p",[t._v("详细的使用请访问本人的npm: "),a("a",{attrs:{href:"https://www.npmjs.com/~quanzaiyu",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.npmjs.com/~quanzaiyu"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000009315989",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm-参考手册"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"http://www.jianshu.com/p/36d3e0e00157",target:"_blank",rel:"noopener noreferrer"}},[t._v("手把手教你用npm发布一个包"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://segmentfault.com/q/1010000009389901",target:"_blank",rel:"noopener noreferrer"}},[t._v("怎样删除npm里已经发布的包？"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://bower.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("bower"),a("OutboundLink")],1)])],1)},[],!1,null,null,null);r.options.__file="Node_Publish_NPM_Package.md";s.default=r.exports}}]);