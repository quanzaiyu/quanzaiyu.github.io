(window.webpackJsonp=window.webpackJsonp||[]).push([[500],{411:function(s,a,t){"use strict";t.r(a);var n={props:["slot-key"]},e=t(0),r=Object(e.a)(n,function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.slotKey}},[t("h1",{attrs:{id:"mysql-存储过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql-存储过程","aria-hidden":"true"}},[s._v("#")]),s._v(" MySQL 存储过程")]),s._v(" "),t("p",[s._v("存储过程是一组可编程的函数，是为了完成特定功能的SQL语句集，经编译创建并保存在数据库中，用户可通过指定存储过程的名字并给定参数(需要时)来调用执行。")]),s._v(" "),t("p",[s._v("为什么要用存储过程？")]),s._v(" "),t("ul",[t("li",[s._v("① 将重复性很高的一些操作，封装到一个存储过程中，简化了对这些SQL的调用")]),s._v(" "),t("li",[s._v("② 批量处理：SQL+循环，减少流量，也就是“跑批”")]),s._v(" "),t("li",[s._v("③ 统一接口，确保数据的安全")])]),s._v(" "),t("p",[s._v("相对于oracle数据库来说，MySQL的存储过程相对功能较弱，使用较少。")]),s._v(" "),t("ul",[t("li",[s._v("存储过程就是具有名字的一段代码，用来完成一个特定的功能。")]),s._v(" "),t("li",[s._v("创建的存储过程保存在数据库的数据字典中。")])]),s._v(" "),t("h2",{attrs:{id:"定义存储过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定义存储过程","aria-hidden":"true"}},[s._v("#")]),s._v(" 定义存储过程")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  "),t("span",{attrs:{class:"token comment"}},[s._v("#Routine body goes here...")]),s._v("\n\n"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("如果使用 Navicat 创建，默认会有以下模板：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("DEFINER")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("CURRENT_USER")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  "),t("span",{attrs:{class:"token comment"}},[s._v("#Routine body goes here...")]),s._v("\n\n"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("在 body 部分添加需要处理的语句")]),s._v(" "),t("p",[s._v("比如：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("DEFINER")]),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("root"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token variable"}},[s._v("@`localhost`")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n\t"),t("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_user"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"调用存储过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#调用存储过程","aria-hidden":"true"}},[s._v("#")]),s._v(" 调用存储过程")]),s._v(" "),t("p",[s._v("使用 call 可以调用存储过程。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("call")]),s._v(" NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"存储过程体"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#存储过程体","aria-hidden":"true"}},[s._v("#")]),s._v(" 存储过程体")]),s._v(" "),t("ul",[t("li",[s._v("存储过程体包含了在过程调用时必须执行的语句，例如：dml、ddl语句，if-then-else 和 while-do 语句、声明变量的 declare 语句等")]),s._v(" "),t("li",[s._v("过程体格式：以 begin 开始，以 end 结束 (可嵌套)")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  "),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n      statements"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n  "),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("div",{staticClass:"warning custom-block"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("每个嵌套块及其中的每条语句，必须以分号结束，表示过程体结束的begin-end块(又叫做复合语句compound statement)，则不需要分号。")])]),s._v(" "),t("h2",{attrs:{id:"为语句块贴标签"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为语句块贴标签","aria-hidden":"true"}},[s._v("#")]),s._v(" 为语句块贴标签")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("begin_label:"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n　　"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("statement_list"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("end_label"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("比如：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("label1: "),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n　　label2: "),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n　　　　label3: "),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n　　　　　　statements"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n　　　　"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v(" label3 "),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n　　"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v(" label2"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v(" label1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("标签有两个作用：")]),s._v(" "),t("ul",[t("li",[s._v("增强代码的可读性")]),s._v(" "),t("li",[s._v("在某些语句(例如: leave 和 iterate 语句)，需要用到标签")])]),s._v(" "),t("h2",{attrs:{id:"带参数的存储过程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#带参数的存储过程","aria-hidden":"true"}},[s._v("#")]),s._v(" 带参数的存储过程")]),s._v(" "),t("p",[s._v("存储过程可以有0个或多个参数，用于存储过程的定义。有3种参数类型：")]),s._v(" "),t("ul",[t("li",[s._v("IN 输入参数：表示调用者向过程传入值（传入值可以是字面量或变量）")]),s._v(" "),t("li",[s._v("OUT 输出参数：表示过程向调用者传出值(可以返回多个值)（传出值只能是变量）")]),s._v(" "),t("li",[s._v("INOUT 输入输出参数：既表示调用者向过程传入值，又表示过程向调用者传出值（值只能是变量）")])]),s._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("① 如果过程没有参数，也必须在过程名后面写上小括号")]),s._v(" "),t("p",[s._v("例：CREATE PROCEDURE sp_name ([proc_parameter[,...]]) ……")]),s._v(" "),t("p",[s._v("② 确保参数的名字不等于列的名字，否则在过程体中，参数名被当做列名来处理")])]),s._v(" "),t("h3",{attrs:{id:"in-输入参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#in-输入参数","aria-hidden":"true"}},[s._v("#")]),s._v(" In 输入参数")]),s._v(" "),t("p",[s._v("一个简单的例子：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("DEFINER")]),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("root"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token variable"}},[s._v("@`localhost`")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token operator"}},[s._v("IN")]),s._v(" id "),t("span",{attrs:{class:"token keyword"}},[s._v("INTEGER")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n\t"),t("span",{attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_user "),t("span",{attrs:{class:"token keyword"}},[s._v("where")]),s._v(" user_id"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("id"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("这里，传入一个参数 id，在调用的时候可以传入：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("call")]),s._v(" NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token number"}},[s._v("1")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("另一个例子：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("DEFINER")]),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("root"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token variable"}},[s._v("@`localhost`")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token operator"}},[s._v("In")]),s._v(" out_num "),t("span",{attrs:{class:"token keyword"}},[s._v("INTEGER")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  "),t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" out_num"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" out_num "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1024")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" out_num"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("调用的时候：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("2")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("call")]),s._v(" NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("输出：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" out_num "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("2")]),s._v("       "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n\n\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" out_num "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1024")]),s._v("    "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n\n\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("--------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("--------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("2")]),s._v("      "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("--------|")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h3",{attrs:{id:"out-输出参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#out-输出参数","aria-hidden":"true"}},[s._v("#")]),s._v(" Out 输出参数")]),s._v(" "),t("p",[s._v("一个简单的例子：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("DEFINER")]),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("root"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token variable"}},[s._v("@`localhost`")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("OUT")]),s._v(" out_num "),t("span",{attrs:{class:"token keyword"}},[s._v("INTEGER")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  "),t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" out_num"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" out_num "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1024")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" out_num"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("调用的时候：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("2")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("call")]),s._v(" NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("输出：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" out_num "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token boolean"}},[s._v("NULL")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n\n\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" out_num "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1024")]),s._v("    "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n\n\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("--------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("--------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1024")]),s._v("   "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("--------|")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h3",{attrs:{id:"inout-输入输出参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#inout-输入输出参数","aria-hidden":"true"}},[s._v("#")]),s._v(" Inout 输入输出参数")]),s._v(" "),t("p",[s._v("调用了inout_param存储过程，接受了输入的参数，也输出参数，改变了变量。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("DEFINER")]),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("root"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token variable"}},[s._v("@`localhost`")]),s._v(" "),t("span",{attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" "),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),s._v("NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("`")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token keyword"}},[s._v("INOUT")]),s._v(" out_num "),t("span",{attrs:{class:"token keyword"}},[s._v("INTEGER")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  "),t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" out_num"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" out_num "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1024")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" out_num"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("调用的时候：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("2")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("call")]),s._v(" NewProc"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("输出：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" out_num "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("2")]),s._v("       "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n\n\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" out_num "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1024")]),s._v("    "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("---------|")]),s._v("\n\n\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("--------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token variable"}},[s._v("@p_out")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("--------|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token number"}},[s._v("1024")]),s._v("   "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),t("span",{attrs:{class:"token operator"}},[s._v("|")]),t("span",{attrs:{class:"token comment"}},[s._v("--------|")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h3",{attrs:{id:"参数的使用建议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数的使用建议","aria-hidden":"true"}},[s._v("#")]),s._v(" 参数的使用建议")]),s._v(" "),t("ol",[t("li",[s._v("输入值使用 in 参数；")]),s._v(" "),t("li",[s._v("返回值使用 out 参数；")]),s._v(" "),t("li",[s._v("inout 参数就尽量的少用。")])]),s._v(" "),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/geaozhang/p/6797357.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL存储过程_创建-调用-参数"),t("OutboundLink")],1)])])},[],!1,null,null,null);r.options.__file="Procedure.md";a.default=r.exports}}]);