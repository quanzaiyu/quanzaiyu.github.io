(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{288:function(t,s,a){"use strict";a.r(s);var n={methods:{getPosition(){var t=!1,s=document.getElementById("canvas1");s.getContext("2d");function a(t,s){var a=s.getBoundingClientRect(),n=t.clientX||t.touches[0].clientX,e=t.clientY||t.touches[0].clientY;console.log(n-a.left,e-a.top)}function n(n){n.preventDefault(),!0===t&&a(n,s)}function e(n){n.preventDefault(),t=!0,a(n,s)}function o(s){s.preventDefault(),t=!1}s.addEventListener("mousedown",e,!1),s.addEventListener("touchstart",e,!1),s.addEventListener("mousemove",n,!1),s.addEventListener("touchmove",n,!1),s.addEventListener("mouseup",o,!1),s.addEventListener("onmouseout",o,!1),s.addEventListener("touchend",o,!1)}},mounted(){this.getPosition()}},e=a(1),o=Object(e.a)(n,function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("交互的第一步，就是获取鼠标的位置，或者是手指点击的位置。")]),t._v(" "),a("p",[t._v("可以通过重写以下事件完成:")]),t._v(" "),a("p",[t._v("鼠标相关")]),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("触摸相关")]),t._v(" "),t._m(3),t._v(" "),a("p",[t._v("然后通过事件监听的方式与canvas进行交互")]),t._v(" "),t._m(4),t._m(5),t._v(" "),t._m(6),t._v(" "),a("p",[t._v("只需要获取点击位置相对于页面的 (x, y) 和 点击元素(即canvas盒子)的 (offsetLeft, offsetTop) 即可，相减得出 点击位置 相对于 点击元素(canvas)的偏移。")]),t._v(" "),t._m(7),t._m(8),t._v(" "),a("p",[t._v("通过getBoundingClientRect获取元素盒子基本参数，通过其 left 和 top 计算出 点击位置 相对于 点击元素(canvas)的偏移。")]),t._v(" "),t._m(9),t._m(10),t._v(" "),t._m(11),t._m(12),t._v(" "),a("p",{staticStyle:{"text-align":"center"}},[t._v("打开控制台，点击上面线框内区域")]),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),a("p",[t._v("需求:")]),t._v(" "),t._m(15),t._v(" "),a("iframe",{staticStyle:{height:"350px"},attrs:{src:"https://img.xiaoyulive.top/html/005.html"}}),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),a("p",[t._v("需求:")]),t._v(" "),t._m(18),t._v(" "),a("iframe",{staticStyle:{height:"350px"},attrs:{src:"https://img.xiaoyulive.top/html/006.html"}}),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),a("p",[t._v("常用键值对应如下:")]),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),a("p",[t._v("说明:")]),t._v(" "),t._m(25),t._v(" "),a("iframe",{staticStyle:{height:"200px"},attrs:{src:"https://img.xiaoyulive.top/html/007.html"}}),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),a("iframe",{attrs:{src:"https://img.xiaoyulive.top/html/008.html"}}),t._v(" "),a("p",[t._v("详见CodePen: "),a("a",{attrs:{href:"https://codepen.io/airen/pen/qmVwML",target:"_blank",rel:"noopener noreferrer"}},[t._v("Canvas: Spotlight Effect"),a("OutboundLink")],1)]),t._v(" "),t._m(28),t._v(" "),a("iframe",{attrs:{src:"https://img.xiaoyulive.top/html/010.html"}}),t._v(" "),a("p",[t._v("详见CodePen: "),a("a",{attrs:{href:"https://codepen.io/airen/pen/WjXqgq",target:"_blank",rel:"noopener noreferrer"}},[t._v("Canvas: Spotlight Effect"),a("OutboundLink")],1)]),t._v(" "),t._m(29),t._v(" "),a("iframe",{staticStyle:{height:"300px"},attrs:{src:"https://img.xiaoyulive.top/html/009.html"}}),t._v(" "),a("p",[t._v("详见CodePen: "),a("a",{attrs:{href:"https://codepen.io/airen/pen/OmjaYV",target:"_blank",rel:"noopener noreferrer"}},[t._v("Canvas: 刮刮卡"),a("OutboundLink")],1)]),t._v(" "),t._m(30),t._v(" "),a("iframe",{staticStyle:{height:"300px"},attrs:{src:"https://img.xiaoyulive.top/html/011.html"}}),t._v(" "),a("p",[t._v("说明:")]),t._v(" "),t._m(31),t._v(" "),a("p",[t._v("详见: "),a("a",{attrs:{href:"http://www.hangge.com/blog/cache/detail_1059.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTML5 - Canvas动画样例（谷歌弹跳球）"),a("OutboundLink")],1)])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"交互"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#交互","aria-hidden":"true"}},[this._v("#")]),this._v(" 交互")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"获取鼠标位置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取鼠标位置","aria-hidden":"true"}},[this._v("#")]),this._v(" 获取鼠标位置")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("mousedown")]),this._v(" "),s("li",[this._v("mousemove")]),this._v(" "),s("li",[this._v("mouseup")]),this._v(" "),s("li",[this._v("mouseout")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("touchstart")]),this._v(" "),s("li",[this._v("touchmove")]),this._v(" "),s("li",[this._v("touchend")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'mousedown'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseDown"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'touchstart'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseDown"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'mousemove'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseMove"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'touchmove'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseMove"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'mouseup'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseUp"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'onmouseout'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseUp"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'touchend'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseUp"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"获取鼠标位置的几种思路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取鼠标位置的几种思路","aria-hidden":"true"}},[this._v("#")]),this._v(" 获取鼠标位置的几种思路")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("通过 "),s("code",[this._v("offset")]),this._v(" 计算")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" clickX "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageX "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("touches"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageX"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetLeft"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" clickY "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageX "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("touches"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageY"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetTop"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("通过 "),s("code",[this._v("getBoundingClientRect")]),this._v(" 计算")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" box "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getBoundingClientRect")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" clickX "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientX "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("touches"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientX"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" box"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("left"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" clickY "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientY "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("touches"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientY"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" box"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"具体实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#具体实现","aria-hidden":"true"}},[this._v("#")]),this._v(" 具体实现")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" isMouseDown "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" canvas "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"canvas"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" context "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getContext")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"2d"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'mousedown'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseDown"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 鼠标按下")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'touchstart'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseDown"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 手指按下")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'mousemove'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseMove"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 鼠标移动")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'touchmove'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseMove"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 手指移动")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'mouseup'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseUp"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 鼠标抬起")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'onmouseout'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseUp"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 鼠标移出")]),t._v("\n  canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'touchend'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mouseUp"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 手指抬起")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("getPosition")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" element"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// 获得box对象，该对象中包含了当前canvas相对浏览器左上角的位置")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" box "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getBoundingClientRect")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// x 和 y 是相对于浏览器左上角的坐标")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// x - box.left 和 y - box.top：表示当前鼠标点击位置相对于canvas左上角的位置")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientX "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("touches"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientX"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" y "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientY "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("touches"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientY"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" box"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("left"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" box"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("mouseMove")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// 阻止浏览器默认处理onmousemove的事件")]),t._v("\n    e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("preventDefault")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isMouseDown "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token function"}},[t._v("getPosition")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("mouseDown")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("preventDefault")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// 表示当前鼠标被按下")]),t._v("\n    isMouseDown "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("getPosition")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" canvas"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("mouseUp")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("preventDefault")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// 表示当前鼠标抬起")]),t._v("\n    isMouseDown "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("canvas",{staticStyle:{border:"black solid 1px"},attrs:{id:"canvas1"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"与鼠标进行交互"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#与鼠标进行交互","aria-hidden":"true"}},[this._v("#")]),this._v(" 与鼠标进行交互")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),s("p",[this._v("Canvas是一种非保留性的绘图界面，即不会记录过去执行的绘图操作，而是保持最终结果（构成图像的彩色像素）。\n如果想让Canvas变得具有交互性，比如用户可以选择、拖动画布上的图形。那么我们必须记录绘制的每一个对象，才能在将来灵活的修改并重绘它们，实现交互。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("点击“添加圆圈”按钮可以在画布上增加位置、大小、颜色都是随机的圆圈。")]),t._v(" "),a("li",[t._v("点击“清空画布”按钮可以清除画布上所有圆圈。")]),t._v(" "),a("li",[t._v("鼠标点击任意圆圈，该圆圈会出现黑色边框，表示选中。")]),t._v(" "),a("li",[t._v("如果鼠标点击不在任何圆圈中，则以当前点击位置为圆心绘制随机圆圈。")]),t._v(" "),a("li",[t._v("鼠标选择圆圈可以进行拖动，拖动的时候显示其颜色的提示框。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"添加物理元素"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加物理元素","aria-hidden":"true"}},[this._v("#")]),this._v(" 添加物理元素")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),s("p",[this._v("可以根据一些物理现象进行交互演示，比如小球的弹跳，下落过程中受到重力的影响速度增加，碰撞到边缘区域速度反向，用鼠标点击小球获取一定速度，拖动鼠标抛出小球等。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("点击“添加小球”按钮，会在画布上添加一个小球。")]),t._v(" "),a("li",[t._v("添加的小球会向右下做自由落体运动，碰到地板、墙壁后会反弹。同时每次反弹会受到阻力的影响，稍稍减少速度。")]),t._v(" "),a("li",[t._v("鼠标点击任意小球，会让该小球突然加速，让它向某个方向弹开。")]),t._v(" "),a("li",[t._v("在画布空白区域拖动鼠标可以添加一定速度的小球")]),t._v(" "),a("li",[t._v("点击“清空画布”按钮，会清除页面上的所有小球。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"与键盘进行交互"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#与键盘进行交互","aria-hidden":"true"}},[this._v("#")]),this._v(" 与键盘进行交互")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"通过onkeydown获取键盘事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过onkeydown获取键盘事件","aria-hidden":"true"}},[this._v("#")]),this._v(" 通过onkeydown获取键盘事件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("onkeydown")]),this._v(" 的事件对象 event")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("event.keyCode/event.which")]),this._v(" 得到的是一个按键对应的数字值（Unicode 编码）")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th",[t._v("数字值")]),t._v(" "),a("th",[t._v("实际键值")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("48到57")]),t._v(" "),a("td",[t._v("0到9")])]),t._v(" "),a("tr",[a("td",[t._v("65到90")]),t._v(" "),a("td",[t._v("a到z（A到Z）")])]),t._v(" "),a("tr",[a("td",[t._v("112到135")]),t._v(" "),a("td",[t._v("F1到F24")])]),t._v(" "),a("tr",[a("td",[t._v("8")]),t._v(" "),a("td",[t._v("BackSpace（退格）")])]),t._v(" "),a("tr",[a("td",[t._v("9")]),t._v(" "),a("td",[t._v("Tab")])]),t._v(" "),a("tr",[a("td",[t._v("13")]),t._v(" "),a("td",[t._v("Enter（回车）")])]),t._v(" "),a("tr",[a("td",[t._v("20")]),t._v(" "),a("td",[t._v("Caps_Lock（大写锁定）")])]),t._v(" "),a("tr",[a("td",[t._v("32")]),t._v(" "),a("td",[t._v("Space（空格键）")])]),t._v(" "),a("tr",[a("td",[t._v("37")]),t._v(" "),a("td",[t._v("Left（左箭头）")])]),t._v(" "),a("tr",[a("td",[t._v("38")]),t._v(" "),a("td",[t._v("Up（上箭头）")])]),t._v(" "),a("tr",[a("td",[t._v("39")]),t._v(" "),a("td",[t._v("Right（右箭头）")])]),t._v(" "),a("tr",[a("td",[t._v("40")]),t._v(" "),a("td",[t._v("Down（下箭头）")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"键盘操作案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#键盘操作案例","aria-hidden":"true"}},[this._v("#")]),this._v(" 键盘操作案例")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("通过 上/下/左/右 控制小点的移动")]),this._v(" "),s("li",[this._v("小点碰撞到墙壁会从相对的方向出现")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"其他交互案例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他交互案例","aria-hidden":"true"}},[this._v("#")]),this._v(" 其他交互案例")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"使用组合绘制探照灯效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用组合绘制探照灯效果","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用组合绘制探照灯效果")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"使用剪裁制作探照灯特效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用剪裁制作探照灯特效","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用剪裁制作探照灯特效")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"使用组合实现刮刮卡特效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用组合实现刮刮卡特效","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用组合实现刮刮卡特效")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"谷歌弹跳小球"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#谷歌弹跳小球","aria-hidden":"true"}},[this._v("#")]),this._v(" 谷歌弹跳小球")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("在没有鼠标介入的情况下，这些球就像有磁性一样拼成“Google”字样。")]),this._v(" "),s("li",[this._v("在鼠标移动到其中后，小球像是受到了排斥，向画布的四周扩散，然后不规则地反弹回来。")])])}],!1,null,null,null);o.options.__file="Interaction.md";s.default=o.exports}}]);