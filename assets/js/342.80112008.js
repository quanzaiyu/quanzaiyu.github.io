(window.webpackJsonp=window.webpackJsonp||[]).push([[342],{778:function(e,n,s){"use strict";s.r(n);var a=s(0),t=Object(a.a)({},function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"在-docker-中安装-jenkins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-docker-中安装-jenkins","aria-hidden":"true"}},[e._v("#")]),e._v(" 在 Docker 中安装 Jenkins")]),e._v(" "),s("h2",{attrs:{id:"使用-docker-部署-jenkins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-docker-部署-jenkins","aria-hidden":"true"}},[e._v("#")]),e._v(" 使用 Docker 部署 Jenkins")]),e._v(" "),s("p",[e._v("使用以下命令启动一个 Jenkins 容器")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ docker run \\\n  --name jenkins \\\n  --rm \\\n  -u root \\\n  -p 8080:8080 \\\n  -v jenkins-data:/var/jenkins_home \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  -v "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$HOME")]),e._v('"')]),e._v(":/home \\\n  --privileged"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true \\\n  jenkinsci/blueocean\n")])])]),s("p",[e._v("以上命令, 执行以下操作:")]),e._v(" "),s("ol",[s("li",[e._v("命名一个名叫 jenkins 的 docker 容器,")]),e._v(" "),s("li",[e._v("运行结束后删除此容器")]),e._v(" "),s("li",[e._v("使用 root 用户登录")]),e._v(" "),s("li",[e._v("将容器中 8080 端口映射到宿主机的 8080 端口")]),e._v(" "),s("li",[e._v("挂载卷, 将其中用户目录挂载到宿主机用户目录("),s("code",[e._v("~")]),e._v(")")]),e._v(" "),s("li",[e._v("由于本人使用 root 用户进行操作, 为了容器避免权限不足添加 "),s("code",[e._v("--privileged=true")]),e._v(" 参数")]),e._v(" "),s("li",[e._v("使用镜像 "),s("code",[e._v("jenkinsci/blueocean")]),e._v(" 创建容器")])]),e._v(" "),s("p",[e._v("如果不想用完就删除镜像, 可以使用:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ docker run \\\n  --name jenkins \\\n  -u root \\\n  -p 8080:8080 \\\n  -v jenkins-data:/var/jenkins_home \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  -v "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$HOME")]),e._v('"')]),e._v(":/home \\\n  --privileged"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true \\\n  jenkinsci/blueocean\n")])])]),s("p",[e._v("这样的话, 使用 "),s("code",[e._v("docker start jenkins")]),e._v(" 即可")]),e._v(" "),s("p",[e._v("如果在运行途中想要进入容器, 输入:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ docker "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("exec")]),e._v(" -it jenkins "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v("\n")])])]),s("p",[e._v("用户在宿主机上的工作空间路径为 "),s("code",[e._v("/var/lib/docker/volumes/jenkins-data/_data/workspace")])]),e._v(" "),s("h2",{attrs:{id:"安装过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装过程","aria-hidden":"true"}},[e._v("#")]),e._v(" 安装过程")]),e._v(" "),s("p",[e._v("查看控制台, 出现:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("INFO: Jenkins is fully up and running\n")])])]),s("p",[e._v("即表明运行容器启动成功, 浏览器中输入 "),s("code",[e._v("http://192.168.42.130:8080")]),e._v(" 即可看到")]),e._v(" "),s("imgLink",{attrs:{src:"date/20190101/Jenkins/001.png"}}),e._v(" "),s("p",[e._v("此处要求输入秘钥, 在控制台 "),s("code",[e._v("*")]),e._v(" 中即可看到秘钥:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("*************************************************************\n*************************************************************\n*************************************************************\n\nJenkins initial setup is required. An admin user has been created and a password generated.\nPlease use the following password to proceed to installation:\n\na7fae2529edb4f0392d427b5355613d7\n\nThis may also be found at: /var/jenkins_home/secrets/initialAdminPassword\n\n*************************************************************\n*************************************************************\n*************************************************************\n")])])]),s("p",[e._v("如果没记住, 可以在 "),s("code",[e._v("/var/jenkins_home/secrets/initialAdminPassword")]),e._v(" 中看到")]),e._v(" "),s("imgLink",{attrs:{src:"date/20190101/Jenkins/002.png"}}),e._v(" "),s("p",[e._v("接下来进行插件安装(需要梯子, 否则可能提示 "),s("code",[e._v("This Jenkins instance appears to be offline")]),e._v(")")]),e._v(" "),s("imgLink",{attrs:{src:"date/20190101/Jenkins/003.png"}}),e._v(" "),s("imgLink",{attrs:{src:"date/20190101/Jenkins/004.png"}}),e._v(" "),s("p",[e._v("创建管理员")]),e._v(" "),s("imgLink",{attrs:{src:"date/20190101/Jenkins/005.png"}}),e._v(" "),s("p",[e._v("设置实例地址")]),e._v(" "),s("imgLink",{attrs:{src:"date/20190101/Jenkins/006.png"}}),e._v(" "),s("p",[e._v("即可安装成功")]),e._v(" "),s("imgLink",{attrs:{src:"date/20190101/Jenkins/007.png"}})],1)},[],!1,null,null,null);n.default=t.exports}}]);