(window.webpackJsonp=window.webpackJsonp||[]).push([[674],{248:function(t,s,a){"use strict";a.r(s);var n={props:["slot-key"],mounted(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},e=a(0),o=Object(e.a)(n,function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.slotKey}},[a("h1",{attrs:{id:"macosx-开发环境搭建踩坑记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#macosx-开发环境搭建踩坑记","aria-hidden":"true"}},[t._v("#")]),t._v(" MacOSX 开发环境搭建踩坑记")]),t._v(" "),a("p",[t._v("最近公司有同事离职，正好空出一部Mac，由于之前接触比较少，正好熟悉一下，于是就申请使用这台机子。")]),t._v(" "),a("p",[t._v("首先得装下环境吧，nginx、php、mysql、node 等，一个不能少。")]),t._v(" "),a("p",[t._v("这一装，把我折腾得，各种操作习惯可以培养，但是搭建环境的时候，踩了不少坑，把整个人都弄得不好了。")]),t._v(" "),a("p",[t._v("应该是同事离职没把他安装的环境清理干净，却把自己的账户删掉了，我在安装各种环境的时候各种冲突，好吧，有冲突也正常，那我把你安装的环境清理干净行再从新安装得了吧。结果，当我卸载一些软件的时候，刷刷刷，一大堆错误...")]),t._v(" "),a("h2",{attrs:{id:"权限问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 权限问题")]),t._v(" "),a("p",[t._v("首先是权限不够")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:locks DYT$ brew uninstall nginx\nxcrun: error: invalid active developer path "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/Library/Developer/CommandLineTools"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun\nUninstalling /usr/local/Cellar/nginx/1.10.3"),a("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("8 files, 980.9KB"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nError: Permission denied @ unlink_internal - /usr/local/var/homebrew/linked/nginx\n")])])]),a("p",[t._v("那就先赋予权限：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R "),a("span",{attrs:{class:"token variable"}},[a("span",{attrs:{class:"token variable"}},[t._v("$(")]),a("span",{attrs:{class:"token function"}},[t._v("whoami")]),a("span",{attrs:{class:"token variable"}},[t._v(")")])]),t._v(" /usr/local/var/homebrew/\n// or\n"),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R "),a("span",{attrs:{class:"token variable"}},[t._v("$USER")]),t._v(":admin /usr/local/var/homebrew/\n")])])]),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/auccy/article/details/54620454",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装homebrew 失败的解决方案"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://stackoverflow.com/questions/48273930/mac-os-failed-to-install-mongodb-with-homebrew-due-to-permission-issue",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mac OS - Failed to install mongodb with Homebrew due to Permission Issue"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/loveyangaddddd/p/8118501.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mac brew install nginx遇到的坑"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"卸载重装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载重装","aria-hidden":"true"}},[t._v("#")]),t._v(" 卸载重装")]),t._v(" "),a("p",[t._v("再次卸载，终于成功了")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:locks DYT$ brew uninstall nginx\nUninstalling /usr/local/Cellar/nginx/1.10.3"),a("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("8 files, 980.9KB"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("接下来是安装，继续报错：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:locks DYT$ brew "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx\nUpdating Homebrew"),a("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Installing dependencies "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" nginx: openssl, pcre\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Installing nginx dependency: openssl\nxcrun: error: invalid active developer path "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/Library/Developer/CommandLineTools"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun\nError: Failure "),a("span",{attrs:{class:"token keyword"}},[t._v("while")]),t._v(" executing: "),a("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" config --local --replace-all homebrew.private "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n")])])]),a("p",[t._v("查了下资料，解决方案为：")]),t._v(" "),a("p",[t._v("打开终端输入")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("xcode-select --install\n")])])]),a("p",[t._v("回车后，系统弹出下载xcode，点击确认，下载完成后即可。（实际上不是下载xcode，而是下载xcode有关插件，下载时长约1分钟）")]),t._v(" "),a("p",[t._v("出现这个错误原因猜想可能是因为之前安装过xcode卸载后出现的。")]),t._v(" "),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/kedongjun/article/details/51470506",target:"_blank",rel:"noopener noreferrer"}},[t._v("[问题] mac执行git命令出现xcrun: error: invalid active developer path解决方法"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://my.oschina.net/johnsken/blog/1801880",target:"_blank",rel:"noopener noreferrer"}},[t._v("【Homebrew】Error: Failure while executing: git config --local --replace-all homebrew.private true"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("这下好了，终于装上了")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:locks DYT$ brew "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx\nUpdating Homebrew"),a("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Installing dependencies "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" nginx: pcre\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Installing nginx dependency: pcre\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Downloading https://homebrew.bintray.com/bottles/pcre-8.42.high_sierra.bottl\n"),a("span",{attrs:{class:"token comment"}},[t._v("######################################################################## 100.0%")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Pouring pcre-8.42.high_sierra.bottle.tar.gz\n🍺  /usr/local/Cellar/pcre/8.42: 204 files, 5.3MB\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Installing nginx\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Downloading https://homebrew.bintray.com/bottles/nginx-1.15.0.high_sierra.bo\n"),a("span",{attrs:{class:"token comment"}},[t._v("######################################################################## 100.0%")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Pouring nginx-1.15.0.high_sierra.bottle.tar.gz\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Caveats\nDocroot is: /usr/local/var/www\n\nThe default port has been "),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /usr/local/etc/nginx/nginx.conf to 8080 so that\nnginx can run without sudo.\n\nnginx will load all files "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /usr/local/etc/nginx/servers/.\n\nTo have launchd start nginx now and restart at login:\n  brew services start nginx\nOr, "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" you don't want/need a background "),a("span",{attrs:{class:"token function"}},[t._v("service")]),t._v(" you can just run:\n  nginx\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Summary\n🍺  /usr/local/Cellar/nginx/1.15.0: 23 files, 1.4MB\n")])])]),a("p",[t._v("看到安装的路径为："),a("code",[t._v("/usr/local/Cellar/nginx/1.15.0")])]),t._v(" "),a("h2",{attrs:{id:"开启-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启-nginx","aria-hidden":"true"}},[t._v("#")]),t._v(" 开启 nginx")]),t._v(" "),a("p",[t._v("开启nginx：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:Cellar DYT$ brew services start nginx\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Successfully started "),a("span",{attrs:{class:"token variable"}},[a("span",{attrs:{class:"token variable"}},[t._v("`")]),t._v("nginx"),a("span",{attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("label: homebrew.mxcl.nginx"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("显示成功了，结果我一打开："),a("code",[t._v("http://localhost")]),t._v("，打脸了，报个 "),a("code",[t._v("ERR_CONNECTION_REFUSED")]),t._v("，此时我的内心是奔溃的。")]),t._v(" "),a("p",[t._v("重启也无果、关闭")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:Cellar DYT$ brew services restart nginx\nStopping "),a("span",{attrs:{class:"token variable"}},[a("span",{attrs:{class:"token variable"}},[t._v("`")]),t._v("nginx"),a("span",{attrs:{class:"token variable"}},[t._v("`")])]),a("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("might take a while"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Successfully stopped "),a("span",{attrs:{class:"token variable"}},[a("span",{attrs:{class:"token variable"}},[t._v("`")]),t._v("nginx"),a("span",{attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("label: homebrew.mxcl.nginx"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Successfully started "),a("span",{attrs:{class:"token variable"}},[a("span",{attrs:{class:"token variable"}},[t._v("`")]),t._v("nginx"),a("span",{attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("label: homebrew.mxcl.nginx"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nMac-mini:Cellar DYT$ brew services stop nginx\nStopping "),a("span",{attrs:{class:"token variable"}},[a("span",{attrs:{class:"token variable"}},[t._v("`")]),t._v("nginx"),a("span",{attrs:{class:"token variable"}},[t._v("`")])]),a("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("might take a while"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Successfully stopped "),a("span",{attrs:{class:"token variable"}},[a("span",{attrs:{class:"token variable"}},[t._v("`")]),t._v("nginx"),a("span",{attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("label: homebrew.mxcl.nginx"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("查看一下nginx的具体信息")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:Cellar DYT$ brew info nginx\nnginx: stable 1.15.0 "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bottled"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", HEAD\nHTTP"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("S"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" server and reverse proxy, and IMAP/POP3 proxy server\nhttps://nginx.org/\n/usr/local/Cellar/nginx/1.15.0 "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("23 files, 1.4MB"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" *\n  Poured from bottle on 2018-07-09 at 13:04:00\nFrom: https://github.com/Homebrew/homebrew-core/blob/master/Formula/nginx.rb\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Dependencies\nRequired: openssl ✔, pcre ✔\nOptional: passenger ✘\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Options\n--with-passenger\n\tCompile with support "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" Phusion Passenger module\n--HEAD\n\tInstall HEAD version\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Caveats\nDocroot is: /usr/local/var/www\n\nThe default port has been "),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /usr/local/etc/nginx/nginx.conf to 8080 so that\nnginx can run without sudo.\n\nnginx will load all files "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /usr/local/etc/nginx/servers/.\n\nTo have launchd start nginx now and restart at login:\n  brew services start nginx\nOr, "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" you don't want/need a background "),a("span",{attrs:{class:"token function"}},[t._v("service")]),t._v(" you can just run:\n  nginx\n")])])]),a("p",[t._v("好吧，试试直接启动")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:Cellar DYT$ nginx\nnginx: "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("warn"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" the "),a("span",{attrs:{class:"token string"}},[t._v('"user"')]),t._v(" directive makes sense only "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" the master process runs with super-user privileges, ignored "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /usr/local/etc/nginx/nginx.conf:2\nnginx: "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emerg"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" bind"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" to 0.0.0.0:80 failed "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("13: Permission denied"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("又报个 "),a("code",[t._v("Permission denied")]),t._v("，nginx 不允许低于1000的端口直接启动，于是附加管理员权限启动:")]),t._v(" "),a("p",[t._v("再重新启动：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:Cellar DYT$ "),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" nginx -c /usr/local/etc/nginx/nginx.conf\nPassword:\nnginx: "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emerg"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" getpwnam"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"jack"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" failed "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /usr/local/etc/nginx/nginx.conf:2\n")])])]),a("p",[t._v("又报 "),a("code",[t._v('getpwnam("jack")')]),t._v("，查看了文件 /usr/local/etc/nginx/nginx.conf，发现里面的配置还是之前同事的配置，注释了以下一行：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("#user jack admin;")]),t._v("\n")])])]),a("p",[t._v("再次启动")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:~ DYT$ "),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" nginx\nPassword:\nnginx: "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emerg"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" bind"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" to 0.0.0.0:80 failed "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("48: Address already "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" use"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nnginx: "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emerg"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" bind"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" to 0.0.0.0:80 failed "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("48: Address already "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" use"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nnginx: "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emerg"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" bind"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" to 0.0.0.0:80 failed "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("48: Address already "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" use"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nnginx: "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emerg"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" bind"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" to 0.0.0.0:80 failed "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("48: Address already "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" use"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nnginx: "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emerg"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" bind"),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" to 0.0.0.0:80 failed "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("48: Address already "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" use"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("我尼天，这么多，查看了下 "),a("code",[t._v("/usr/local/etc/nginx/nginx.conf")]),t._v("，发现最后有一句：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("include servers/*.conf"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("说明在 "),a("code",[t._v("/usr/local/etc/nginx/servers/")]),t._v(" 下的所有 conf 都被解析，配置为虚拟主机，")]),t._v(" "),a("p",[t._v("打开了此目录下其中一个文件 "),a("code",[t._v("dytadmin.ynhdkc.com.conf")]),t._v("，的确是配置了虚拟主机：")]),t._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),a("span",{attrs:{class:"token number"}},[t._v("80")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  www"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dytAdmin"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com dytadmin"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v("   "),a("span",{attrs:{class:"token string"}},[t._v('"/usr/local/var/www/dytAdmin/public"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("#autoindex  on;")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("!")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("e "),a("span",{attrs:{class:"token variable"}},[t._v("$request_filename")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{attrs:{class:"token keyword"}},[t._v("rewrite")]),t._v("  "),a("span",{attrs:{class:"token operator"}},[t._v("^")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$  "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php"),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("s"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("$"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("  last"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),a("span",{attrs:{class:"token keyword"}},[t._v("break")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" \\"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("php")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$ "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("proxy_connect_timeout")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("300")]),t._v("s"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("proxy_send_timeout")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("300")]),t._v("s"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("proxy_read_timeout")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("300")]),t._v("s"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_pass")]),t._v("   "),a("span",{attrs:{class:"token number"}},[t._v("127.0")]),a("span",{attrs:{class:"token number"}},[t._v(".0")]),a("span",{attrs:{class:"token number"}},[t._v(".1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token number"}},[t._v("9001")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_index")]),t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_split_path_info")]),t._v("  "),a("span",{attrs:{class:"token operator"}},[t._v("^")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("U"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\\"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token operator"}},[t._v("?")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("+")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_param")]),t._v("  SCRIPT_FILENAME  "),a("span",{attrs:{class:"token variable"}},[t._v("$document_root")]),a("span",{attrs:{class:"token variable"}},[t._v("$fastcgi_script_name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_param")]),t._v("  PATH_INFO  "),a("span",{attrs:{class:"token variable"}},[t._v("$fastcgi_path_info")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_param")]),t._v("  PATH_TRANSLATED  "),a("span",{attrs:{class:"token variable"}},[t._v("$document_root")]),a("span",{attrs:{class:"token variable"}},[t._v("$fastcgi_path_info")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("include")]),t._v("        fastcgi_params"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("回到 "),a("code",[t._v("/usr/local/etc/nginx/nginx.conf")]),t._v("，注释之：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("#include servers/*.conf;")]),t._v("\n")])])]),a("p",[t._v("重新加载 nginx 配置：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:Cellar DYT$ "),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" nginx -s reload\n")])])]),a("p",[t._v("如果执行 "),a("code",[t._v("nginx -s reload")]),t._v(" 重启服务器报以下错误信息")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('nginx: [error] open() "/usr/local/var/run/nginx.pid" failed (2: No such file or directory)\n')])])]),a("p",[t._v("执行以下命令即可")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("nginx -c /usr/local/etc/nginx/nginx.conf\n")])])]),a("p",[t._v("查看端口 "),a("code",[t._v("netstat -anL")]),t._v(" （https://www.v2ex.com/t/177896）")]),t._v(" "),a("p",[t._v("可以看到端口已经启动成功，touch 了一个 "),a("code",[t._v("index.php")]),t._v("，输入了")]),t._v(" "),a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token php language-php"}},[a("span",{attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("phpinfo")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token delimiter important"}},[t._v("?>")])]),t._v("\n")])])]),a("p",[t._v("貌似终于跑起来了，浏览器输入 "),a("code",[t._v("http://localhost")]),t._v("，终于出现了 "),a("code",[t._v("403 Forbidden | nginx/1.15.0")]),t._v(" ，总算进了一步。")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("/usr/local/var/www")]),t._v(" 中创建一个 "),a("code",[t._v("test.html")]),t._v(" 随便输入点内容，地址栏输入: "),a("code",[t._v("http://localhost/test.html")]),t._v(" 可以看到正常内容，suo'ming。")]),t._v(" "),a("p",[t._v("接下来就差配置 php 了。")]),t._v(" "),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.fujieace.com/nginx/err_connection_refused.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("错误代码: ERR_CONNECTION_REFUSED 解决方法"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/frankcreen/article/details/77460374",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx: [emerg] bind() to 0.0.0.0:80 failed (13: Permission denied)"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"安装-php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-php","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装 php")]),t._v(" "),a("p",[t._v("在安装之前，先查询了下apache和nginx解析PHP的原理。以前，我一直使用的是apache做web服务器,配置过apache的都应该知道，php是挂在apache下的一个模块,当http请求一个php文件的话，apache会调用php模块儿进行解析，然后返回html给apache。")]),t._v(" "),a("p",[t._v("而nginx又点不一样,它必须通过一个FastCGI的进程管理器来启动php解析,也就是是php-fpm,当nginx接受的php请求时，它会向它监听的fpm发送一个请求，当fpm接受到请求以后，在创建一个子进程来调用php进行解析。当解析完成后，回收线程，返回html给nginx，这里也引出了一个问题，那就是php鸡肋一般的单例，由于php的生命周期是伴随着一个请求的开始和结束，当这个请求完毕后，该线程就会自动回收了，所以php的静态对象，只能存在于一个请求当中，不想Java等其他语言，静态变量会一直存在。")]),t._v(" "),a("p",[t._v("注意：MacOSX 自带 Apache 和 php，不要去删除系统自带的 Apache 和 php, 我开始就删除了系统自带的Apache，导致后面php一直无法安装成功，重装了Apache后才弄好，所以建议不要轻易删除系统自带的Apache和php，高手另说。")]),t._v(" "),a("p",[t._v("php 的安装相对 nginx 来说，要复杂点，因为brew 默认没有php的包")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("brew tap homebrew/dupes\n")])])]),a("p",[t._v("执行完上面命令后，这个时候才可以安装php，不过php有很多的版本，可以用："),a("code",[t._v("brew search php")]),t._v(" 来查看具体的版本。")]),t._v(" "),a("p",[t._v("然后安装PHP")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("brew "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" php56 --with-imap --with-tidy --with-debug --with-mysql --with-fpm\nbrew "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" php70 --with-imap --with-tidy --with-debug --with-mysql --with-fpm\n")])])]),a("p",[t._v("安装的时候报个错：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:servers DYT$ brew "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" php70 --with-imap --with-tidy --with-debug --with-mysql --with-fpm\nUpdating Homebrew"),a("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nError: php@7.0 7.0.15_8 is already installed\nTo upgrade to 7.0.30, run "),a("span",{attrs:{class:"token variable"}},[a("span",{attrs:{class:"token variable"}},[t._v("`")]),t._v("brew upgrade php@7.0"),a("span",{attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n")])])]),a("p",[t._v("说是PHP已经安装过了，可以升级。")]),t._v(" "),a("p",[t._v("查看 PHP 安装信息：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:servers DYT$ brew info php\nphp: stable 7.2.7 "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bottled"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nGeneral-purpose scripting language\nhttps://secure.php.net/\nNot installed\nFrom: https://github.com/Homebrew/homebrew-core/blob/master/Formula/php.rb\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Dependencies\nBuild: httpd ✘, pkg-config ✘\nRequired: apr ✘, apr-util ✘, argon2 ✘, "),a("span",{attrs:{class:"token function"}},[t._v("aspell")]),t._v(" ✘, autoconf ✔, freetds ✘, freetype ✘, gettext ✔, glib ✘, gmp ✘, icu4c ✘, jpeg ✘, libpng ✘, libpq ✘, libsodium ✘, libzip ✘, openssl ✔, pcre ✔, unixodbc ✘, webp ✘\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Caveats\nTo "),a("span",{attrs:{class:"token function"}},[t._v("enable")]),t._v(" PHP "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Apache add the following to httpd.conf and restart Apache:\n    LoadModule php7_module /usr/local/opt/php/lib/httpd/modules/libphp7.so\n\n    "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("FilesMatch \\.php$"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        SetHandler application/x-httpd-php\n    "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("/FilesMatch"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\nFinally, check DirectoryIndex includes index.php\n    DirectoryIndex index.php index.html\n\nThe php.ini and php-fpm.ini "),a("span",{attrs:{class:"token function"}},[t._v("file")]),t._v(" can be found in:\n    /usr/local/etc/php/7.2/\n\nTo have launchd start php now and restart at login:\n  brew services start php\nOr, "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" you don't want/need a background "),a("span",{attrs:{class:"token function"}},[t._v("service")]),t._v(" you can just run:\n  php-fpm\n")])])]),a("p",[t._v("看见上面的输出，缺少很多依赖包，于是果断执行升级以自动安装这些依赖：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:servers DYT$ brew upgrade php@7.0\nUpdating Homebrew"),a("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Upgrading 1 outdated package, with result:\nphp@7.0 7.0.15_8 -"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" 7.0.30_1\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Upgrading php@7.0 \n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Installing dependencies "),a("span",{attrs:{class:"token keyword"}},[t._v("for")]),t._v(" php@7.0: apr, apr-util, aspell, freetds, libpng, freetype, libffi, glib, gmp, icu4c, jpeg, libpq, libtool, libzip, mhash, mcrypt, unixodbc, webp\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Installing php@7.0 dependency: apr\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Downloading https://homebrew.bintray.com/bottles/apr-1.6.3.high_sierra.bottl\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),a("span",{attrs:{class:"token comment"}},[t._v("######################################################################## 100.0%")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Pouring php@7.0-7.0.30_1.high_sierra.bottle.tar.gz\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Caveats\nTo "),a("span",{attrs:{class:"token function"}},[t._v("enable")]),t._v(" PHP "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Apache add the following to httpd.conf and restart Apache:\n    LoadModule php7_module /usr/local/opt/php@7.0/lib/httpd/modules/libphp7.so\n    "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("FilesMatch \\.php$"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        SetHandler application/x-httpd-php\n    "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("/FilesMatch"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\nFinally, check DirectoryIndex includes index.php\n    DirectoryIndex index.php index.html\nThe php.ini and php-fpm.ini "),a("span",{attrs:{class:"token function"}},[t._v("file")]),t._v(" can be found in:\n    /usr/local/etc/php/7.0/\n\nThis formula is keg-only, "),a("span",{attrs:{class:"token function"}},[t._v("which")]),t._v(" means it was not symlinked into /usr/local,\nbecause this is an alternate version of another formula.\n\nIf you need to have this software first "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" your PATH run:\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'export PATH=\"/usr/local/opt/php@7.0/bin:"),a("span",{attrs:{class:"token variable"}},[t._v("$PATH")]),t._v("\"'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">>")]),t._v(" ~/.bash_profile\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'export PATH=\"/usr/local/opt/php@7.0/sbin:"),a("span",{attrs:{class:"token variable"}},[t._v("$PATH")]),t._v("\"'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">>")]),t._v(" ~/.bash_profile\n\nFor compilers to "),a("span",{attrs:{class:"token function"}},[t._v("find")]),t._v(" this software you may need to set:\n    LDFLAGS:  -L/usr/local/opt/php@7.0/lib\n    CPPFLAGS: -I/usr/local/opt/php@7.0/include\n\n\nTo have launchd start php@7.0 now and restart at login:\n  brew services start php@7.0\nOr, "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" you don't want/need a background "),a("span",{attrs:{class:"token function"}},[t._v("service")]),t._v(" you can just run:\n  php-fpm\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Summary\n🍺  /usr/local/Cellar/php@7.0/7.0.30_1: 502 files, 65.6MB\n")])])]),a("h2",{attrs:{id:"启动-php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动-php","aria-hidden":"true"}},[t._v("#")]),t._v(" 启动 php")]),t._v(" "),a("p",[t._v("再次查看 php 配置")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:servers DYT$ brew info php\nphp: stable 7.2.7 "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bottled"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nGeneral-purpose scripting language\nhttps://secure.php.net/\nNot installed\nFrom: https://github.com/Homebrew/homebrew-core/blob/master/Formula/php.rb\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Dependencies\nBuild: httpd ✘, pkg-config ✘\nRequired: apr ✔, apr-util ✔, argon2 ✘, "),a("span",{attrs:{class:"token function"}},[t._v("aspell")]),t._v(" ✔, autoconf ✔, freetds ✔, freetype ✔, gettext ✔, glib ✔, gmp ✔, icu4c ✔, jpeg ✔, libpng ✔, libpq ✔, libsodium ✘, libzip ✔, openssl ✔, pcre ✔, unixodbc ✔, webp ✔\n"),a("span",{attrs:{class:"token operator"}},[t._v("==")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" Caveats\nTo "),a("span",{attrs:{class:"token function"}},[t._v("enable")]),t._v(" PHP "),a("span",{attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Apache add the following to httpd.conf and restart Apache:\n    LoadModule php7_module /usr/local/opt/php/lib/httpd/modules/libphp7.so\n\n    "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("FilesMatch \\.php$"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        SetHandler application/x-httpd-php\n    "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("/FilesMatch"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\nFinally, check DirectoryIndex includes index.php\n    DirectoryIndex index.php index.html\n\nThe php.ini and php-fpm.ini "),a("span",{attrs:{class:"token function"}},[t._v("file")]),t._v(" can be found in:\n    /usr/local/etc/php/7.2/\n\nTo have launchd start php now and restart at login:\n  brew services start php\nOr, "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" you don't want/need a background "),a("span",{attrs:{class:"token function"}},[t._v("service")]),t._v(" you can just run:\n  php-fpm\n")])])]),a("p",[t._v("使用以下命令运行 php-fpm")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:php@7.0 DYT$ launchctl load -w /usr/local/opt/php70/homebrew.mxcl.php@7.0.plist\n")])])]),a("p",[t._v("再次 "),a("code",[t._v("netstat -anL")]),t._v("，发现 php-fpm 已经监听到 "),a("code",[t._v("127.0.0.1.9001")])]),t._v(" "),a("p",[t._v("修改 "),a("code",[t._v("/usr/local/etc/nginx/nginx.conf")])]),t._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" \\"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php$ "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_pass")]),t._v("   "),a("span",{attrs:{class:"token number"}},[t._v("127.0")]),a("span",{attrs:{class:"token number"}},[t._v(".0")]),a("span",{attrs:{class:"token number"}},[t._v(".1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token number"}},[t._v("9001")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_index")]),t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_param")]),t._v("  SCRIPT_FILENAME  "),a("span",{attrs:{class:"token variable"}},[t._v("$document_root")]),a("span",{attrs:{class:"token variable"}},[t._v("$fastcgi_script_name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("include")]),t._v("        fastcgi_params"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("重新加载 nginx 配置： "),a("code",[t._v("sudo nginx -s reload")])]),t._v(" "),a("p",[t._v("再次输入 "),a("code",[t._v("http://localhost/index.php")]),t._v("，我亲爱的 php 信息界面终于出现了")]),t._v(" "),a("imgLink",{attrs:{src:"shortcut/066.png/small"}}),t._v(" "),a("p",[t._v("附上最终的 nginx.conf 配置文件：")]),t._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("user")]),t._v(" DYT admin"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("worker_processes")]),t._v("  "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("#error_log  logs/error.log;")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("#error_log  logs/error.log  notice;")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("#error_log  logs/error.log  info;")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("#pid        logs/nginx.pid;")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("events")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("worker_connections")]),t._v("  "),a("span",{attrs:{class:"token number"}},[t._v("1024")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("http")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("include")]),t._v("       mime"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("types")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("default_type")]),t._v("  application"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("octet"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("stream"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#                  '$status $body_bytes_sent \"$http_referer\" '")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v('#                  \'"$http_user_agent" "$http_x_forwarded_for"\';')]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#access_log  logs/access.log  main;")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("sendfile")]),t._v("        on"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#tcp_nopush     on;")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#keepalive_timeout  0;")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("keepalive_timeout")]),t._v("   "),a("span",{attrs:{class:"token number"}},[t._v("300")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#gzip  on;")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),a("span",{attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),a("span",{attrs:{class:"token number"}},[t._v("80")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),a("span",{attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  localhost"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{attrs:{class:"token comment"}},[t._v("#charset koi8-r;")]),t._v("\n\n        "),a("span",{attrs:{class:"token comment"}},[t._v("#access_log  logs/host.access.log  main;")]),t._v("\n\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v("   "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Users"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("DYT"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("Desktop"),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("test"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{attrs:{class:"token comment"}},[t._v("#error_page  404              /404.html;")]),t._v("\n\n        "),a("span",{attrs:{class:"token comment"}},[t._v("# redirect server error pages to the static page /50x.html")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("#")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("error_page")]),t._v("   "),a("span",{attrs:{class:"token number"}},[t._v("500")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("502")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("503")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("504")]),t._v("  "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token number"}},[t._v("50")]),t._v("x"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{attrs:{class:"token comment"}},[t._v("# proxy the PHP scripts to Apache listening on 127.0.0.1:80")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("#")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("#location ~ \\.php$ {")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("#    proxy_pass   http://127.0.0.1;")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("#}")]),t._v("\n\n        "),a("span",{attrs:{class:"token comment"}},[t._v("# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("#")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" \\"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php$ "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_pass")]),t._v("   "),a("span",{attrs:{class:"token number"}},[t._v("127.0")]),a("span",{attrs:{class:"token number"}},[t._v(".0")]),a("span",{attrs:{class:"token number"}},[t._v(".1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token number"}},[t._v("9001")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_index")]),t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_param")]),t._v("  SCRIPT_FILENAME  "),a("span",{attrs:{class:"token variable"}},[t._v("$document_root")]),a("span",{attrs:{class:"token variable"}},[t._v("$fastcgi_script_name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("include")]),t._v("        fastcgi_params"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{attrs:{class:"token comment"}},[t._v("# deny access to .htaccess files, if Apache's document root")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("# concurs with nginx's one")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("#")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("\\"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ht "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("deny")]),t._v("  all"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("# another virtual host using mix of IP-, name-, and port-based configuration")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("# HTTPS server")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#server {")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#    listen       443 ssl;")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#    server_name  localhost;")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#    ssl_certificate      cert.pem;")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#    ssl_certificate_key  cert.key;")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#    ssl_session_cache    shared:SSL:1m;")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#    ssl_session_timeout  5m;")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#    ssl_ciphers  HIGH:!aNULL:!MD5;")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#    ssl_prefer_server_ciphers  on;")]),t._v("\n\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#    location / {")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#        root   html;")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#        index  index.html index.htm;")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#    }")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("#}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("############################ servers ##########################")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("# include servers/*.conf;")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/255889464b2f",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mac 平台搭建PHP开发环境:Nginx、PHP、MySQL"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"设置-php-启动快捷指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置-php-启动快捷指令","aria-hidden":"true"}},[t._v("#")]),t._v(" 设置 php 启动快捷指令")]),t._v(" "),a("p",[t._v("打开 "),a("code",[t._v("~/.bash_profile")]),t._v("，添加")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("alias")]),t._v(" php70.start"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("launchctl\\ load\\ -w\\ /usr/local/opt/php70/homebrew.mxcl.php@7.0.plist\n"),a("span",{attrs:{class:"token function"}},[t._v("alias")]),t._v(" php70.stop"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("launchctl\\ unload\\ -w\\ /usr/local/opt/php70/homebrew.mxcl.php@7.0.plist\n")])])]),a("p",[t._v("快捷指令设置之后，终端执行 "),a("code",[t._v("source ~/.bash_profile")]),t._v("，就可以用 "),a("code",[t._v("php70.start")]),t._v(" 和 "),a("code",[t._v("php70.stop")]),t._v(" 来启动和停止php-fpm了。")]),t._v(" "),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/ym1992it/p/4599112.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("mac搭建nginx与php"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"设置-php-开机启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置-php-开机启动","aria-hidden":"true"}},[t._v("#")]),t._v(" 设置 php 开机启动")]),t._v(" "),a("p",[t._v("如果想设开机启动的话")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p ~/Library/LaunchAgents\n"),a("span",{attrs:{class:"token function"}},[t._v("cp")]),t._v(" /usr/local/opt/php70/homebrew.mxcl.php@7.0.plist ~/Library/LaunchAgents/\n\nlaunchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.php@7.0.plist "),a("span",{attrs:{class:"token comment"}},[t._v("#开机启动")]),t._v("\nlaunchctl unload ~/Library/LaunchAgents/homebrew.mxcl.php@7.0.plist "),a("span",{attrs:{class:"token comment"}},[t._v("#取消开机启动")]),t._v("\n")])])]),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/qq_37847473/article/details/69259100",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mac下安装php7.0+nginx"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/4addd9b455f2",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mac中的定时任务利器：launchctl"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"配置-nginx-虚拟主机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-nginx-虚拟主机","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置 nginx 虚拟主机")]),t._v(" "),a("p",[t._v("第一种方式：直接在 nginx.conf 中配置：")]),t._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("http")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),a("span",{attrs:{class:"token number"}},[t._v("80")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  www"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dytapp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com dytapp"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("root")]),t._v("   "),a("span",{attrs:{class:"token string"}},[t._v('"/Users/DYT/Desktop/dyt-app/public"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("#autoindex  on;")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("!")]),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("e "),a("span",{attrs:{class:"token variable"}},[t._v("$request_filename")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token keyword"}},[t._v("rewrite")]),t._v("  "),a("span",{attrs:{class:"token operator"}},[t._v("^")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$  "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php"),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("s"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("$"),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v("  last"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{attrs:{class:"token keyword"}},[t._v("break")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("location")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v(" \\"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("php")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("*")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$ "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("proxy_connect_timeout")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("300")]),t._v("s"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("proxy_send_timeout")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("300")]),t._v("s"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("proxy_read_timeout")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("300")]),t._v("s"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_pass")]),t._v("   "),a("span",{attrs:{class:"token number"}},[t._v("127.0")]),a("span",{attrs:{class:"token number"}},[t._v(".0")]),a("span",{attrs:{class:"token number"}},[t._v(".1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token number"}},[t._v("9001")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_index")]),t._v("  "),a("span",{attrs:{class:"token keyword"}},[t._v("index")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_split_path_info")]),t._v("  "),a("span",{attrs:{class:"token operator"}},[t._v("^")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("U"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("\\"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("php"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token operator"}},[t._v("?")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token operator"}},[t._v("+")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_param")]),t._v("  SCRIPT_FILENAME  "),a("span",{attrs:{class:"token variable"}},[t._v("$document_root")]),a("span",{attrs:{class:"token variable"}},[t._v("$fastcgi_script_name")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_param")]),t._v("  PATH_INFO  "),a("span",{attrs:{class:"token variable"}},[t._v("$fastcgi_path_info")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("fastcgi_param")]),t._v("  PATH_TRANSLATED  "),a("span",{attrs:{class:"token variable"}},[t._v("$document_root")]),a("span",{attrs:{class:"token variable"}},[t._v("$fastcgi_path_info")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("include")]),t._v("        fastcgi_params"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("# ...")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("第二种方式：include servers/*.conf")]),t._v(" "),a("p",[t._v("还记得之前注释掉过一行语句：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("include servers/*.conf;\n")])])]),a("p",[t._v("将之打开，即可加载 "),a("code",[t._v("/usr/local/etc/nginx/servers")]),t._v(" 下的所有文件作为虚拟主机配置，比如将方式一中的 server 部分保存到名为 "),a("code",[t._v("www.dytapp.com.conf")]),t._v(" 的文件中，重新加载配置文件也能生效。")]),t._v(" "),a("p",[t._v("不过无论哪一种方式，都记得在 "),a("code",[t._v("/etc/hosts")]),t._v(" 文件中加入相关配置：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("127.0.0.1   localhost\n127.0.0.1   www.dytapp.com\n127.0.0.1   dytapp.com\n")])])]),a("h2",{attrs:{id:"nginx-开机启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-开机启动","aria-hidden":"true"}},[t._v("#")]),t._v(" nginx 开机启动")]),t._v(" "),a("h3",{attrs:{id:"使用-homebrew-安装时的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-homebrew-安装时的配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用 homebrew 安装时的配置")]),t._v(" "),a("p",[t._v("如果通过 Homebrew 安装的 nginx，可以通过以下步骤设置开机启动")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("cp")]),t._v(" /usr/local/Cellar/nginx/【nginx版本】/homebrew.mxcl.nginx.plist ~/Library/LaunchAgents/\nlaunchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist\n"),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("chown")]),t._v(" root:wheel /usr/local/Cellar/nginx/【nginx版本】/bin/nginx\n"),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("chmod")]),t._v(" u+s /usr/local/Cellar/nginx/【nginx版本】/bin/nginx\n")])])]),a("h3",{attrs:{id:"手动配置开机启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手动配置开机启动","aria-hidden":"true"}},[t._v("#")]),t._v(" 手动配置开机启动")]),t._v(" "),a("p",[t._v("如果不是通过 homebrew 安装的 nginx，可以通过手工创建 plist 加入定时任务的方式启动")]),t._v(" "),a("ol",[a("li",[t._v("新建文件")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" vim /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\n")])])]),a("p",[t._v("输入")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8"?>')]),t._v("\n"),a("span",{attrs:{class:"token doctype"}},[t._v('<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">')]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("plist")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("version")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1.0"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dict")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("key")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Label"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("key")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("string")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("homebrew.mxcl.nginx"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("string")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("key")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("RunAtLoad"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("key")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("key")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("KeepAlive"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("key")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("key")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("ProgramArguments"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("key")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("array")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("string")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/usr/local/opt/nginx/bin/nginx"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("string")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("string")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("-g"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("string")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("string")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("daemon off;"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("string")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("array")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("key")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("WorkingDirectory"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("key")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("string")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("/usr/local"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("string")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dict")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("plist")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("修改权限")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("chmod")]),t._v(" 644 /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\n")])])]),a("p",[t._v("如果出现 "),a("code",[t._v("Path had bad ownership/permissions")]),t._v(" 问题，表示权限不够，可以将之更改为 root 权限：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("chown")]),t._v(" root /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("注册为系统服务")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" launchctl load -w /Library/LaunchDaemons/homebrew.mxcl.nginx.plist \n")])])]),a("p",[t._v("卸载为")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" launchctl unload -w /Library/LaunchDaemons/homebrew.mxcl.nginx.plist \n")])])]),a("p",[t._v("查看是否已经加入定时任务")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("launchctl list "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("grep")]),t._v(" nginx\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("重启后查看nginx是否启动")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("ps")]),t._v(" -ef "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("grep")]),t._v(" nginx\n")])])]),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/u013091013/article/details/53393406",target:"_blank",rel:"noopener noreferrer"}},[t._v("mac nginx设为开机启动"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/nick_php/article/details/53868845",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mac 通过 Homebrew 安装 nginx 并设置开机启动配置"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"安装-mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-mysql","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装 mysql")]),t._v(" "),a("p",[t._v("发现系统中本身就有一个 homebrew 安装的 MySQL，准备先卸载，再使用官方安装包进行安装。")]),t._v(" "),a("p",[t._v("MySQL 官方镜像地址： https://dev.mysql.com/downloads/file/?id=475582")]),t._v(" "),a("imgLink",{attrs:{src:"shortcut/069.png/small"}}),t._v(" "),a("imgLink",{attrs:{src:"shortcut/067.png/small"}}),t._v(" "),a("p",[t._v("安装完成后，系统会自动生成一个管理员密码，之后可以修改：")]),t._v(" "),a("imgLink",{attrs:{src:"shortcut/068.png/small"}}),t._v(" "),a("p",[t._v("可以在偏好设置中找到 MySQL 设置，可以在此开启 MySQL：")]),t._v(" "),a("imgLink",{attrs:{src:"shortcut/070.png/small"}}),t._v(" "),a("p",[a("strong",[t._v("将命令添加到系统命令")])]),t._v(" "),a("ul",[a("li",[t._v("(1). 进入 "),a("code",[t._v("/usr/local/mysql/bin")]),t._v("，查看此目录下是否有mysql。")]),t._v(" "),a("li",[t._v("(2). 执行 "),a("code",[t._v("vim ~/.bash_profile")]),t._v("，在该文件中添加 mysql 命令的目录，"),a("code",[t._v("PATH=$PATH:/usr/local/mysql/bin")]),t._v("，添加完成后，按esc，然后输入wq保存。")]),t._v(" "),a("li",[t._v("(3). 最后在命令行输入 "),a("code",[t._v("source ~/.bash_profile")]),t._v("。")])]),t._v(" "),a("p",[a("strong",[t._v("初始化用户密码")])]),t._v(" "),a("ul",[a("li",[t._v("通过 "),a("code",[t._v("mysql -uroot -p")]),t._v(" 登录mysql, 输入之前保存的密码。")]),t._v(" "),a("li",[t._v("重置 "),a("code",[t._v("mysql")]),t._v(" 初始密码，使用查询语句 "),a("code",[t._v("SET PASSWORD FOR 'root'@'localhost' = PASSWORD('newpassword');")]),t._v(" 即可。")])]),t._v(" "),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/lkxlaz/article/details/54580735",target:"_blank",rel:"noopener noreferrer"}},[t._v("[Mac] 记录使用Homebrew安装Mysql全过程"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/pansanday/article/details/54915916",target:"_blank",rel:"noopener noreferrer"}},[t._v("在Mac上安装mysql数据库"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/fd3aae701db9",target:"_blank",rel:"noopener noreferrer"}},[t._v("mac安装mysql的两种方法（含配置）"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"安装-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-node","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装 node")]),t._v(" "),a("p",[t._v("本来系统里面我是看到有 node 的，结果一执行：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:bin DYT$ "),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" -v\ndyld: Library not loaded: /usr/local/opt/icu4c/lib/libicui18n.59.dylib\n  Referenced from: /usr/local/bin/node\n  Reason: image not found\nAbort trap: 6\n")])])]),a("p",[t._v("查阅资料，解决方案还不算太难：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("brew uninstall --ignore-dependencies node\nbrew uninstall --ignore-dependencies icu4c\nbrew "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" icu4c\nbrew "),a("span",{attrs:{class:"token function"}},[t._v("link")]),t._v(" icu4c --force\nbrew "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" node\n")])])]),a("p",[t._v("再运行 node")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Mac-mini:~ DYT$ node -v\nv10.6.0\nMac-mini:~ DYT$ "),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" -v\n6.1.0\n")])])]),a("p",[t._v("参考：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/s_521_h/article/details/77017152",target:"_blank",rel:"noopener noreferrer"}},[t._v("【原】Mac下使用Brew安装node出错"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"附录：一些常用的路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附录：一些常用的路径","aria-hidden":"true"}},[t._v("#")]),t._v(" 附录：一些常用的路径")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# nginx 相关")]),t._v("\n/usr/local/etc/nginx/nginx.conf "),a("span",{attrs:{class:"token comment"}},[t._v("# nginx 主配置文件")]),t._v("\n/usr/local/Cellar/nginx/1.15.0/ "),a("span",{attrs:{class:"token comment"}},[t._v("# nginx 安装目录")]),t._v("\n/usr/local/etc/nginx/servers/ "),a("span",{attrs:{class:"token comment"}},[t._v("# nginx 虚拟主机文件存放目录")]),t._v("\n/usr/local/var/www/ "),a("span",{attrs:{class:"token comment"}},[t._v("# 默认站点目录")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("ps")]),t._v(" -ef "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("grep")]),t._v(" nginx "),a("span",{attrs:{class:"token comment"}},[t._v("# 查看 nginx 是否启动")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# php 相关")]),t._v("\n/usr/local/etc/php/7.0/ "),a("span",{attrs:{class:"token comment"}},[t._v("# php 配置文件路径")]),t._v("\n/usr/local/etc/php/7.0/php.ini "),a("span",{attrs:{class:"token comment"}},[t._v("# php 配置文件")]),t._v("\n/usr/local/Cellar/php@7.0/7.0.30_1/ "),a("span",{attrs:{class:"token comment"}},[t._v("# PHP 安装目录")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 其他")]),t._v("\n/usr/local/var/homebrew/ "),a("span",{attrs:{class:"token comment"}},[t._v("# homebrew 配置相关目录")]),t._v("\n~/.bash_profile "),a("span",{attrs:{class:"token comment"}},[t._v("# 别名文件")]),t._v("\n/etc/hosts "),a("span",{attrs:{class:"token comment"}},[t._v("# hosts 文件")]),t._v("\n")])])]),a("h2",{attrs:{id:"附录：一些常用的命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#附录：一些常用的命令","aria-hidden":"true"}},[t._v("#")]),t._v(" 附录：一些常用的命令")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# nginx 相关")]),t._v("\nbrew "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx "),a("span",{attrs:{class:"token comment"}},[t._v("# 安装 nginx")]),t._v("\nbrew uninstall nginx "),a("span",{attrs:{class:"token comment"}},[t._v("# 卸载 nginx")]),t._v("\nbrew services restart nginx "),a("span",{attrs:{class:"token comment"}},[t._v("# 启动 nginx 服务")]),t._v("\nbrew services stop nginx "),a("span",{attrs:{class:"token comment"}},[t._v("# 关闭 nginx 服务")]),t._v("\nbrew info nginx "),a("span",{attrs:{class:"token comment"}},[t._v("# 查看 nginx 相关信息")]),t._v("\n\n"),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" nginx "),a("span",{attrs:{class:"token comment"}},[t._v("# 使用缺省配置启动 nginx 服务")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" nginx -c /usr/local/etc/nginx/nginx.conf "),a("span",{attrs:{class:"token comment"}},[t._v("# 使用制定配置文件启动 nginx 服务")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" nginx -s reload "),a("span",{attrs:{class:"token comment"}},[t._v("# 重新加载 nginx 配置")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" nginx -s reopen "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" quit "),a("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" stop "),a("span",{attrs:{class:"token comment"}},[t._v("# 开启 退出 停止 ")]),t._v("\nnginx -h "),a("span",{attrs:{class:"token comment"}},[t._v("# 查看 nginx 命令参数 ")]),t._v("\nnginx -t "),a("span",{attrs:{class:"token comment"}},[t._v("# 测试配置文件是否正确")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# php 相关")]),t._v("\nbrew search php "),a("span",{attrs:{class:"token comment"}},[t._v("# 查询 PHP 相关的包")]),t._v("\nbrew "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" php70 --with-imap --with-tidy --with-debug --with-mysql --with-fpm "),a("span",{attrs:{class:"token comment"}},[t._v("# 安装 PHP")]),t._v("\nbrew upgrade php@7.0 "),a("span",{attrs:{class:"token comment"}},[t._v("# 升级 php")]),t._v("\nbrew services start php "),a("span",{attrs:{class:"token comment"}},[t._v("# 启动 php-fpm 服务")]),t._v("\nbrew info php "),a("span",{attrs:{class:"token comment"}},[t._v("# 查看 PHP 相关信息")]),t._v("\n\nlaunchctl load -w /usr/local/opt/php70/homebrew.mxcl.php@7.0.plist "),a("span",{attrs:{class:"token comment"}},[t._v("# 启动 php-fpm 服务")]),t._v("\nlaunchctl unload -w /usr/local/opt/php70/homebrew.mxcl.php@7.0.plist "),a("span",{attrs:{class:"token comment"}},[t._v("# 关闭 php-fpm 服务")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 其他")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R "),a("span",{attrs:{class:"token variable"}},[a("span",{attrs:{class:"token variable"}},[t._v("$(")]),a("span",{attrs:{class:"token function"}},[t._v("whoami")]),a("span",{attrs:{class:"token variable"}},[t._v(")")])]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("# 更改所有者")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R "),a("span",{attrs:{class:"token variable"}},[t._v("$USER")]),t._v(":admin "),a("span",{attrs:{class:"token comment"}},[t._v("# 更改所有者")]),t._v("\nxcode-select --install "),a("span",{attrs:{class:"token comment"}},[t._v("# 下载并安装xcode有关插件")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("netstat")]),t._v(" -anL "),a("span",{attrs:{class:"token comment"}},[t._v("# 查看端口监听")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("source")]),t._v(" ~/.bash_profile "),a("span",{attrs:{class:"token comment"}},[t._v("# 使别名生效")]),t._v("\n")])])]),a("h2",{attrs:{id:"写在后面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写在后面","aria-hidden":"true"}},[t._v("#")]),t._v(" 写在后面")]),t._v(" "),a("p",[t._v("配置得差不多了，发现有一个叫做 "),a("a",{attrs:{href:"https://www.mamp.info/en/",target:"_blank",rel:"noopener noreferrer"}},[t._v("MAMP"),a("OutboundLink")],1),t._v(" 的集成包，没早一点发现，不过经过这样的折腾，自己又精进了不少。")]),t._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/wo2niliye/article/details/49929107",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mac下用brew搭建PHP(LNMP/LAMP)开发环境"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.jianshu.com/p/b151f9687c0c",target:"_blank",rel:"noopener noreferrer"}},[t._v("MacGesture2-Mac下的全局鼠标手势"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.xia1ge.com/macgesture.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MacGesture - Mac全局鼠标手势软件，高手必备效率神器"),a("OutboundLink")],1)])])],1)},[],!1,null,null,null);o.options.__file="MacOSX_Environment.md";s.default=o.exports}}]);