(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{387:function(a,s,t){"use strict";t.r(s);var e=t(0),r=Object(e.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"添加ftp用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加ftp用户","aria-hidden":"true"}},[a._v("#")]),a._v(" 添加FTP用户")]),a._v(" "),t("h2",{attrs:{id:"创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建用户","aria-hidden":"true"}},[a._v("#")]),a._v(" 创建用户")]),a._v(" "),t("p",[a._v("设置FTP用户的账号，例如账号为 "),t("code",[a._v("ftpuser")]),a._v(" ，用户目录为 "),t("code",[a._v("/home/ftpuser")]),a._v("，且设置不允许通过ssh登录。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("useradd")]),a._v(" -d /home/ftpuser -s /sbin/nologin ftpuser\n")])])]),t("p",[a._v("如果创建用户的时候没有声明不能通过 ssh 访问，可以随后设置")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("usermod")]),a._v(" -s /sbin/nologin ftpuser\n")])])]),t("p",[a._v("设置账号对应的密码")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("passwd")]),a._v(" ftpuser\n")])])]),t("p",[a._v("或")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"password"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("passwd")]),a._v(" ftpuser --stdin\n")])])]),t("p",[a._v("这样一个用户建完，可以用这个登录，记得用普通登录不要用匿名了。登录后默认的路径为 "),t("code",[a._v("/home/ftpuser")]),a._v(" 。")]),a._v(" "),t("h2",{attrs:{id:"为用户分配主目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为用户分配主目录","aria-hidden":"true"}},[a._v("#")]),a._v(" 为用户分配主目录")]),a._v(" "),t("p",[a._v("为用户 ftpuser 创建主目录并约定：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("/home/ftpuser")]),a._v("\t为主目录, 该目录不可上传文件")]),a._v(" "),t("li",[t("code",[a._v("/home/ftpuser/pub")]),a._v("\t文件只能上传到该目录下")])]),a._v(" "),t("p",[a._v("在 /data 中创建相关的目录")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" -p /home/ftpuser/pub\n")])])]),t("p",[a._v("创建登录欢迎文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Welcome to use FTP service."')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /home/ftpuser/welcome.txt\n")])])]),t("p",[a._v("设置访问权限")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" 555 /home/ftpuser\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" 777 -R /home/ftpuser/pub\n")])])]),t("p",[a._v("设置为用户的主目录：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("usermod")]),a._v(" -d /home/ftpuser ftpuser\n")])])]),t("h2",{attrs:{id:"其他相关配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他相关配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 其他相关配置")]),a._v(" "),t("h3",{attrs:{id:"禁止匿名登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#禁止匿名登录","aria-hidden":"true"}},[a._v("#")]),a._v(" 禁止匿名登录")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("anonymous_enable"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("NO\n")])])]),t("h3",{attrs:{id:"禁止切换根目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#禁止切换根目录","aria-hidden":"true"}},[a._v("#")]),a._v(" 禁止切换根目录")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("chroot_local_user"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("YES\n")])])]),t("h3",{attrs:{id:"可写模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#可写模式","aria-hidden":"true"}},[a._v("#")]),a._v(" 可写模式")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /etc/vsftpd/vsftpd.conf "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" write_enable\nwrite_enable"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("YES\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#anon_mkdir_write_enable=YES")]),a._v("\n")])])]),t("h3",{attrs:{id:"开启监听"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启监听","aria-hidden":"true"}},[a._v("#")]),a._v(" 开启监听")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("listen"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("YES\nlisten_port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("21\nlisten_ipv6"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("NO\n")])])]),t("p",[a._v("禁止 "),t("code",[a._v("ftpusers")]),a._v(" 中的用户访问")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("userlist_enable"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("NO\n")])])])])},[],!1,null,null,null);r.options.__file="user.md";s.default=r.exports}}]);