(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{504:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"yum-插件"}},[s._v("yum 插件")]),s._v(" "),t("h2",{attrs:{id:"yum-fastestmirror"}},[s._v("yum-fastestmirror")]),s._v(" "),t("p",[s._v("自动搜索最快镜像插件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" yum-fastestmirror\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"yum-plugin-priorities"}},[s._v("yum-plugin-priorities")]),s._v(" "),t("p",[s._v("用于设置 yum 源的优先级")]),s._v(" "),t("p",[s._v("当既有本地 yum 源又有阿里源的时候，我们在装软件包的时候当然希望先用本地的yum源去安装，本地找不到可用的包时再使用阿里源去安装软件,这里就涉及到了优先级的问题，yum提供的插件 "),t("code",[s._v("yum-plugin-priorities.noarch")]),s._v(" 可以解决这个问题。")]),s._v(" "),t("h3",{attrs:{id:"_1-查看系统是否安装了优先级的插件"}},[s._v("1. 查看系统是否安装了优先级的插件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rpm -qa "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("grep")]),s._v(" yum-plugin-\nyum search yum-plugin-priorities\n"),t("span",{attrs:{class:"token comment"}},[s._v("# 用search查看是否有此插件可用")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_2-安装yum-plugin-priorities-noarch插件"}},[s._v("2. 安装yum-plugin-priorities.noarch插件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum -y "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" yum-plugin-priorities.noarch\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3-查看插件是否启用"}},[s._v("3. 查看插件是否启用")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/yum/pluginconf.d/priorities.conf\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("main"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nenabled "),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" 1\n"),t("span",{attrs:{class:"token comment"}},[s._v("# 1为启用；0为禁用")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_4-修改本地yum源优先使用"}},[s._v("4. 修改本地yum源优先使用")]),s._v(" "),t("p",[s._v("比如本地有两个 yum 源配置文件，需要将 local.repo 设置为优先，需要在对应的文件中加入 "),t("code",[s._v("priority=1")]),s._v("，数字越小优先级越高 :")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ll /etc/yum.repos.d/\ntotal 8\n-rw-r--r--. 1 root root 2573 May 15  2015 CentOS-Base.repo\n-rw-r--r--. 1 root root   67 Jun 20 06:04 local.repo\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("改写对应文件 :")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/yum.repos.d/local.repo\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("local"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nname"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("local\nbaseurl"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///opt/centos\nenabled"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("1\ngpgcheck"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("0\npriority"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("1\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("在原基础上加入 priority=1 ；数字越小优先级越高\n可以继续修改其他源的 priority 值，经测试仅配置本地源的优先级为 priority=1 就会优先使用本地源了")]),s._v(" "),t("h3",{attrs:{id:"_5-重置yum"}},[s._v("5. 重置yum")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum clean all   "),t("span",{attrs:{class:"token comment"}},[s._v("#清理yum缓存")]),s._v("\nyum list    "),t("span",{attrs:{class:"token comment"}},[s._v("#显示yum列表")]),s._v("\nyum makecache\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])}],!1,null,null,null);a.default=e.exports}}]);