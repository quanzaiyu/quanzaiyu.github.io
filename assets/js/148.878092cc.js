(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{436:function(a,t,s){"use strict";s.r(t);var e={props:["slot-key"]},r=s(0),n=Object(r.a)(e,function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.slotKey}},[s("h1",{attrs:{id:"搭建-gitlab-服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建-gitlab-服务器","aria-hidden":"true"}},[a._v("#")]),a._v(" 搭建 GitLab 服务器")]),a._v(" "),s("h2",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介","aria-hidden":"true"}},[a._v("#")]),a._v(" 简介")]),a._v(" "),s("p",[a._v("GitLab是利用 Ruby on Rails 一个开源的版本管理系统，实现一个自托管的Git项目仓库，可通过Web界面进行访问公开的或者私人项目。它拥有与Github类似的功能，能够浏览源代码，管理缺陷和注释。可以管理团队对仓库的访问，它非常易于浏览提交过的版本并提供一个文件历史库。团队成员可以利用内置的简单聊天程序(Wall)进行交流。它还提供一个代码片段收集功能可以轻松实现代码复用，便于日后有需要的时候进行查找。")]),a._v(" "),s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("h3",{attrs:{id:"apt-get方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#apt-get方式","aria-hidden":"true"}},[a._v("#")]),a._v(" apt-get方式")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("curl -s https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash\nsudo apt-get install gitlab-ce\nsudo gitlab-ctl reconfigure\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("imgLink",{attrs:{src:"articles/017.jpg/small"}}),a._v(" "),s("h3",{attrs:{id:"deb包方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deb包方式","aria-hidden":"true"}},[a._v("#")]),a._v(" deb包方式")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("wget https://packages.gitlab.com/gitlab/gitlab-ce/Ubuntu/pool/trusty/main/g/gitlab-ce/gitlab-ce_8.3.4-ce.0_amd64.deb\ndpkg -i gitlab-ce_8.3.4-ce.0_amd64.deb\nsudo gitlab-ctl reconfigure\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("imgLink",{attrs:{src:"articles/018.jpg/small"}}),a._v(" "),s("h2",{attrs:{id:"常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用命令","aria-hidden":"true"}},[a._v("#")]),a._v(" 常用命令")]),a._v(" "),s("p",[a._v("gitlab 常用命令")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("gitlab-ctl start\ngitlab-ctl stop\ngitlab-ctl status\ngitlab-ctl restart\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("重新应用配置")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("gitlab-ctl reconfigure\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("Gitlab 默认的日志文件存放在 "),s("code",[a._v("/var/log/gitlab")]),a._v(" 目录下:")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("gitlab-ctl tail # 查看所有日志\ngitlab-ctl tail nginx/gitlab_access.log # 查看nginx访问日志\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h2",{attrs:{id:"端口修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#端口修改","aria-hidden":"true"}},[a._v("#")]),a._v(" 端口修改")]),a._v(" "),s("p",[a._v("修改监听端口")]),a._v(" "),s("p",[a._v("文件位于 "),s("code",[a._v("/var/opt/gitlab/nginx/conf/gitlab-http.conf")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("vim /var/opt/gitlab/nginx/conf/gitlab-http.conf\n\nupstream gitlab-workhorse {\n  server unix:/var/opt/gitlab/gitlab-workhorse/socket;\n}\n\nserver {\n  listen *:8090; --修改端口\n\n\n  server_name localhost;\n  server_tokens off; ## Don't show the nginx version number, a security best practice\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("p",[a._v("将默认的 80 端口修改为自定义端口即可")]),a._v(" "),s("p",[a._v("如果访问时出现 502 错误，则需要修改 unicorn 端口")]),a._v(" "),s("imgLink",{attrs:{src:"articles/019.jpg/small"}}),a._v(" "),s("p",[a._v("文件位于 "),s("code",[a._v("/etc/gitlab/gitlab.rb")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("unicorn['listen'] = '127.0.0.1'\nunicorn['port'] = 8091\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("将默认的 8080 端口改为自定义端口即可")]),a._v(" "),s("p",[a._v("重启服务 "),s("code",[a._v("gitlab-ctl restart")])]),a._v(" "),s("p",[a._v("此时，访问正常")]),a._v(" "),s("imgLink",{attrs:{src:"articles/020.jpg/small"}}),a._v(" "),s("h2",{attrs:{id:"登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#登录","aria-hidden":"true"}},[a._v("#")]),a._v(" 登录")]),a._v(" "),s("p",[a._v("首次访问，会提示设置密码，默认用户名为 root，设置后即可正常登录")]),a._v(" "),s("imgLink",{attrs:{src:"articles/021.jpg/small"}}),a._v(" "),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[a._v("#")]),a._v(" 参考资料")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/laobaozi/p/6638334.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Linux系统下安装Gitlab"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("a",{attrs:{href:"https://www.linuxidc.com/Linux/2016-07/133044.htm",target:"_blank",rel:"noopener noreferrer"}},[a._v("Linux下GitLab安装部署笔记"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/arybd/article/details/54635295",target:"_blank",rel:"noopener noreferrer"}},[a._v("gitlab修改默认端口"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/wizard_rp/article/details/73147129",target:"_blank",rel:"noopener noreferrer"}},[a._v("更改gitlab默认端口"),s("OutboundLink")],1)])],1)},[],!1,null,null,null);n.options.__file="Gitlab.md";t.default=n.exports}}]);