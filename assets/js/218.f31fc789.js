(window.webpackJsonp=window.webpackJsonp||[]).push([[218],{628:function(s,t,n){"use strict";n.r(t);var a=n(1),e=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"url-生成"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#url-生成","aria-hidden":"true"}},[s._v("#")]),s._v(" URL 生成")]),s._v(" "),n("p",[s._v("URL生成使用 "),n("code",[s._v("\\think\\Url::build()")]),s._v(" 方法或者使用系统提供的助手函数 "),n("code",[s._v("url()")]),s._v("，参数一致：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Url::build('地址表达式',['参数'],['URL后缀'],['域名'])\nurl('地址表达式',['参数'],['URL后缀'],['域名'])\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("以下的例子，假设定义了一个路由:")]),s._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[s._v("Route"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{attrs:{class:"token function"}},[s._v("rule")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'blog/:id'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'index/blog/read'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"使用模块-控制器-操作生成"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用模块-控制器-操作生成","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用模块/控制器/操作生成")]),s._v(" "),n("p",[s._v("有以下生成 URL 的代码")]),s._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("// 生成index模块 blog控制器的read操作 URL访问地址")]),s._v("\nUrl"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{attrs:{class:"token function"}},[s._v("build")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'index/blog/read'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'id=5&name=thinkphp'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token comment"}},[s._v("// 使用助手函数")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("url")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'index/blog/read'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'id=5&name=thinkphp'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("生成地址为 "),n("code",[s._v("/index.php/blog/5/name/thinkphp.html")])]),s._v(" "),n("p",[s._v("如果环境为 REWRITE，那么生成的URL地址会变为： "),n("code",[s._v("/blog/5/name/thinkphp.html")])]),s._v(" "),n("p",[s._v("如果配置了 "),n("code",[s._v("'url_common_param'=>true")]),s._v("，那么生成的URL地址变为： "),n("code",[s._v("/index.php/blog/5.html?name=thinkphp")])]),s._v(" "),n("h2",{attrs:{id:"直接使用路由地址"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#直接使用路由地址","aria-hidden":"true"}},[s._v("#")]),s._v(" 直接使用路由地址")]),s._v(" "),n("p",[s._v("有以下生成 URL 的代码")]),s._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[s._v("Url"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{attrs:{class:"token function"}},[s._v("build")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'/blog/5'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("则生成 "),n("code",[s._v("/index.php/blog/5.html")])]),s._v(" "),n("h2",{attrs:{id:"url-后缀"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#url-后缀","aria-hidden":"true"}},[s._v("#")]),s._v(" URL 后缀")]),s._v(" "),n("p",[s._v("默认情况下，系统会自动读取 "),n("code",[s._v("url_html_suffix")]),s._v(" 配置参数作为URL后缀（默认为html）")]),s._v(" "),n("p",[s._v("如果设置了多个URL后缀支持，则会取第一个后缀来生成URL地址")]),s._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'url_html_suffix'")]),s._v("   "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),n("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'html|shtml'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("生成的URL地址是："),n("code",[s._v("/index.php/blog/5.html")])]),s._v(" "),n("p",[s._v("也可以直接指定生成 URL 的后缀:")]),s._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("url")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'index/blog/read'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'id=5'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'shtml'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"域名生成"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#域名生成","aria-hidden":"true"}},[s._v("#")]),s._v(" 域名生成")]),s._v(" "),n("p",[s._v("默认生成的URL地址是不带域名的，如果采用了多域名部署或者希望生成带有域名的URL地址的话，就需要传入第四个参数，该参数有两种用法：")]),s._v(" "),n("p",[n("strong",[s._v("自动生成域名")])]),s._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("url")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'index/blog/read'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'id=5'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'shtml'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token boolean"}},[s._v("true")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("第四个参数传入true的话，表示自动生成域名，如果开启了 "),n("code",[s._v("url_domain_deploy")]),s._v(" 还会自动识别匹配当前URL规则的域名。")]),s._v(" "),n("p",[s._v("例如，我们注册了域名路由信息如下：")]),s._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[s._v("Route"),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{attrs:{class:"token punctuation"}},[s._v(":")]),n("span",{attrs:{class:"token function"}},[s._v("domain")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'blog'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'index/blog'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("那么上面的URL地址生成为："),n("code",[s._v("http://blog.thinkphp.cn/read/id/5.shtml")])]),s._v(" "),n("p",[n("strong",[s._v("指定域名")])]),s._v(" "),n("p",[s._v("也可以显式传入需要生成地址的域名，例如：")]),s._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("url")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'index/blog/read'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'id=5'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'shtml'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'blog'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("或者传入完整的域名")]),s._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("url")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'index/blog/read'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'id=5'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'shtml'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'blog.thinkphp.cn'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("生成的URL地址为："),n("code",[s._v("http://blog.thinkphp.cn/read/id/5.shtml")])]),s._v(" "),n("p",[s._v("也可以直接在第一个参数里面传入域名，例如：")]),s._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("url")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'index/blog/read@blog'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'id=5'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token function"}},[s._v("url")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'index/blog/read@blog.thinkphp.cn'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'id=5'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"生成锚点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生成锚点","aria-hidden":"true"}},[s._v("#")]),s._v(" 生成锚点")]),s._v(" "),n("p",[s._v("支持生成URL的锚点，可以直接在URL地址参数中使用：")]),s._v(" "),n("div",{staticClass:"language-php line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-php"}},[n("code",[n("span",{attrs:{class:"token function"}},[s._v("url")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'index/blog/read#anchor@blog'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{attrs:{class:"token single-quoted-string string"}},[s._v("'id=5'")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("锚点和域名一起使用的时候，注意锚点在前面，域名在后面。")]),s._v(" "),n("p",[s._v("生成的URL地址为："),n("code",[s._v("http://blog.thinkphp.cn/read/id/5.html#anchor")])])])}],!1,null,null,null);e.options.__file="URL.md";t.default=e.exports}}]);