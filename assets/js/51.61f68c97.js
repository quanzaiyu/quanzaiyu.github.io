(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{443:function(t,e,s){"use strict";s.r(e);var r=s(1),i=Object(r.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),s("p",[t._v("交互式容器会创建交互会话跟用户进行交互，在运行结束后会退出容器。")]),t._v(" "),t._m(4),s("p",[t._v("比如：")]),t._v(" "),t._m(5),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),s("p",[t._v("守护式容器能够长期运行，没有交互式会话，适合运行应用程序和服务。")]),t._v(" "),s("p",[t._v("创建守护式容器的方式：")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),s("p",[t._v("比如：")]),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),s("p",[t._v("可以将一个容器简单理解为一个虚拟机，要进入一个运行中的容器，也就是连接容器，需要使用以下命令：")]),t._v(" "),t._m(16),t._m(17),t._v(" "),s("p",[t._v("使用以下命令在容器外执行容器内部命令：")]),t._v(" "),t._m(18),s("p",[t._v("比如")]),t._v(" "),t._m(19),s("p",[t._v("其中 server1 就是我们使用 centos 镜像创建的容器。")]),t._v(" "),s("p",[t._v("又比如改变一个webserver的起始页面：")]),t._v(" "),t._m(20),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),s("p",[t._v("只指定容器中的端口，将自动分配宿主机的映射端口")]),t._v(" "),t._m(27),t._v(" "),s("p",[t._v("明确指定宿主机端口与容器端口之间的映射关系")]),t._v(" "),t._m(28),t._v(" "),s("p",[t._v("指定宿主机端口，将容器中端口映射到宿主机相同端口")]),t._v(" "),t._m(29),t._v(" "),s("p",[t._v("指定宿主机端口和容器端口，将容器中端口映射到宿主机指定端口")]),t._v(" "),t._m(30),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),s("p",[t._v("比如：")]),t._v(" "),t._m(34),s("p",[t._v("其中 server1 容器是通过 centos 镜像创建的，本命令的作用是将 server1 中的 /etc/hosts 文件复制到宿主机当前路径。")]),t._v(" "),t._m(35),t._v(" "),t._m(36),s("p",[t._v("比如以下命令：")]),t._v(" "),t._m(37),s("imgLink",{attrs:{src:"date/20181012/002.png"}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"容器相关概念及基本操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器相关概念及基本操作","aria-hidden":"true"}},[this._v("#")]),this._v(" 容器相关概念及基本操作")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"创建容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建容器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("创建容器使用 "),e("code",[this._v("docker run")]),this._v(" 命令，如果直接执行此命令可以执行镜像里面的命令，但是每次运行都会重新创建一个容器，通常我们会使用以下两种方式创建容器：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"交互式容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#交互式容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 交互式容器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ docker run -it --name [容器名] [镜像名] [命令]\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("[root@node1 ~]# docker run -i -t --name server1 centos /bin/bash\n[root@e7009c6ce357 /]#\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("-i：--interactive=true|false 可进入交互式操作")]),this._v(" "),e("li",[this._v("-t：--tty=true|false 指定使用哪个终端进行交互")]),this._v(" "),e("li",[this._v("--name：指定容器名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("使用 -it 参数创建容器后会进入容器进行交互式操作，使用 "),e("code",[this._v("exit")]),this._v(" 命令退出容器。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"守护式容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#守护式容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 守护式容器")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("在运行交互式容器的时候，使用 "),s("code",[t._v("Ctrl + P + Q")])]),t._v(" "),s("li",[t._v("使用 "),s("code",[t._v("docker start [container]")])]),t._v(" "),s("li",[t._v("在 "),s("code",[t._v("docker run")]),t._v(" 中加入 "),s("code",[t._v("-d")]),t._v(" 参数")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"容器的启停"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器的启停","aria-hidden":"true"}},[this._v("#")]),this._v(" 容器的启停")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("strong",[t._v("启动容器")]),t._v(" docker start [容器名]")]),t._v(" "),s("li",[s("strong",[t._v("重启容器")]),t._v(" docker restart [容器名]")]),t._v(" "),s("li",[s("strong",[t._v("停止容器")]),t._v(" docker stop [容器名]")]),t._v(" "),s("li",[s("strong",[t._v("杀死容器")]),t._v(" docker kill [容器名]")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ docker start server1\n$ docker restart server1\n$ docker stop server1\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br"),e("span",{staticClass:"line-number"},[this._v("3")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"列出容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#列出容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 列出容器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("strong",[this._v("列出所有容器")]),this._v("：docker ps -a")]),this._v(" "),e("li",[e("strong",[this._v("列出正在运行的容器")]),this._v("：docker ps")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"连接容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#连接容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 连接容器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ docker attach [容器名 or 容器id]\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"容器外执行容器内部命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器外执行容器内部命令","aria-hidden":"true"}},[this._v("#")]),this._v(" 容器外执行容器内部命令")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ docker exec [容器名] [容器内部命令]\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('$ docker exec server1 echo "Hello world"\n')])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ docker run --name webserver -d -p 80:80 nginx\n$ docker exec -it webserver bash\nroot@3729b97e8226:/# echo '<h1>Hello, Docker!</h1>' > /usr/share/nginx/html/index.html\nroot@3729b97e8226:/# exit\nexit\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br"),e("span",{staticClass:"line-number"},[this._v("3")]),e("br"),e("span",{staticClass:"line-number"},[this._v("4")]),e("br"),e("span",{staticClass:"line-number"},[this._v("5")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"删除容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除容器","aria-hidden":"true"}},[this._v("#")]),this._v(" 删除容器")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("strong",[this._v("删除一个容器")]),this._v("：docker rm [容器名]")]),this._v(" "),e("li",[e("strong",[this._v("强制删除一个正在运行的容器")]),this._v("：docker rm -f [容器名]")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"端口映射"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#端口映射","aria-hidden":"true"}},[this._v("#")]),this._v(" 端口映射")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("在创建容器的时候，可以指定容器到宿主机的端口映射，使用 "),e("code",[this._v("-p")]),this._v(" 或 "),e("code",[this._v("-P")]),this._v(" 参数指定：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("p：--publish=[]，有四种格式：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("containerPort")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"2"}},[e("li",[this._v("hostPort:containerPort")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"3"}},[e("li",[this._v("ip::containerPort")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"4"}},[e("li",[this._v("ip:hostPort:containerPort")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ docker run -p 80 -it --name server ubuntu /bin/bash\n$ docker run -p 8080:80 -it --name server ubuntu /bin/bash\n$ docker run -p 0.0.0.0:80 -it --name server ubuntu /bin/bash\n$ docker run -p 0.0.0.0:8080:80 -it --name server ubuntu /bin/bash\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br"),e("span",{staticClass:"line-number"},[this._v("3")]),e("br"),e("span",{staticClass:"line-number"},[this._v("4")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("使用 -P 将容器暴露的所有端口进行映射")]),this._v(" "),e("li",[this._v("使用 -p 将容器中指定端口进行映射")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"复制容器内文件到本地"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#复制容器内文件到本地","aria-hidden":"true"}},[this._v("#")]),this._v(" 复制容器内文件到本地")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ docker cp [container:path] [loaclPath]\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ docker cp server1:/etc/hosts ./\n\n# 当然，也可从宿主机拷贝文件到容器\n\n$ docker cp ./hosts server1:/opt\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br"),e("span",{staticClass:"line-number"},[this._v("3")]),e("br"),e("span",{staticClass:"line-number"},[this._v("4")]),e("br"),e("span",{staticClass:"line-number"},[this._v("5")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"提交对容器的修改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提交对容器的修改","aria-hidden":"true"}},[this._v("#")]),this._v(" 提交对容器的修改")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ docker commit [options] [container] [image:tag]\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("$ docker commit --author 'master' --message 'add files' server1 centos:latest\n$ docker commit -a 'master' -m 'add files' server1 centos:1.2\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br")])])}],!1,null,null,null);i.options.__file="Container.md";e.default=i.exports}}]);