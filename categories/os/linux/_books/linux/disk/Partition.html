<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>磁盘分区 | 小昱个人网站</title>
    <meta name="description" content="小昱个人网站">
    <meta http-equiv="Expires" content="Mon,12 May 2050 00:20:00 GMT">
  <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_517060_lom78h954w.css">
  <link rel="stylesheet" href="https://img.xiaoyulive.top/css/animate.css">
    
    <link rel="preload" href="/assets/css/0.styles.b4f00dfd.css" as="style"><link rel="preload" href="/assets/js/app.a63c5f99.js" as="script"><link rel="preload" href="/assets/js/5.bf9ad07a.js" as="script"><link rel="prefetch" href="/assets/js/1.3da9caaf.js"><link rel="prefetch" href="/assets/js/10.0030d769.js"><link rel="prefetch" href="/assets/js/11.94091e19.js"><link rel="prefetch" href="/assets/js/12.aa18a28e.js"><link rel="prefetch" href="/assets/js/13.930ed366.js"><link rel="prefetch" href="/assets/js/14.527e72dc.js"><link rel="prefetch" href="/assets/js/15.8f9a8a59.js"><link rel="prefetch" href="/assets/js/2.8fe36322.js"><link rel="prefetch" href="/assets/js/6.e84be67d.js"><link rel="prefetch" href="/assets/js/7.df9720f7.js"><link rel="prefetch" href="/assets/js/8.b12e7d24.js"><link rel="prefetch" href="/assets/js/9.908b9ffb.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.50c33dc1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4f00dfd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-38547c78><header class="navbar" data-v-38547c78><div class="navbar-content"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><img src="/logo.png" class="logo"><span class="site-name can-hide">小昱个人网站</span></a><div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">开发者博客</a></div><div class="nav-item"><a href="/articles/" class="nav-link">生活漫谈</a></div><div class="nav-item"><a href="/note/" class="nav-link">阅读札记</a></div><div class="nav-item"><a href="/categories/" class="nav-link router-link-active">学无止境</a></div><div class="nav-item"><a href="/share/" class="nav-link">精品分享</a></div><div class="nav-item"><a href="/favorite/" class="nav-link">收藏夹</a></div><!----></nav><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div></div></div></header><div class="sidebar-mask" data-v-38547c78></div><div class="sidebar" data-v-38547c78><div class="sidebar-container"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">开发者博客</a></div><div class="nav-item"><a href="/articles/" class="nav-link">生活漫谈</a></div><div class="nav-item"><a href="/note/" class="nav-link">阅读札记</a></div><div class="nav-item"><a href="/categories/" class="nav-link router-link-active">学无止境</a></div><div class="nav-item"><a href="/share/" class="nav-link">精品分享</a></div><div class="nav-item"><a href="/favorite/" class="nav-link">收藏夹</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Linux 学习指南</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>基础配置</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>基础命令</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>搜索与排序</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>用户及权限</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>网络及安全</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>磁盘管理与设备挂载</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/categories/os/linux/_books/linux/disk/" class="sidebar-link">基础概念</a></li><li><a href="/categories/os/linux/_books/linux/disk/List.html" class="sidebar-link">查看磁盘与设备</a></li><li><a href="/categories/os/linux/_books/linux/disk/Partition.html" class="active sidebar-link">磁盘分区</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/categories/os/linux/_books/linux/disk/Partition.html#获取帮助-m" class="sidebar-link">获取帮助 (m)</a></li><li class="sidebar-sub-header"><a href="/categories/os/linux/_books/linux/disk/Partition.html#列出所有支持的分区格式-l" class="sidebar-link">列出所有支持的分区格式 (l)</a></li><li class="sidebar-sub-header"><a href="/categories/os/linux/_books/linux/disk/Partition.html#创建新分区-n" class="sidebar-link">创建新分区 (n)</a></li><li class="sidebar-sub-header"><a href="/categories/os/linux/_books/linux/disk/Partition.html#打印分区表-p" class="sidebar-link">打印分区表 (p)</a></li><li class="sidebar-sub-header"><a href="/categories/os/linux/_books/linux/disk/Partition.html#保存分区表-w" class="sidebar-link">保存分区表 (w)</a></li><li class="sidebar-sub-header"><a href="/categories/os/linux/_books/linux/disk/Partition.html#查看新的磁盘设备" class="sidebar-link">查看新的磁盘设备</a></li></ul></li><li><a href="/categories/os/linux/_books/linux/disk/Format.html" class="sidebar-link">分区格式化</a></li><li><a href="/categories/os/linux/_books/linux/disk/Mount.html" class="sidebar-link">设备挂载与卸载</a></li><li><a href="/categories/os/linux/_books/linux/disk/Fstab_Mtab.html" class="sidebar-link">fstab和mtab</a></li><li><a href="/categories/os/linux/_books/linux/disk/Solution.html" class="sidebar-link">问题处理</a></li><li><a href="/categories/os/linux/_books/linux/disk/Reference.html" class="sidebar-link">参考资料</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>其他相关操作</span> <span class="arrow right"></span></p> <!----></div></li></ul></div></div><div class="page" data-v-38547c78><div class="content default"><h1 id="磁盘分区"><a href="#磁盘分区" aria-hidden="true" class="header-anchor">#</a> 磁盘分区</h1> <p>使用 <code>fdisk /dev/vdb</code> 进入磁盘设备进行操作, 可以进行分区、保存分区表、打印分区表等等操作</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">fdisk</span> /dev/vdb
Welcome to <span class="token function">fdisk</span> <span class="token punctuation">(</span>util-linux 2.23.2<span class="token punctuation">)</span>.

Changes will remain <span class="token keyword">in</span> memory only, <span class="token keyword">until</span> you decide to <span class="token function">write</span> them.
Be careful before using the <span class="token function">write</span> command.

Device does not contain a recognized partition table
Building a new DOS disklabel with disk identifier 0x11171dc8.
</code></pre></div><p>以下是一些常用的命令:</p> <ul><li><code>m</code> 打开帮助</li> <li><code>n</code> 添加新分区</li> <li><code>p</code> 打印分区表</li> <li><code>w</code> 保存分区表并退出</li> <li><code>q</code> 不保存分区表并退出</li> <li><code>l</code> 列出所有支持的分区格式</li></ul> <h2 id="获取帮助-m"><a href="#获取帮助-m" aria-hidden="true" class="header-anchor">#</a> 获取帮助 (m)</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>Command <span class="token punctuation">(</span>m <span class="token keyword">for</span> help<span class="token punctuation">)</span>: m
Command action
   a   toggle a bootable flag
   b   edit bsd disklabel
   c   toggle the dos compatibility flag
   d   delete a partition
   g   create a new empty GPT partition table
   G   create an IRIX <span class="token punctuation">(</span>SGI<span class="token punctuation">)</span> partition table
   l   list known partition types
   m   print this menu
   n   <span class="token function">add</span> a new partition
   o   create a new empty DOS partition table
   p   print the partition table
   q   quit without saving changes
   s   create a new empty Sun disklabel
   t   change a partition's system <span class="token function">id</span>
   u   change display/entry <span class="token function">units</span>
   v   verify the partition table
   w   <span class="token function">write</span> table to disk and <span class="token keyword">exit</span>
   x   extra functionality <span class="token punctuation">(</span>experts only<span class="token punctuation">)</span>
</code></pre></div><h2 id="列出所有支持的分区格式-l"><a href="#列出所有支持的分区格式-l" aria-hidden="true" class="header-anchor">#</a> 列出所有支持的分区格式 (l)</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>Command <span class="token punctuation">(</span>m <span class="token keyword">for</span> help<span class="token punctuation">)</span>: l

 0  Empty           24  NEC DOS         81  Minix / old Lin bf  Solaris
 1  FAT12           27  Hidden NTFS Win 82  Linux swap / So c1  DRDOS/sec <span class="token punctuation">(</span>FAT-
 2  XENIX root      39  Plan 9          83  Linux           c4  DRDOS/sec <span class="token punctuation">(</span>FAT-
 3  XENIX usr       3c  PartitionMagic  84  OS/2 hidden C:  c6  DRDOS/sec <span class="token punctuation">(</span>FAT-
 4  FAT16 <span class="token operator">&lt;</span>32M      40  Venix 80286     85  Linux extended  c7  Syrinx
 5  Extended        41  PPC PReP Boot   86  NTFS volume <span class="token keyword">set</span> da  Non-FS data
 6  FAT16           42  SFS             87  NTFS volume <span class="token keyword">set</span> db  CP/M / CTOS / <span class="token keyword">.</span>
 7  HPFS/NTFS/exFAT 4d  QNX4.x          88  Linux plaintext de  Dell Utility
 8  AIX             4e  QNX4.x 2nd part 8e  Linux LVM       <span class="token function">df</span>  BootIt
 9  AIX bootable    4f  QNX4.x 3rd part 93  Amoeba          e1  DOS access
 a  OS/2 Boot Manag 50  OnTrack DM      94  Amoeba BBT      e3  DOS R/O
 b  W95 FAT32       51  OnTrack DM6 Aux 9f  BSD/OS          e4  SpeedStor
 c  W95 FAT32 <span class="token punctuation">(</span>LBA<span class="token punctuation">)</span> 52  CP/M            a0  IBM Thinkpad hi eb  BeOS fs
 e  W95 FAT16 <span class="token punctuation">(</span>LBA<span class="token punctuation">)</span> 53  OnTrack DM6 Aux a5  FreeBSD         ee  GPT
 f  W95 Ext'd <span class="token punctuation">(</span>LBA<span class="token punctuation">)</span> 54  OnTrackDM6      a6  OpenBSD         ef  EFI <span class="token punctuation">(</span>FAT-12/16/
10  OPUS            55  EZ-Drive        a7  NeXTSTEP        f0  Linux/PA-RISC b
11  Hidden FAT12    56  Golden Bow      a8  Darwin UFS      f1  SpeedStor
12  Compaq diagnost 5c  Priam Edisk     a9  NetBSD          f4  SpeedStor
14  Hidden FAT16 <span class="token operator">&lt;</span>3 61  SpeedStor       ab  Darwin boot     f2  DOS secondary
16  Hidden FAT16    63  GNU HURD or Sys af  HFS / HFS+      fb  VMware VMFS
17  Hidden HPFS/NTF 64  Novell Netware  b7  BSDI fs         fc  VMware VMKCORE
18  AST SmartSleep  65  Novell Netware  b8  BSDI swap       fd  Linux raid auto
1b  Hidden W95 FAT3 70  DiskSecure Mult bb  Boot Wizard hid fe  LANstep
1c  Hidden W95 FAT3 75  PC/IX           be  Solaris boot    ff  BBT
1e  Hidden W95 FAT1 80  Old Minix
</code></pre></div><h2 id="创建新分区-n"><a href="#创建新分区-n" aria-hidden="true" class="header-anchor">#</a> 创建新分区 (n)</h2> <ul><li><strong>Partition type</strong> 分区类型 (直接回车就好)
<ul><li>p: 主分区</li> <li>e: 扩展分区</li></ul></li> <li><strong>Partition number</strong> 分区序号 (直接回车就好)</li> <li><strong>First sector</strong> 起始扇区 (直接回车就好)</li> <li><strong>Last sector</strong> 分区大小, 输入 +100G 表示为此分区分配 100G 的空间</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>Command <span class="token punctuation">(</span>m <span class="token keyword">for</span> help<span class="token punctuation">)</span>: n
Partition type:
   p   primary <span class="token punctuation">(</span>0 primary, 0 extended, 4 free<span class="token punctuation">)</span>
   e   extended
Select <span class="token punctuation">(</span>default p<span class="token punctuation">)</span>:
Using default response p
Partition number <span class="token punctuation">(</span>1-4, default 1<span class="token punctuation">)</span>:
First sector <span class="token punctuation">(</span>2048-1048575999, default 2048<span class="token punctuation">)</span>:
Using default value 2048
Last sector, +sectors or +size<span class="token punctuation">{</span>K,M,G<span class="token punctuation">}</span> <span class="token punctuation">(</span>2048-1048575999, default 1048575999<span class="token punctuation">)</span>: +100G
Partition 1 of <span class="token function">type</span> Linux and of size 100 GiB is <span class="token keyword">set</span>
</code></pre></div><p>多次输入 n 命令, 可对磁盘进行多个分区划分</p> <h2 id="打印分区表-p"><a href="#打印分区表-p" aria-hidden="true" class="header-anchor">#</a> 打印分区表 (p)</h2> <p>创建完分区后, 使用 p 命令打印分区表</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Command <span class="token punctuation">(</span>m <span class="token keyword">for</span> help<span class="token punctuation">)</span>: p

Disk /dev/vdb: 536.9 GB, 536870912000 bytes, 1048576000 sectors
Units <span class="token operator">=</span> sectors of 1 * 512 <span class="token operator">=</span> 512 bytes
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512 bytes / 512 bytes
I/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x11171dc8

   Device Boot      Start         End      Blocks   Id  System
/dev/vdb1            2048   209717247   104857600   83  Linux
/dev/vdb2       209717248   419432447   104857600   83  Linux
/dev/vdb3       419432448   629147647   104857600   83  Linux
/dev/vdb4       629149696  1048575999   209713152   83  Linux
</code></pre></div><h2 id="保存分区表-w"><a href="#保存分区表-w" aria-hidden="true" class="header-anchor">#</a> 保存分区表 (w)</h2> <p>使用 w 命令对已划分的分区表进行保存</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Command <span class="token punctuation">(</span>m <span class="token keyword">for</span> help<span class="token punctuation">)</span>: w
The partition table has been altered<span class="token operator">!</span>

Calling ioctl<span class="token punctuation">(</span><span class="token punctuation">)</span> to re-read partition table.
Syncing disks.
</code></pre></div><h2 id="查看新的磁盘设备"><a href="#查看新的磁盘设备" aria-hidden="true" class="header-anchor">#</a> 查看新的磁盘设备</h2> <p>创建完分区表并退出后, 使用 <code>ls /dev/vdb*</code> 可以看到, 已划分的4个分区都已出现</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span> /dev/vdb*
/dev/vdb  /dev/vdb1  /dev/vdb2  /dev/vdb3  /dev/vdb4
</code></pre></div><p>再次使用 <code>fdisk -l</code> 查看磁盘信息</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">fdisk</span> -l

Disk /dev/vda: 42.9 GB, 42949672960 bytes, 83886080 sectors
Units <span class="token operator">=</span> sectors of 1 * 512 <span class="token operator">=</span> 512 bytes
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512 bytes / 512 bytes
I/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x0008d73a

   Device Boot      Start         End      Blocks   Id  System
/dev/vda1   *        2048    83884031    41940992   83  Linux

Disk /dev/vdb: 536.9 GB, 536870912000 bytes, 1048576000 sectors
Units <span class="token operator">=</span> sectors of 1 * 512 <span class="token operator">=</span> 512 bytes
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512 bytes / 512 bytes
I/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: 512 bytes / 512 bytes
Disk label type: dos
Disk identifier: 0x11171dc8

   Device Boot      Start         End      Blocks   Id  System
/dev/vdb1            2048   209717247   104857600   83  Linux
/dev/vdb2       209717248   419432447   104857600   83  Linux
/dev/vdb3       419432448   629147647   104857600   83  Linux
/dev/vdb4       629149696  1048575999   209713152   83  Linux

Disk /dev/mapper/vg_f08a5cd7b4e31c2b93f7d6c385860882-brick_3d7dc9f1e6346efc7361d0f4ec4ddf8c: 2147 MB, 2147483648 bytes, 4194304 sectors
Units <span class="token operator">=</span> sectors of 1 * 512 <span class="token operator">=</span> 512 bytes
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512 bytes / 512 bytes
I/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: 262144 bytes / 262144 bytes


Disk /dev/mapper/vg_f08a5cd7b4e31c2b93f7d6c385860882-brick_0027aec42ae3a4b5171cc7fddea50bc0: 1073 MB, 1073741824 bytes, 2097152 sectors
Units <span class="token operator">=</span> sectors of 1 * 512 <span class="token operator">=</span> 512 bytes
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512 bytes / 512 bytes
I/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: 262144 bytes / 262144 bytes
</code></pre></div><p>可以看到 <code>/dev/vdb</code> 的4个分区都已分配</p></div><div class="article-info"><div class="article-title">文档信息</div><p class="article-item">版权声明：著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p><p class="article-item">文章标题：磁盘分区</p><p class="article-item">原文链接：<a href="https://www.xiaoyulive.top/categories/os/linux/_books/linux/disk/Partition.html">https://www.xiaoyulive.top/categories/os/linux/_books/linux/disk/Partition.html</a></p><!----></div><!----><div class="content page-nav"><p class="inner"><span class="prev">← <a href="/categories/os/linux/_books/linux/disk/List.html">查看磁盘与设备</a></span><span class="next"><a href="/categories/os/linux/_books/linux/disk/Format.html">分区格式化</a>  →</span></p></div></div><div class="footers" data-v-38547c78><p data-v-38547c78><span data-v-38547c78>MIT Licensed | Copyright © 2018-present  滇ICP备16006294号</span></p><p data-v-38547c78><span data-v-38547c78>Design by <a href="/">Quanzaiyu</a> | Power by <a href="https://vuepress.vuejs.org/" target="_blank">VuePress</a> | Hosted by <a href="https://pages.coding.me" target="_blank" style="font-weight: bold">Coding Pages</a></span></p></div></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.a63c5f99.js" defer></script><script src="/assets/js/5.bf9ad07a.js" defer></script>
  </body>
</html>
