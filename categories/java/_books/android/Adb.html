<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>adb 的使用 | 小昱个人网站</title>
    <meta name="description" content="小昱个人网站">
    <meta http-equiv="Expires" content="Mon,12 May 2050 00:20:00 GMT">
  <meta name="keywords" content="小昱,个人网站,Vue,JavaScript,HTML,CSS">
  <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_517060_lom78h954w.css">
  <link rel="stylesheet" href="https://img.xiaoyulive.top/css/animate.css">
    
    <link rel="preload" href="/assets/css/0.styles.e2d81a46.css" as="style"><link rel="preload" href="/assets/js/app.12f4fe34.js" as="script"><link rel="preload" href="/assets/js/5.b2d88b04.js" as="script"><link rel="preload" href="/assets/js/14.09023cd3.js" as="script"><link rel="prefetch" href="/assets/js/1.eaa33edf.js"><link rel="prefetch" href="/assets/js/10.38acf979.js"><link rel="prefetch" href="/assets/js/11.fc2d78c1.js"><link rel="prefetch" href="/assets/js/12.127174aa.js"><link rel="prefetch" href="/assets/js/13.9facbb15.js"><link rel="prefetch" href="/assets/js/15.5e3bfa95.js"><link rel="prefetch" href="/assets/js/2.8690f1f9.js"><link rel="prefetch" href="/assets/js/6.9cfaa079.js"><link rel="prefetch" href="/assets/js/7.12d7389a.js"><link rel="prefetch" href="/assets/js/8.2a2bed59.js"><link rel="prefetch" href="/assets/js/9.38d16243.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.9ca4b8ed.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e2d81a46.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-38547c78><header class="navbar" data-v-38547c78><div class="navbar-content"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><img src="/logo.png" class="logo"><span class="site-name can-hide">小昱个人网站</span></a><div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">开发者博客</a></div><div class="nav-item"><a href="/articles/" class="nav-link">生活漫谈</a></div><div class="nav-item"><a href="/note/" class="nav-link">阅读札记</a></div><div class="nav-item"><a href="/categories/" class="nav-link router-link-active">学无止境</a></div><div class="nav-item"><a href="/share/" class="nav-link">精品分享</a></div><div class="nav-item"><a href="/favorite/" class="nav-link">收藏夹</a></div><!----></nav><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div></div></div></header><div class="sidebar-mask" data-v-38547c78></div><div class="sidebar" data-v-38547c78><div class="sidebar-container"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">开发者博客</a></div><div class="nav-item"><a href="/articles/" class="nav-link">生活漫谈</a></div><div class="nav-item"><a href="/note/" class="nav-link">阅读札记</a></div><div class="nav-item"><a href="/categories/" class="nav-link router-link-active">学无止境</a></div><div class="nav-item"><a href="/share/" class="nav-link">精品分享</a></div><div class="nav-item"><a href="/favorite/" class="nav-link">收藏夹</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Android 开发笔记</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/categories/java/_books/android/" class="sidebar-link">Android</a></li><li><a href="/categories/java/_books/android/Simulator.html" class="sidebar-link">模拟器</a></li><li><a href="/categories/java/_books/android/Adb.html" class="active sidebar-link">adb 的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/categories/java/_books/android/Adb.html#下载安装及使用" class="sidebar-link">下载安装及使用</a></li><li class="sidebar-sub-header"><a href="/categories/java/_books/android/Adb.html#adb-运行原理" class="sidebar-link">adb 运行原理</a></li><li class="sidebar-sub-header"><a href="/categories/java/_books/android/Adb.html#adb-常用命令" class="sidebar-link">adb 常用命令</a></li><li class="sidebar-sub-header"><a href="/categories/java/_books/android/Adb.html#连接-mumu-模拟器" class="sidebar-link">连接 MuMu 模拟器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/categories/java/_books/android/Adb.html#在-hbuilder-中使用-mumu-模拟器进行调试" class="sidebar-link">在 HBuilder 中使用 MuMu 模拟器进行调试</a></li></ul></li><li class="sidebar-sub-header"><a href="/categories/java/_books/android/Adb.html#端口映射" class="sidebar-link">端口映射</a></li><li class="sidebar-sub-header"><a href="/categories/java/_books/android/Adb.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li></ul></div></li></ul></div></div><div class="page" data-v-38547c78><div class="content__default"><h1 id="adb-的使用"><a href="#adb-的使用" aria-hidden="true" class="header-anchor">#</a> adb 的使用</h1> <h2 id="下载安装及使用"><a href="#下载安装及使用" aria-hidden="true" class="header-anchor">#</a> 下载安装及使用</h2> <p>很多工具都自带 adb, 比如 Android Studio, 微信调试工具, 各种模拟器, 但是很多时候各种工具会抢占端口, 而开发者并不太容易找到其 <code>adb.exe</code>, 我更愿意从 <a href="http://adbshell.com/downloads" target="_blank" rel="noopener noreferrer">adbshell 官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 下载 adb 并自行配置使用</p> <div class="imgLink" data-v-16222526><img src="https://img.xiaoyulive.top/img/date/20190518/002.png" data-v-16222526></div> <h2 id="adb-运行原理"><a href="#adb-运行原理" aria-hidden="true" class="header-anchor">#</a> adb 运行原理</h2> <p>Android 调试系统是一个面对客户服务系统，包括三个组成部分:</p> <p>一个在你用于开发程序的电脑上运行的客户端。你可以通过shell端使用adb命令启动客户端。 其他Android工具比如说ADT插件和DDMS同样可以产生adb客户端.
在你用于开发的机器上作为后台进程运行的服务器。该服务器负责管理客户端与运行于模拟器或设备上的adb守护程序(daemon)之间的通信。.</p> <p>一个以后台进程的形式运行于模拟器或设备上的守护程序(daemon)。.
当你启动一个adb客户端，客户端首先确认是否已有一个adb服务进程在运行。如果没有，则启动服务进程。当服务器运行， adb服务器就会绑定本地的TCP端口5037并监听adb客户端发来的命令，—所有的adb客户端都是用端口 5037与adb服务器对话的.</p> <h2 id="adb-常用命令"><a href="#adb-常用命令" aria-hidden="true" class="header-anchor">#</a> adb 常用命令</h2> <p><strong>列出所有连接的Android设备</strong>, 返回序列号和状态</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb devices
</code></pre></div><p><strong>连接到某设备</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb connect <span class="token punctuation">[</span>address<span class="token punctuation">]</span>
</code></pre></div><p><strong>进入 shell 模式</strong> (由于Android是基于Linux的, 可以使用各种Linux命令)</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb shell
root@MI 6 Plus:/ <span class="token comment"># ls</span>
<span class="token punctuation">..</span>.
</code></pre></div><p>进入 shell 模式后可通过 exit 退出</p> <p><strong>安装应用</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb <span class="token function">install</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token operator">&lt;</span>path<span class="token operator">&gt;</span>
</code></pre></div><p>比如 <code>adb install test.apk</code></p> <p>在指定设别上安装应用, -s 指定的是设备ID, 通过 adb devices 获取到</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb -s 35c7b1bf0804 <span class="token function">install</span> -r weex-app.apk
</code></pre></div><p><strong>卸载应用</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb uninstall <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token operator">&lt;</span>PACKAGE<span class="token operator">&gt;</span>
</code></pre></div><p>比如 <code>adb uninstall com.test.app</code></p> <p><strong>从设备下载指定的文件到电脑上</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb pull <span class="token operator">&lt;</span>remote<span class="token operator">&gt;</span> <span class="token punctuation">[</span>local<span class="token punctuation">]</span>
</code></pre></div><p>比如 <code>adb pull /sdcard/demo.mp4 e:\</code>, 若不指定 local, 默认使用当前路径</p> <p><strong>从电脑上传指定文件到设备</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb push <span class="token operator">&lt;</span>local<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>remote<span class="token operator">&gt;</span>
</code></pre></div><p>比如 <code>adb push d:\test.apk /sdcard</code></p> <p><strong>打印日志</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb logcat <span class="token punctuation">[</span>option<span class="token punctuation">]</span> <span class="token punctuation">[</span>filter-specs<span class="token punctuation">]</span>
</code></pre></div><p><strong>打印系统信息</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb shell dumpsys <span class="token punctuation">[</span>options<span class="token punctuation">]</span>
</code></pre></div><p>比如 <code>adb shell dumpsys battery</code></p> <p><strong>获取设备的屏幕截图</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb shell screencap <span class="token operator">&lt;</span>filename<span class="token operator">&gt;</span>
</code></pre></div><p>比如 <code>adb shell screencap /storage/emulated/0/screen.png</code></p> <p><strong>以root身份重新进入adb</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ adb root
</code></pre></div><p><strong>查看端口占用</strong></p> <div class="language- extra-class"><pre class="language-text"><code>quanzaiyu@DESKTOP-VEB85IN MINGW64 /d/Software/adb
$ ./adb nodaemon server
cannot bind 'tcp:5037'

quanzaiyu@DESKTOP-VEB85IN MINGW64 /d/Software/adb
$ netstat -ano | findstr &quot;5037&quot;

quanzaiyu@DESKTOP-VEB85IN MINGW64 /d/Software/adb
$ tasklist | findstr &quot;adb&quot;
映像名称                       PID 会话名              会话#       内存使用
========================= ======== ================ =========== ============
adb.exe                      19752 Console                    1      9,800 K
adb.exe                      14020 Console                    1      6,492 K
adb.exe                      20452 Console                    1      6,508 K
</code></pre></div><h2 id="连接-mumu-模拟器"><a href="#连接-mumu-模拟器" aria-hidden="true" class="header-anchor">#</a> 连接 MuMu 模拟器</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>quanzaiyu@DESKTOP-VEB85IN MINGW64 /d/Software/adb
$ ./adb connect 127.0.0.1:7555
connected to 127.0.0.1:7555

quanzaiyu@DESKTOP-VEB85IN MINGW64 /d/Software/adb
$ ./adb devices
List of devices attached
127.0.0.1:7555  device
</code></pre></div><h3 id="在-hbuilder-中使用-mumu-模拟器进行调试"><a href="#在-hbuilder-中使用-mumu-模拟器进行调试" aria-hidden="true" class="header-anchor">#</a> 在 HBuilder 中使用 MuMu 模拟器进行调试</h3> <p>工具 -&gt; 设置 中 配置 adb 的路径和 MuMu模拟器 的端口 7555</p> <div class="imgLink" data-v-16222526><img src="https://img.xiaoyulive.top/img/date/20190518/001.png" data-v-16222526></div> <h2 id="端口映射"><a href="#端口映射" aria-hidden="true" class="header-anchor">#</a> 端口映射</h2> <ul><li>把Android上的某个端口映射到电脑（adb forward），比如 <code>adb forward tcp:8081 tcp:8081</code></li> <li>把电脑的某个端口映射到Android系统（adb reverse），比如 <code>adb reverse tcp:8081 tcp:8081</code></li></ul> <h2 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h2> <ul><li><a href="https://blog.csdn.net/guotianqing/article/details/79173270" target="_blank" rel="noopener noreferrer">adb工具使用简介<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://blog.csdn.net/billy_chen_2013/article/details/80882644" target="_blank" rel="noopener noreferrer">Android 使用 MuMu模拟器 进行程序调试<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="article-info"><div class="article-title">文档信息</div><p class="article-item">版权声明：著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p><p class="article-item">文章标题：adb 的使用</p><p class="article-item">原文链接：<a href="https://www.xiaoyulive.top/categories/java/_books/android/Adb.html">https://www.xiaoyulive.top/categories/java/_books/android/Adb.html</a></p><!----></div><!----><div class="content page-nav"><p class="inner"><span class="prev">← <a href="/categories/java/_books/android/Simulator.html">模拟器</a></span><!----></p></div></div><div class="footers" data-v-38547c78><p data-v-38547c78><span data-v-38547c78>MIT Licensed | Copyright © 2018-present  滇ICP备16006294号</span></p><p data-v-38547c78><span data-v-38547c78>Design by <a href="/">Quanzaiyu</a> | Power by <a href="https://vuepress.vuejs.org/" target="_blank">VuePress</a> | Hosted by <a href="https://pages.coding.me" target="_blank" style="font-weight: bold">Coding Pages</a></span></p></div></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.12f4fe34.js" defer></script><script src="/assets/js/5.b2d88b04.js" defer></script><script src="/assets/js/14.09023cd3.js" defer></script>
  </body>
</html>
