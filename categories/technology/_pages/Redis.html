<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis 数据库的使用 | 小昱个人网站</title>
    <meta name="description" content="小昱个人网站">
    <meta http-equiv="Expires" content="Mon,12 May 2050 00:20:00 GMT">
  <meta name="keywords" content="小昱,个人网站,Vue,JavaScript,HTML,CSS">
  <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_517060_lom78h954w.css">
  <link rel="stylesheet" href="https://img.xiaoyulive.top/css/animate.css">
    
    <link rel="preload" href="/assets/css/0.styles.e2d81a46.css" as="style"><link rel="preload" href="/assets/js/app.ab7dbbcd.js" as="script"><link rel="preload" href="/assets/js/5.fa2f35ee.js" as="script"><link rel="preload" href="/assets/js/14.35572a91.js" as="script"><link rel="prefetch" href="/assets/js/1.498ea54e.js"><link rel="prefetch" href="/assets/js/10.5199bb3f.js"><link rel="prefetch" href="/assets/js/11.599ce28f.js"><link rel="prefetch" href="/assets/js/12.70e406bf.js"><link rel="prefetch" href="/assets/js/13.c1f37e97.js"><link rel="prefetch" href="/assets/js/15.f9b488e1.js"><link rel="prefetch" href="/assets/js/2.e89ceb0b.js"><link rel="prefetch" href="/assets/js/6.4b7a4d72.js"><link rel="prefetch" href="/assets/js/7.3a442e8b.js"><link rel="prefetch" href="/assets/js/8.49a9e85e.js"><link rel="prefetch" href="/assets/js/9.eb8a678c.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.12823743.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e2d81a46.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-38547c78><header class="navbar" data-v-38547c78><div class="navbar-content"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><img src="/logo.png" class="logo"><span class="site-name can-hide">小昱个人网站</span></a><div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">开发者博客</a></div><div class="nav-item"><a href="/articles/" class="nav-link">生活漫谈</a></div><div class="nav-item"><a href="/note/" class="nav-link">阅读札记</a></div><div class="nav-item"><a href="/categories/" class="nav-link router-link-active">学无止境</a></div><div class="nav-item"><a href="/share/" class="nav-link">精品分享</a></div><div class="nav-item"><a href="/favorite/" class="nav-link">收藏夹</a></div><!----></nav><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div></div></div></header><div class="sidebar-mask" data-v-38547c78></div><div class="sidebar" data-v-38547c78><div class="sidebar-container"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">开发者博客</a></div><div class="nav-item"><a href="/articles/" class="nav-link">生活漫谈</a></div><div class="nav-item"><a href="/note/" class="nav-link">阅读札记</a></div><div class="nav-item"><a href="/categories/" class="nav-link router-link-active">学无止境</a></div><div class="nav-item"><a href="/share/" class="nav-link">精品分享</a></div><div class="nav-item"><a href="/favorite/" class="nav-link">收藏夹</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Redis 数据库的使用</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/categories/technology/_pages/Redis.html#安装" class="sidebar-link">安装</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/categories/technology/_pages/Redis.html#基本使用方法" class="sidebar-link">基本使用方法</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/categories/technology/_pages/Redis.html#数据类型" class="sidebar-link">数据类型</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/categories/technology/_pages/Redis.html#数据库操作" class="sidebar-link">数据库操作</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/categories/technology/_pages/Redis.html#键的相关操作" class="sidebar-link">键的相关操作</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/categories/technology/_pages/Redis.html#字符串的相关操作" class="sidebar-link">字符串的相关操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/categories/technology/_pages/Redis.html#getrange" class="sidebar-link">GETRANGE</a></li><li class="sidebar-sub-header"><a href="/categories/technology/_pages/Redis.html#getset" class="sidebar-link">GETSET</a></li><li class="sidebar-sub-header"><a href="/categories/technology/_pages/Redis.html#mkey" class="sidebar-link">MKEY</a></li><li class="sidebar-sub-header"><a href="/categories/technology/_pages/Redis.html#msetnx" class="sidebar-link">Msetnx</a></li></ul></li><li><a href="/categories/technology/_pages/Redis.html#参考资料" class="sidebar-link">参考资料</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul></div></div><div class="page" data-v-38547c78><div class="content__default"><h1 id="redis-数据库的使用"><a href="#redis-数据库的使用" aria-hidden="true" class="header-anchor">#</a> Redis 数据库的使用</h1> <p><a href="https://redis.io/" target="_blank" rel="noopener noreferrer">Redis<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, REmote DIctionary Server 是一个由Salvatore Sanfilippo写的key-value存储系统。</p> <p>Redis是一个开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。</p> <p>它通常被称为数据结构服务器，因为值（value）可以是 字符串(String), 哈希(Hash), 列表(list), 集合(sets) 和 有序集合(sorted sets)等类型。</p> <h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2> <p>Windows下载地址: <a href="https://github.com/MicrosoftArchive/redis/releases" target="_blank" rel="noopener noreferrer">https://github.com/MicrosoftArchive/redis/releases<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Linux 安装:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">wget</span> http://download.redis.io/releases/redis-2.8.17.tar.gz
$ <span class="token function">tar</span> xzf redis-2.8.17.tar.gz
$ <span class="token function">cd</span> redis-2.8.17
$ <span class="token function">make</span>
</code></pre></div><p>Ubuntu 安装:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">apt-get</span> update
$ <span class="token function">apt-get</span> <span class="token function">install</span> redis-server
</code></pre></div><h2 id="基本使用方法"><a href="#基本使用方法" aria-hidden="true" class="header-anchor">#</a> 基本使用方法</h2> <p>安装后, 进入到 Redis 安装目录, 开启 Redis 服务, 默认监听 6379 端口</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ redis-server -v
Redis server v<span class="token operator">=</span>3.2.100 sha<span class="token operator">=</span>00000000:0 malloc<span class="token operator">=</span>jemalloc-3.6.0 bits<span class="token operator">=</span>64 build<span class="token operator">=</span>dd26f1f93c5130ee

$ redis-server.exe redis.windows.conf
<span class="token punctuation">[</span>11184<span class="token punctuation">]</span> 09 Apr 09:23:02.979 <span class="token comment"># Creating Server TCP listening socket 127.0.0.1:6379: bind: No error</span>

$ redis-cli
<span class="token operator">&gt;</span> <span class="token function">ping</span>
PONG
<span class="token operator">&gt;</span> <span class="token keyword">set</span> myKey abc
OK
<span class="token operator">&gt;</span> get myKey
abc
<span class="token operator">&gt;</span> info <span class="token comment"># 查看服务器信息</span>
<span class="token operator">&gt;</span> <span class="token keyword">exit</span>
</code></pre></div><p>设置为开机启动 (Windows):</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ redis-server --service-install redis.windows-service.conf
</code></pre></div><p>相关可视化工具:</p> <ul><li><a href="https://github.com/uglide/RedisDesktopManager" target="_blank" rel="noopener noreferrer">RedisDesktopManager<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/caoxinyu/RedisClient" target="_blank" rel="noopener noreferrer">RedisClient<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/cinience/RedisStudio" target="_blank" rel="noopener noreferrer">RedisStudio<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="imgLink" data-v-16222526><img src="https://img.xiaoyulive.top/img/date/20190409/001.png" data-v-16222526></div> <h2 id="数据类型"><a href="#数据类型" aria-hidden="true" class="header-anchor">#</a> 数据类型</h2> <table><thead><tr><th style="text-align:left;">类型</th> <th style="text-align:left;">简介</th> <th style="text-align:left;">特性</th> <th style="text-align:left;">场景</th></tr></thead> <tbody><tr><td style="text-align:left;">String(字符串)</td> <td style="text-align:left;">二进制安全</td> <td style="text-align:left;">可以包含任何数据,比如jpg图片或者序列化的对象,一个键最大能存储512M</td> <td style="text-align:left;">---</td></tr> <tr><td style="text-align:left;">Hash(字典)</td> <td style="text-align:left;">键值对集合,即编程语言中的Map类型</td> <td style="text-align:left;">适合存储对象,并且可以像数据库中update一个属性一样只修改某一项属性值(Memcached中需要取出整个字符串反序列化成对象修改完再序列化存回去)</td> <td style="text-align:left;">存储、读取、修改用户属性</td></tr> <tr><td style="text-align:left;">List(列表)</td> <td style="text-align:left;">链表(双向链表)</td> <td style="text-align:left;">增删快,提供了操作某一段元素的API</td> <td style="text-align:left;">1,最新消息排行等功能(比如朋友圈的时间线) 2,消息队列</td></tr> <tr><td style="text-align:left;">Set(集合)</td> <td style="text-align:left;">哈希表实现,元素不重复</td> <td style="text-align:left;">1、添加、删除,查找的复杂度都是O(1) 2、为集合提供了求交集、并集、差集等操作</td> <td style="text-align:left;">1、共同好友 2、利用唯一性,统计访问网站的所有独立ip 3、好友推荐时,根据tag求交集,大于某个阈值就可以推荐</td></tr> <tr><td style="text-align:left;">Sorted Set(有序集合)</td> <td style="text-align:left;">将Set中的元素增加一个权重参数score,元素按score有序排列</td> <td style="text-align:left;">数据插入集合时,已经进行天然排序</td> <td style="text-align:left;">1、排行榜 2、带权重的消息队列</td></tr></tbody></table> <h2 id="数据库操作"><a href="#数据库操作" aria-hidden="true" class="header-anchor">#</a> 数据库操作</h2> <div class="language- extra-class"><pre class="language-text"><code>&gt; SELECT 0 # 选择数据库db0
</code></pre></div><h2 id="键的相关操作"><a href="#键的相关操作" aria-hidden="true" class="header-anchor">#</a> 键的相关操作</h2> <p>键的基本操作格式: <code>COMMAND KEY_NAME</code></p> <ul><li><code>del key</code> 删除 key</li> <li><code>dump key</code> 序列号 key, 并返回被序列化的值</li> <li><code>rename key newKey</code> 修改 key 的名称</li> <li><code>renamenx key newKey</code> 仅当 newkey 不存在时，将 key 改名为 newkey</li> <li><code>exists key</code> 检测 key 是否存在</li> <li><code>type key</code> 返回 key 的类型</li> <li><code>randomkey</code> 从当前数据库中随机返回一个 key</li> <li><code>move key db</code> 将当前数据库的 key 移动到给定的数据库 db 当中</li> <li><code>keys pattern</code> 查找所有符合给定模式 (pattern) 的 key</li> <li><code>expire key seconds</code> 设置 key 的过期时间 (单位秒)</li> <li><code>pexpire key milliseconds</code> 设置 key 的过期时间 (单位毫秒)</li> <li><code>expireat key timestamp</code> 设置 key 的过期时间 (UNIX 秒时间戳)</li> <li><code>pexpireat key milliseconds-timestamp</code> 设置 key 的过期时间 (UNIX 毫秒时间戳)</li> <li><code>ttl key</code> 以秒为单位，返回给定 key 的剩余生存时间(TTL, time to live)</li> <li><code>pttl key</code> 以毫秒为单位返回 key 的剩余的过期时间</li> <li><code>persist key</code> 移除 key 的过期时间，key 将持久保持</li></ul> <h2 id="字符串的相关操作"><a href="#字符串的相关操作" aria-hidden="true" class="header-anchor">#</a> 字符串的相关操作</h2> <ul><li><code>set key value</code> 设置 key-value 键值对</li> <li><code>get key</code> 获取 key 对应的 value</li></ul> <h3 id="getrange"><a href="#getrange" aria-hidden="true" class="header-anchor">#</a> GETRANGE</h3> <p>返回 key 中字符串值的子字符</p> <p>语法: <code>GETRANGE KEY_NAME start end</code></p> <div class="language- extra-class"><pre class="language-text"><code>redis&gt; set mykey &quot;This is my test key&quot;
OK

redis&gt; getrange mykey 0 3
This
</code></pre></div><h3 id="getset"><a href="#getset" aria-hidden="true" class="header-anchor">#</a> GETSET</h3> <p>将给定 key 的值设为 value ，并返回 key 的旧值(old value)</p> <p>语法: <code>GETSET key value</code></p> <div class="language- extra-class"><pre class="language-text"><code>redis&gt; GETSET db mongodb    # 没有旧值，返回 nil
(nil)

redis&gt; GET db
&quot;mongodb&quot;

redis&gt; GETSET db redis      # 返回旧值 mongodb
&quot;mongodb&quot;

redis&gt; GET db
&quot;redis&quot;
</code></pre></div><h3 id="mkey"><a href="#mkey" aria-hidden="true" class="header-anchor">#</a> MKEY</h3> <p>Redis Mget 命令返回所有(一个或多个)给定 key 的值。 如果给定的 key 里面，有某个 key 不存在，那么这个 key 返回特殊值 nil 。</p> <p>语法: <code>MGET KEY1 KEY2 .. KEYN</code></p> <div class="language- extra-class"><pre class="language-text"><code>127.0.0.1:6379&gt; mget foo mykey
1) &quot;bar&quot;
2) &quot;This is my test key&quot;
</code></pre></div><h3 id="msetnx"><a href="#msetnx" aria-hidden="true" class="header-anchor">#</a> Msetnx</h3> <p>语法: <code>MSETNX key1 value1 key2 value2 .. keyN valueN</code></p> <h2 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h2> <ul><li><a href="http://www.runoob.com/redis/redis-tutorial.html" target="_blank" rel="noopener noreferrer">Redis 教程 - RUNOOB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.redis.cn/documentation.html" target="_blank" rel="noopener noreferrer">Redis 文档中心<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="article-info"><div class="article-title">文档信息</div><p class="article-item">版权声明：著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p><p class="article-item">文章标题：Redis 数据库的使用</p><p class="article-item">原文链接：<a href="https://www.xiaoyulive.top/categories/technology/_pages/Redis.html">https://www.xiaoyulive.top/categories/technology/_pages/Redis.html</a></p><p class="article-item">发表日期：2019-04-09</p></div><!----><!----></div><div class="footers" data-v-38547c78><p data-v-38547c78><span data-v-38547c78>MIT Licensed | Copyright © 2018-present  滇ICP备16006294号</span></p><p data-v-38547c78><span data-v-38547c78>Design by <a href="/">Quanzaiyu</a> | Power by <a href="https://vuepress.vuejs.org/" target="_blank">VuePress</a> | Hosted by <a href="https://pages.coding.me" target="_blank" style="font-weight: bold">Coding Pages</a></span></p></div></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.ab7dbbcd.js" defer></script><script src="/assets/js/5.fa2f35ee.js" defer></script><script src="/assets/js/14.35572a91.js" defer></script>
  </body>
</html>
