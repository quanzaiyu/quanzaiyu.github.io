<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Scrapy: 基础概念 | 小昱个人网站</title>
    <meta name="description" content="小昱个人网站">
    <meta http-equiv="Expires" content="Mon,12 May 2050 00:20:00 GMT">
  <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_517060_lom78h954w.css">
  <link rel="stylesheet" href="https://img.xiaoyulive.top/css/animate.css">
    
    <link rel="preload" href="/assets/css/0.styles.d5495972.css" as="style"><link rel="preload" href="/assets/js/app.abf4421b.js" as="script"><link rel="preload" href="/assets/js/5.6335082c.js" as="script"><link rel="preload" href="/assets/js/14.7dbb0e10.js" as="script"><link rel="prefetch" href="/assets/js/1.2d47e53b.js"><link rel="prefetch" href="/assets/js/10.90d8996c.js"><link rel="prefetch" href="/assets/js/11.dcb10fc3.js"><link rel="prefetch" href="/assets/js/12.76af0b83.js"><link rel="prefetch" href="/assets/js/13.d29d541c.js"><link rel="prefetch" href="/assets/js/15.4514738e.js"><link rel="prefetch" href="/assets/js/2.f0c186c6.js"><link rel="prefetch" href="/assets/js/6.440c87ee.js"><link rel="prefetch" href="/assets/js/7.b2dc231a.js"><link rel="prefetch" href="/assets/js/8.11f3be4c.js"><link rel="prefetch" href="/assets/js/9.949b3689.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.e1f08eae.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d5495972.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-38547c78><header class="navbar" data-v-38547c78><div class="navbar-content"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><img src="/logo.png" class="logo"><span class="site-name can-hide">小昱个人网站</span></a><div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">开发者博客</a></div><div class="nav-item"><a href="/articles/" class="nav-link">生活漫谈</a></div><div class="nav-item"><a href="/note/" class="nav-link">阅读札记</a></div><div class="nav-item"><a href="/categories/" class="nav-link router-link-active">学无止境</a></div><div class="nav-item"><a href="/share/" class="nav-link">精品分享</a></div><div class="nav-item"><a href="/favorite/" class="nav-link">收藏夹</a></div><!----></nav><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div></div></div></header><div class="sidebar-mask" data-v-38547c78></div><div class="sidebar" data-v-38547c78><div class="sidebar-container"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">开发者博客</a></div><div class="nav-item"><a href="/articles/" class="nav-link">生活漫谈</a></div><div class="nav-item"><a href="/note/" class="nav-link">阅读札记</a></div><div class="nav-item"><a href="/categories/" class="nav-link router-link-active">学无止境</a></div><div class="nav-item"><a href="/share/" class="nav-link">精品分享</a></div><div class="nav-item"><a href="/favorite/" class="nav-link">收藏夹</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Python 爬虫实践</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/categories/python/_books/python_spider/" class="sidebar-link">Python 爬虫</a></li><li><a href="/categories/python/_books/python_spider/Intro.html" class="sidebar-link">简介</a></li><li><a href="/categories/python/_books/python_spider/Requests.html" class="sidebar-link">请求模块 - Requests</a></li><li><a href="/categories/python/_books/python_spider/Re.html" class="sidebar-link">正则模块 - re</a></li><li><a href="/categories/python/_books/python_spider/Bs4.html" class="sidebar-link">网页解析模块 - BeautifulSoup</a></li><li><a href="/categories/python/_books/python_spider/Pymysql.html" class="sidebar-link">数据库模块 - pymysql</a></li><li><a href="/categories/python/_books/python_spider/Scrapy.html" class="sidebar-link">爬虫框架 - Scrapy</a></li><li><a href="/categories/python/_books/python_spider/Scarpy_Basis.html" class="active sidebar-link">Scrapy: 基础概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/categories/python/_books/python_spider/Scarpy_Basis.html#引擎（engine）" class="sidebar-link">引擎（Engine）</a></li><li class="sidebar-sub-header"><a href="/categories/python/_books/python_spider/Scarpy_Basis.html#爬虫（spiders）" class="sidebar-link">爬虫（Spiders）</a></li><li class="sidebar-sub-header"><a href="/categories/python/_books/python_spider/Scarpy_Basis.html#管道（item-pipeline）" class="sidebar-link">管道（Item Pipeline）</a></li><li class="sidebar-sub-header"><a href="/categories/python/_books/python_spider/Scarpy_Basis.html#调度器（scheduler）" class="sidebar-link">调度器（Scheduler）</a></li><li class="sidebar-sub-header"><a href="/categories/python/_books/python_spider/Scarpy_Basis.html#下载器（downloader）" class="sidebar-link">下载器（Downloader）</a></li><li class="sidebar-sub-header"><a href="/categories/python/_books/python_spider/Scarpy_Basis.html#下载器中间件（downloader-middlewares）" class="sidebar-link">下载器中间件（Downloader middlewares）</a></li><li class="sidebar-sub-header"><a href="/categories/python/_books/python_spider/Scarpy_Basis.html#spider中间件（spider-middlewares）" class="sidebar-link">Spider中间件（Spider middlewares）</a></li></ul></li><li><a href="/categories/python/_books/python_spider/Scrapy_Simple.html" class="sidebar-link">Scrapy: 基础使用</a></li><li><a href="/categories/python/_books/python_spider/Scrapy_Selector.html" class="sidebar-link">Scrapy: Selector选择器</a></li><li><a href="/categories/python/_books/python_spider/Scrapy_Command.html" class="sidebar-link">Scrapy: 命令行</a></li><li><a href="/categories/python/_books/python_spider/Scrapy_File.html" class="sidebar-link">Scrapy: 存取为文本</a></li><li><a href="/categories/python/_books/python_spider/Scrapy_Image.html" class="sidebar-link">Scrapy: 存取为图片</a></li><li><a href="/categories/python/_books/python_spider/Scrapy_Mysql.html" class="sidebar-link">Scrapy: 存取到 MySQL</a></li><li><a href="/categories/python/_books/python_spider/Reference.html" class="sidebar-link">参考资料</a></li></ul></div></li></ul></div></div><div class="page" data-v-38547c78><div class="content__default"><h1 id="scrapy-基础概念"><a href="#scrapy-基础概念" aria-hidden="true" class="header-anchor">#</a> Scrapy: 基础概念</h1> <div class="imgLink" data-v-16222526><img src="https://img.xiaoyulive.top/img/date/20190115/001.png" data-v-16222526></div> <h2 id="引擎（engine）"><a href="#引擎（engine）" aria-hidden="true" class="header-anchor">#</a> 引擎（Engine）</h2> <p>引擎负责控制数据流在系统中所有组件中流动，并在相应动作发生时触发事件。 详细内容查看下面的数据流(Data Flow)部分。</p> <h2 id="爬虫（spiders）"><a href="#爬虫（spiders）" aria-hidden="true" class="header-anchor">#</a> 爬虫（Spiders）</h2> <p>Spider是Scrapy用户编写用于分析response并提取item(即获取到的item)或额外跟进的URL的类。 每个spider负责处理一个特定(或一些)网站。</p> <p><strong>name</strong></p> <p>定义spider名字的字符串(string)。spider的名字定义了Scrapy如何定位(并初始化)spider，所以其必须是唯一的。 不过您可以生成多个相同的spider实例(instance)，这没有任何限制。 name是spider最重要的属性，而且是必须的。</p> <p>如果该spider爬取单个网站(single domain)，一个常见的做法是以该网站(domain)(加或不加 后缀 )来命名spider。 例如，如果spider爬取 mywebsite.com ，该spider通常会被命名为 mywebsite 。</p> <p><strong>allowed_domains</strong></p> <p>可选。包含了spider允许爬取的域名(domain)列表(list)。 当 OffsiteMiddleware 启用时， 域名不在列表中的URL不会被跟进。</p> <p><strong>start_urls</strong></p> <p>URL列表。当没有制定特定的URL时，spider将从该列表中开始进行爬取。 因此，第一个被获取到的页面的URL将是该列表之一。 后续的URL将会从获取到的数据中提取。</p> <p><strong>start_requests()</strong></p> <p>该方法必须返回一个可迭代对象(iterable)。该对象包含了spider用于爬取的第一个Request。当spider启动爬取并且未制定URL时，该方法被调用。</p> <p><strong>parse(response)</strong></p> <p>当response没有指定回调函数时，该方法是Scrapy处理下载的response的默认方法。</p> <p>parse 负责处理response并返回处理的数据以及(/或)跟进的URL。 Spider 对其他的Request的回调函数也有相同的要求。</p> <p>该方法及其他的Request回调函数必须返回一个包含 Request 及(或) Item 的可迭代的对象。</p> <p>参数:</p> <ul><li>response(Response) – 用于分析的response</li></ul> <p><strong>closed(reason)</strong></p> <p>当spider关闭时，该函数被调用。</p> <h2 id="管道（item-pipeline）"><a href="#管道（item-pipeline）" aria-hidden="true" class="header-anchor">#</a> 管道（Item Pipeline）</h2> <p><code>Item Pipeline</code> 负责处理被spider提取出来的item。典型的处理有清理、验证及持久化(例如存取到数据库中)。</p> <p>如果我们要编写一个pipeline组件，如：MySQLPipline（命名随意，根据这个类的具体功能来即可），我们必须实现这个方法：</p> <p><strong>process_item(item, spider)</strong>(必须)</p> <p>每个item pipeline组件都需要调用该方法，这个方法必须返回一个 Item (或任何继承类)对象， 或是抛出 DropItem 异常，被丢弃的item将不会被之后的pipeline组件所处理。</p> <p>参数:</p> <ul><li>item (Item 对象) – 被爬取的item</li> <li>spider (Spider 对象) – 爬取该item的spider</li></ul> <p><strong>open_spider(spider)</strong>(非必须)</p> <p>当spider被开启时，这个方法被调用。</p> <p><strong>close_spider(spider)</strong>(非必须)</p> <p>当spider被关闭时，这个方法被调用。</p> <h2 id="调度器（scheduler）"><a href="#调度器（scheduler）" aria-hidden="true" class="header-anchor">#</a> 调度器（Scheduler）</h2> <p>调度器从引擎接受request并将他们入队，以便之后引擎请求他们时提供给引擎。</p> <h2 id="下载器（downloader）"><a href="#下载器（downloader）" aria-hidden="true" class="header-anchor">#</a> 下载器（Downloader）</h2> <p>下载器负责获取页面数据并提供给引擎，而后提供给spider。</p> <h2 id="下载器中间件（downloader-middlewares）"><a href="#下载器中间件（downloader-middlewares）" aria-hidden="true" class="header-anchor">#</a> 下载器中间件（Downloader middlewares）</h2> <p>下载器中间件是在引擎及下载器之间的特定钩子(specific hook)，处理Downloader传递给引擎的response。 其提供了一个简便的机制，通过插入自定义代码来扩展Scrapy功能。</p> <h2 id="spider中间件（spider-middlewares）"><a href="#spider中间件（spider-middlewares）" aria-hidden="true" class="header-anchor">#</a> Spider中间件（Spider middlewares）</h2> <p>Spider中间件是在引擎及Spider之间的特定钩子(specific hook)，处理spider的输入(response)和输出(items及requests)。 其提供了一个简便的机制，通过插入自定义代码来扩展Scrapy功能。</p></div><div class="article-info"><div class="article-title">文档信息</div><p class="article-item">版权声明：著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p><p class="article-item">文章标题：Scrapy: 基础概念</p><p class="article-item">原文链接：<a href="https://www.xiaoyulive.top/categories/python/_books/python_spider/Scarpy_Basis.html">https://www.xiaoyulive.top/categories/python/_books/python_spider/Scarpy_Basis.html</a></p><!----></div><!----><div class="content page-nav"><p class="inner"><span class="prev">← <a href="/categories/python/_books/python_spider/Scrapy.html">爬虫框架 - Scrapy</a></span><span class="next"><a href="/categories/python/_books/python_spider/Scrapy_Simple.html">Scrapy: 基础使用</a>  →</span></p></div></div><div class="footers" data-v-38547c78><p data-v-38547c78><span data-v-38547c78>MIT Licensed | Copyright © 2018-present  滇ICP备16006294号</span></p><p data-v-38547c78><span data-v-38547c78>Design by <a href="/">Quanzaiyu</a> | Power by <a href="https://vuepress.vuejs.org/" target="_blank">VuePress</a> | Hosted by <a href="https://pages.coding.me" target="_blank" style="font-weight: bold">Coding Pages</a></span></p></div></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.abf4421b.js" defer></script><script src="/assets/js/5.6335082c.js" defer></script><script src="/assets/js/14.7dbb0e10.js" defer></script>
  </body>
</html>
